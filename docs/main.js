(()=>{var e={5723:function(e,t,n){"use strict";t.meiosisSetup=void 0;var r=n(2793);Object.defineProperty(t,"meiosisSetup",{enumerable:!0,get:function(){return r.meiosisSetup}})},2793:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.meiosisSetup=void 0;let i=n(706),o=n(7489),a=r(n(1038)),l=(e,t,n)=>(n[e]=t,n),s=(e,t)=>t?e.concat(t):e,c=e=>e?Object.keys(e).reduce((t,n)=>l(n,Object.assign({},e[n].initial,c(e[n].nested)),t),{}):{},d=e=>e?Object.keys(e).reduce((t,n)=>{let r=e[n];if(void 0!==r.view){let e=r.view;return l(n,{view:(t,...r)=>e(t.nest(n),...r),nested:d(r.nested)},t)}return t},{}):{},u=(e,t=e=>e,n=e=>e)=>e?Object.keys(e).reduce((r,i)=>{var o;let a=e=>t(e).nest(i),l=e=>n(e)[i],c=e[i];return s(r,null==(o=c.services)?void 0:o.map(e=>({onchange:t=>e.onchange?e.onchange(l(t)):t,run:t=>e.run(a(t))}))).concat(u(c.nested,a,l))},[]):[],p=(e,t,n)=>r=>{let i=e.map(e=>e[r]),a=()=>e()[r],l=e=>t({[r]:e}),s=(0,o.get)(n,[r,"nested"]);return{states:i,state:a(),getState:a,update:l,nest:p(i,l,s),nested:s}};t.meiosisSetup=e=>{let t=null==e?void 0:e.stream,n=null==e?void 0:e.app,{states:r,update:o,view:l}=(({stream:e,app:t})=>{e||(e=i.simpleStream);let n=t||{},r=Object.assign({},n.initial,c(n.nested)),o=d(n.nested),l="function"==typeof e?e:e.stream,s=e.scan,u=l();return{states:s((e,t)=>(0,a.default)(e,t),r,u),update:u,view:o}})({stream:t,app:n}),f=p(r,o,l),h=()=>r(),g=e=>({states:r,state:e,getState:h,update:o,nest:f,nested:l}),v=(0,i.createDropRepeats)(t);return n&&s([],n.services).concat(u(n.nested)).forEach(e=>{v(r,e.onchange).map(t=>e.run(g(t)))}),v(r).map(g)}},706:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dropRepeats=t.createDropRepeats=t.simpleStream=t.scan=t.stream=void 0,t.stream=e=>{let n=[],r=e,i=function(e){if(arguments.length>0&&!i.ended)for(let t in r=e,n)n[t](r);return r};return i.map=e=>{let i=(0,t.stream)(),o=t=>{i(e(t))};return n.push(o),i.end=e=>{let t=n.indexOf(o);i.ended=!0,n.splice(t,1)},void 0!==r&&i(e(r)),i},i.end=e=>{i.ended=!0},i},t.scan=(e,n,r)=>{let i=(0,t.stream)(n),o=n;return r.map(t=>{i(o=e(o,t))}),i},t.simpleStream={stream:t.stream,scan:t.scan},t.createDropRepeats=(e=t.simpleStream)=>(t,n=e=>e)=>{let r,i=("function"==typeof e?e:e.stream)();return t.map(e=>{let t=n(e);t!==r&&(r=t,i(e))}),i},t.dropRepeats=(0,t.createDropRepeats)()},7489:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateFormFloatValue=t.updateFormIntValue=t.updateFormValue=t.get=void 0,t.get=(e,t)=>t.reduce((e,t)=>void 0==e?void 0:e[t],e);let n=(e,t)=>({[e[0]]:1===e.length?t:n(e.slice(1),t)}),r=e=>Array.isArray(e)?e:[e],i=(e,t,i)=>o=>{let a=e(o.currentTarget.value);isNaN(a)||t.update(n(r(i),a))};t.updateFormValue=(e,t,i=e=>e)=>o=>e.update(n(r(t),i(o.currentTarget.value))),t.updateFormIntValue=(e,t)=>n=>i(parseInt,e,t)(n),t.updateFormFloatValue=(e,t)=>n=>i(parseFloat,e,t)(n)},1038:function(e,t,n){"use strict";n.r(t),n.d(t,{default:()=>a});let r=Object.assign||((e,t)=>(t&&Object.keys(t).forEach(n=>e[n]=t[n]),e)),i=(e,t,n)=>{let r=typeof n;if(n&&"object"===r)if(Array.isArray(n))for(let r of n)t=i(e,t,r);else for(let r of Object.keys(n)){let a=n[r];"function"==typeof a?t[r]=a(t[r],o):void 0===a?e&&!isNaN(r)?t.splice(r,1):delete t[r]:null===a||"object"!=typeof a||Array.isArray(a)?t[r]=a:"object"==typeof t[r]?t[r]=a===t[r]?a:o(t[r],a):t[r]=i(!1,{},a)}else"function"===r&&(t=n(t,o));return t},o=(e,...t)=>{let n=Array.isArray(e);return i(n,n?e.slice():r({},e),t)},a=o},1835:function(e,t,n){"use strict";var r=n(6660);e.exports=function(e,t,n){var i=[],o=!1,a=-1;function l(){for(a=0;a<i.length;a+=2)try{e(i[a],r(i[a+1]),s)}catch(e){n.error(e)}a=-1}function s(){o||(o=!0,t(function(){o=!1,l()}))}return s.sync=l,{mount:function(t,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw TypeError("m.mount expects a component, not a vnode.");var o=i.indexOf(t);o>=0&&(i.splice(o,2),o<=a&&(a-=2),e(t,[])),null!=n&&(i.push(t,n),e(t,r(n),s))},redraw:s}}},3745:function(e,t,n){"use strict";var r=n(6660),i=n(6999),o=n(422),a=n(4837),l=n(993),s=n(8470);function c(e){try{return decodeURIComponent(e)}catch(t){return e}}e.exports=function(e,t){var n,d,u,p,f,h,g,v,b=null==e?null:"function"==typeof e.setImmediate?e.setImmediate:e.setTimeout,y=Promise.resolve(),w=!1,E=!1,T=!1,k={onremove:function(){E=T=!1,e.removeEventListener("popstate",S,!1)},view:function(){var e=r(f,h.key,h);return p?p.render(e):[e]}},O=I.SKIP={};function x(){w=!1;var r=e.location.hash;"#"!==I.prefix[0]&&(r=e.location.search+r,"?"!==I.prefix[0]&&"/"!==(r=e.location.pathname+r)[0]&&(r="/"+r));var i=r.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,c).slice(I.prefix.length),o=a(i);function l(e){console.error(e),I.set(u,null,{replace:!0})}Object.assign(o.params,e.history.state),function e(r){for(;r<d.length;r++)if(d[r].check(o)){var a=d[r].component,s=d[r].route,c=a,b=v=function(l){if(b===v){if(l===O)return e(r+1);f=null!=l&&("function"==typeof l.view||"function"==typeof l)?l:"div",h=o.params,g=i,v=null,p=a.render?a:null,T?t.redraw():(T=!0,t.mount(n,k))}};a.view||"function"==typeof a?(a={},b(c)):a.onmatch?y.then(function(){return a.onmatch(o.params,i,s)}).then(b,i===u?null:l):b();return}if(i===u)throw Error("Could not resolve default route "+u+".");I.set(u,null,{replace:!0})}(0)}function S(){w||(w=!0,b(x))}function I(t,r,i){if(!t)throw TypeError("DOM element being rendered to does not exist.");if(d=Object.keys(i).map(function(e){if("/"!==e[0])throw SyntaxError("Routes must start with a '/'.");if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw SyntaxError("Route parameter names must be separated with either '/', '.', or '-'.");return{route:e,component:i[e],check:l(e)}}),u=r,null!=r){var o=a(r);if(!d.some(function(e){return e.check(o)}))throw ReferenceError("Default route doesn't match any known routes.")}n=t,e.addEventListener("popstate",S,!1),E=!0,x()}return I.set=function(t,n,r){if(null!=v&&((r=r||{}).replace=!0),v=null,t=o(t,n),E){S();var i=r?r.state:null,a=r?r.title:null;r&&r.replace?e.history.replaceState(i,a,I.prefix+t):e.history.pushState(i,a,I.prefix+t)}else e.location.href=I.prefix+t},I.get=function(){return g},I.prefix="#!",I.Link={view:function(e){var t,n,r,a=i(e.attrs.selector||"a",s(e.attrs,["options","params","selector","onclick"]),e.children);return(a.attrs.disabled=!!a.attrs.disabled)?(a.attrs.href=null,a.attrs["aria-disabled"]="true"):(t=e.attrs.options,n=e.attrs.onclick,r=o(a.attrs.href,e.attrs.params),a.attrs.href=I.prefix+r,a.attrs.onclick=function(e){var i;"function"==typeof n?i=n.call(e.currentTarget,e):null==n||"object"!=typeof n||"function"==typeof n.handleEvent&&n.handleEvent(e),!1===i||e.defaultPrevented||0!==e.button&&0!==e.which&&1!==e.which||e.currentTarget.target&&"_self"!==e.currentTarget.target||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey||(e.preventDefault(),e.redraw=!1,I.set(r,null,t))}),a}},I.param=function(e){return h&&null!=e?h[e]:h},I}},1460:function(e,t,n){"use strict";var r=n(6999);r.trust=n(4508),r.fragment=n(6496),e.exports=r},3201:function(e,t,n){"use strict";var r=n(1460),i=n(9428),o=n(3502),a=n(6195),l=function(){return r.apply(this,arguments)};l.m=r,l.trust=r.trust,l.fragment=r.fragment,l.Fragment="[",l.mount=o.mount,l.route=n(224),l.render=n(8017),l.redraw=o.redraw,l.request=i.request,l.parseQueryString=n(7996),l.buildQueryString=n(8223),l.parsePathname=n(4837),l.buildPathname=n(422),l.vnode=n(6660),l.censor=n(8470),l.domFor=a.domFor,e.exports=l},3502:function(e,t,n){"use strict";var r=n(8017);e.exports=n(1835)(r,"undefined"!=typeof requestAnimationFrame?requestAnimationFrame:null,"undefined"!=typeof console?console:null)},422:function(e,t,n){"use strict";var r=n(8223);e.exports=function(e,t){if(/:([^\/\.-]+)(\.{3})?:/.test(e))throw SyntaxError("Template parameter names must be separated by either a '/', '-', or '.'.");if(null==t)return e;var n=e.indexOf("?"),i=e.indexOf("#"),o=i<0?e.length:i,a=e.slice(0,n<0?o:n),l={};Object.assign(l,t);var s=a.replace(/:([^\/\.-]+)(\.{3})?/g,function(e,n,r){return(delete l[n],null==t[n])?e:r?t[n]:encodeURIComponent(String(t[n]))}),c=s.indexOf("?"),d=s.indexOf("#"),u=d<0?s.length:d,p=s.slice(0,c<0?u:c);n>=0&&(p+=e.slice(n,o)),c>=0&&(p+=(n<0?"?":"&")+s.slice(c,u));var f=r(l);return f&&(p+=(n<0&&c<0?"?":"&")+f),i>=0&&(p+=e.slice(i)),d>=0&&(p+=(i<0?"":"&")+s.slice(d)),p}},993:function(e,t,n){"use strict";var r=n(4837);e.exports=function(e){var t=r(e),n=Object.keys(t.params),i=[],o=RegExp("^"+t.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,function(e,t,n){return null==t?"\\"+e:(i.push({k:t,r:"..."===n}),"..."===n)?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||"")})+"\\/?$");return function(e){for(var r=0;r<n.length;r++)if(t.params[n[r]]!==e.params[n[r]])return!1;if(!i.length)return o.test(e.path);var a=o.exec(e.path);if(null==a)return!1;for(var r=0;r<i.length;r++)e.params[i[r].k]=i[r].r?a[r+1]:decodeURIComponent(a[r+1]);return!0}}},4837:function(e,t,n){"use strict";var r=n(7996);e.exports=function(e){var t=e.indexOf("?"),n=e.indexOf("#"),i=n<0?e.length:n,o=e.slice(0,t<0?i:t).replace(/\/{2,}/g,"/");return o?"/"!==o[0]&&(o="/"+o):o="/",{path:o,params:t<0?{}:r(e.slice(t+1,i))}}},8223:function(e){"use strict";e.exports=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";var t=[];for(var n in e)!function e(n,r){if(Array.isArray(r))for(var i=0;i<r.length;i++)e(n+"["+i+"]",r[i]);else if("[object Object]"===Object.prototype.toString.call(r))for(var i in r)e(n+"["+i+"]",r[i]);else t.push(encodeURIComponent(n)+(null!=r&&""!==r?"="+encodeURIComponent(r):""))}(n,e[n]);return t.join("&")}},7996:function(e){"use strict";function t(e){try{return decodeURIComponent(e)}catch(t){return e}}e.exports=function(e){if(""===e||null==e)return{};"?"===e.charAt(0)&&(e=e.slice(1));for(var n=e.split("&"),r={},i={},o=0;o<n.length;o++){var a=n[o].split("="),l=t(a[0]),s=2===a.length?t(a[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var c=l.split(/\]\[?|\[/),d=i;l.indexOf("[")>-1&&c.pop();for(var u=0;u<c.length;u++){var p=c[u],f=c[u+1],h=""==f||!isNaN(parseInt(f,10));if(""===p){var l=c.slice(0,u).join();null==r[l]&&(r[l]=Array.isArray(d)?d.length:0),p=r[l]++}else if("__proto__"===p)break;if(u===c.length-1)d[p]=s;else{var g=Object.getOwnPropertyDescriptor(d,p);null!=g&&(g=g.value),null==g&&(d[p]=g=h?[]:{}),d=g}}}return i}},8017:function(e,t,n){"use strict";e.exports=n(8620)("undefined"!=typeof window?window:null)},7014:function(e,t,n){"use strict";e.exports=new Map([[n(111),!0]])},6195:function(e){"use strict";var t=new WeakMap;e.exports={delayedRemoval:t,domFor:function*(e){var n=e.dom,r=e.domSize,i=t.get(n);if(null!=n)do{var o=n.nextSibling;t.get(n)===i&&(yield n,r--),n=o}while(r)}}},111:function(e){"use strict";e.exports={}},6496:function(e,t,n){"use strict";var r=n(6660),i=n(9553);e.exports=function(e,...t){var n=i(e,t);return null==n.attrs&&(n.attrs={}),n.tag="[",n.children=r.normalizeChildren(n.children),n}},6999:function(e,t,n){"use strict";var r=n(6660),i=n(9553),o=n(2560),a=n(111),l=n(7014),s=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,c=Object.create(null);e.exports=function(e,t,...n){if(null==e||"string"!=typeof e&&"function"!=typeof e&&"function"!=typeof e.view)throw Error("The selector must be either a string or a component.");var d=i(t,n);return"string"==typeof e&&(d.children=r.normalizeChildren(d.children),"["!==e)?function(e,t){t.tag=e.tag;var n=t.attrs;if(null==n)return t.attrs=e.attrs,t.is=e.is,t;var r=o.call(n,"class"),i=r?n.class:n.className;return e.attrs!==a?(n=Object.assign({},e.attrs,n),(null!=i||null!=e.attrs.className)&&(n.className=null!=i?null!=e.attrs.className?String(e.attrs.className)+" "+String(i):i:e.attrs.className)):null!=i&&(n.className=i),r&&(n.class=null),"input"===e.tag&&o.call(n,"type")&&(n=Object.assign({type:n.type},n)),t.is=n.is,t.attrs=n,t}(c[e]||function(e){for(var t,n="div",r=[],i={},d=!0;t=s.exec(e);){var u=t[1],p=t[2];if(""===u&&""!==p)n=p;else if("#"===u)i.id=p;else if("."===u)r.push(p);else if("["===t[3][0]){var f,h=t[6];(h&&(h=h.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===t[4])?r.push(h):(i[t[4]]=""===h?h:h||!0,("value"===(f=t[4])||"checked"===f||"selectedIndex"===f||"selected"===f)&&(d=!1))}}return r.length>0&&(i.className=r.join(" ")),!function(e){for(var t in e)if(o.call(e,t))return!1;return!0}(i)?l.set(i,d):i=a,c[e]={tag:n,attrs:i,is:i.is}}(e),d):(null==d.attrs&&(d.attrs={}),d.tag=e,d)}},9553:function(e,t,n){"use strict";var r=n(6660);e.exports=function(e,t){return null!=e&&("object"!=typeof e||null!=e.tag||Array.isArray(e))?(t=0===t.length&&Array.isArray(e)?e:[e,...t],e=void 0):1===t.length&&Array.isArray(t[0])&&(t=t[0]),r("",e&&e.key,e,t)}},8620:function(e,t,n){"use strict";var r=n(6660),i=n(6195),o=i.delayedRemoval,a=i.domFor,l=n(7014);e.exports=function(){var e,t,n,i={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function s(e){return e.ownerDocument}function c(e){return e.attrs&&e.attrs.xmlns||i[e.tag]}function d(e,t){if(e.state!==t)throw Error("'vnode.state' must not be modified.")}function u(e){var t=e.state;try{return this.apply(t,arguments)}finally{d(e,t)}}function p(e){try{return s(e).activeElement}catch(e){return null}}function f(e,t,n,r,i,o,a){for(var l=n;l<r;l++){var s=t[l];null!=s&&h(e,s,i,a,o)}}function h(e,t,n,i,o){var a,l,d,p,g,b,y,w,E=t.tag;if("string"==typeof E)switch(t.state={},null!=t.attrs&&P(t.attrs,t,n),E){case"#":a=e,l=t,d=o,l.dom=s(a).createTextNode(l.children),k(a,l.dom,d);break;case"<":v(e,t,i,o);break;case"[":var T=e,x=t,S=n,I=i,L=o,A=s(T).createDocumentFragment();if(null!=x.children){var N=x.children;f(A,N,0,N.length,S,null,I)}x.dom=A.firstChild,x.domSize=A.childNodes.length,k(T,A,L);break;default:!function(e,t,n,r,i){var o=t.tag,a=t.attrs,l=t.is,d=(r=c(t)||r)?l?s(e).createElementNS(r,o,{is:l}):s(e).createElementNS(r,o):l?s(e).createElement(o,{is:l}):s(e).createElement(o);if(t.dom=d,null!=a&&function(e,t,n){for(var r in t)C(e,r,null,t[r],n)}(t,a,r),k(e,d,i),!O(t)&&null!=t.children){var u=t.children;f(d,u,0,u.length,n,null,r),"select"===t.tag&&null!=a&&function(e,t){if("value"in t)if(null===t.value)-1!==e.dom.selectedIndex&&(e.dom.value=null);else{var n=""+t.value;(e.dom.value!==n||-1===e.dom.selectedIndex)&&(e.dom.value=n)}"selectedIndex"in t&&C(e,"selectedIndex",null,t.selectedIndex,void 0)}(t,a)}}(e,t,n,i,o)}else{p=e,g=t,b=n,y=i,w=o,!function(e,t){var n;if("function"==typeof e.tag.view){if(e.state=Object.create(e.tag),null!=(n=e.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(e.state=void 0,null!=(n=e.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,e.state=null!=e.tag.prototype&&"function"==typeof e.tag.prototype.view?new e.tag(e):e.tag(e)}if(P(e.state,e,t),null!=e.attrs&&P(e.attrs,e,t),e.instance=r.normalize(u.call(e.state.view,e)),e.instance===e)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null}(g,b),null!=g.instance?(h(p,g.instance,b,y,w),g.dom=g.instance.dom,g.domSize=null!=g.dom?g.instance.domSize:0):g.domSize=0}}var g={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function v(e,t,n,r){var i,o=t.children.match(/^\s*?<(\w+)/im)||[],a=s(e).createElement(g[o[1]]||"div");"http://www.w3.org/2000/svg"===n?(a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+t.children+"</svg>",a=a.firstChild):a.innerHTML=t.children,t.dom=a.firstChild,t.domSize=a.childNodes.length;for(var l=s(e).createDocumentFragment();i=a.firstChild;)l.appendChild(i);k(e,l,r)}function b(e,t,n,r,i,o){if(t!==n&&(null!=t||null!=n))if(null==t||0===t.length)f(e,n,0,n.length,r,i,o);else if(null==n||0===n.length)x(e,t,0,t.length);else{var a=null!=t[0]&&null!=t[0].key,l=null!=n[0]&&null!=n[0].key,s=0,c=0;if(!a)for(;c<t.length&&null==t[c];)c++;if(!l)for(;s<n.length&&null==n[s];)s++;if(a!==l)x(e,t,c,t.length),f(e,n,s,n.length,r,i,o);else if(l){for(var d,u,p,g,v,b,k=t.length-1,O=n.length-1;k>=c&&O>=s&&(g=t[k],v=n[O],g.key===v.key);)g!==v&&y(e,g,v,r,i,o),null!=v.dom&&(i=v.dom),k--,O--;for(;k>=c&&O>=s&&(u=t[c],p=n[s],u.key===p.key);)c++,s++,u!==p&&y(e,u,p,r,E(t,c,i),o);for(;k>=c&&O>=s&&s!==O&&u.key===v.key&&g.key===p.key;)T(e,g,b=E(t,c,i)),g!==p&&y(e,g,p,r,b,o),++s<=--O&&T(e,u,i),u!==v&&y(e,u,v,r,i,o),null!=v.dom&&(i=v.dom),c++,g=t[--k],v=n[O],u=t[c],p=n[s];for(;k>=c&&O>=s&&g.key===v.key;)g!==v&&y(e,g,v,r,i,o),null!=v.dom&&(i=v.dom),k--,O--,g=t[k],v=n[O];if(s>O)x(e,t,c,k+1);else if(c>k)f(e,n,s,O+1,r,i,o);else{var d,S,I=i,A=O-s+1,C=Array(A),N=0,D=0,M=0x7fffffff,_=0;for(D=0;D<A;D++)C[D]=-1;for(D=O;D>=s;D--){null==d&&(d=function(e,t,n){for(var r=Object.create(null);t<n;t++){var i=e[t];if(null!=i){var o=i.key;null!=o&&(r[o]=t)}}return r}(t,c,k+1));var R=d[(v=n[D]).key];null!=R&&(M=R<M?R:-1,C[D-s]=R,g=t[R],t[R]=null,g!==v&&y(e,g,v,r,i,o),null!=v.dom&&(i=v.dom),_++)}if(i=I,_!==k-c+1&&x(e,t,c,k+1),0===_)f(e,n,s,O+1,r,i,o);else if(-1===M)for(N=(S=function(e){for(var t=[0],n=0,r=0,i=0,o=w.length=e.length,i=0;i<o;i++)w[i]=e[i];for(var i=0;i<o;++i)if(-1!==e[i]){var a=t[t.length-1];if(e[a]<e[i]){w[i]=a,t.push(i);continue}for(n=0,r=t.length-1;n<r;){var l=(n>>>1)+(r>>>1)+(n&r&1);e[t[l]]<e[i]?n=l+1:r=l}e[i]<e[t[n]]&&(n>0&&(w[i]=t[n-1]),t[n]=i)}for(n=t.length,r=t[n-1];n-- >0;)t[n]=r,r=w[r];return w.length=0,t}(C)).length-1,D=O;D>=s;D--)p=n[D],-1===C[D-s]?h(e,p,r,o,i):S[N]===D-s?N--:T(e,p,i),null!=p.dom&&(i=n[D].dom);else for(D=O;D>=s;D--)p=n[D],-1===C[D-s]&&h(e,p,r,o,i),null!=p.dom&&(i=n[D].dom)}}else{var P=t.length<n.length?t.length:n.length;for(s=s<c?s:c;s<P;s++)(u=t[s])!==(p=n[s])&&(null!=u||null!=p)&&(null==u?h(e,p,r,o,E(t,s+1,i)):null==p?L(e,u):y(e,u,p,r,E(t,s+1,i),o));t.length>P&&x(e,t,s,t.length),n.length>P&&f(e,n,s,n.length,r,i,o)}}}function y(e,t,n,i,o,a){var s=t.tag;if(s===n.tag&&t.is===n.is){if(n.state=t.state,n.events=t.events,function(e,t){do{if(null!=e.attrs&&"function"==typeof e.attrs.onbeforeupdate){var n=u.call(e.attrs.onbeforeupdate,e,t);if(void 0!==n&&!n)break}if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeupdate){var n=u.call(e.state.onbeforeupdate,e,t);if(void 0!==n&&!n)break}return!1}while(!1);return e.dom=t.dom,e.domSize=t.domSize,e.instance=t.instance,e.attrs=t.attrs,e.children=t.children,e.text=t.text,!0}(n,t))return;if("string"==typeof s)switch(null!=n.attrs&&j(n.attrs,n,i),s){case"#":d=t,f=n,d.children.toString()!==f.children.toString()&&(d.dom.nodeValue=f.children),f.dom=d.dom;break;case"<":g=e,w=t,E=n,T=a,k=o,w.children!==E.children?(A(g,w),v(g,E,T,k)):(E.dom=w.dom,E.domSize=w.domSize);break;case"[":var d,f,g,w,E,T,k,x,S,I,_,P,H=e,V=t,$=n,B=i,U=o,z=a;b(H,V.children,$.children,B,U,z);var W=0,F=$.children;if($.dom=null,null!=F){for(var G=0;G<F.length;G++){var Y=F[G];null!=Y&&null!=Y.dom&&(null==$.dom&&($.dom=Y.dom),W+=Y.domSize||1)}1!==W&&($.domSize=W)}break;default:x=t,S=n,I=i,_=a,P=S.dom=x.dom,_=c(S)||_,x.attrs==S.attrs&&(null==S.attrs||l.get(S.attrs))||function(e,t,n,r){var i;if(null!=t)for(var o in t!==n||l.has(n)||console.warn("Don't reuse attrs object, use new object for every redraw, this will throw in next major"),t)null!=(i=t[o])&&(null==n||null==n[o])&&function(e,t,n,r){if(!("key"===t||null==n||N(t)))if("o"===t[0]&&"n"===t[1])R(e,t,void 0);else if("style"===t)M(e.dom,n,null);else if(D(e,t,r)&&"className"!==t&&"title"!==t&&("value"!==t||"option"!==e.tag&&("select"!==e.tag||-1!==e.dom.selectedIndex||e.dom!==p(e.dom)))&&("input"!==e.tag||"type"!==t))e.dom[t]=null;else{var i=t.indexOf(":");-1!==i&&(t=t.slice(i+1)),!1!==n&&e.dom.removeAttribute("className"===t?"class":t)}}(e,o,i,r);if(null!=n)for(var o in n)C(e,o,t&&t[o],n[o],r)}(S,x.attrs,S.attrs,_),O(S)||b(P,x.children,S.children,I,null,_)}else{var K=e,Z=t,q=n,X=i,J=o,Q=a;if(q.instance=r.normalize(u.call(q.state.view,q)),q.instance===q)throw Error("A view cannot return the vnode it received as argument");j(q.state,q,X),null!=q.attrs&&j(q.attrs,q,X),null!=q.instance?(null==Z.instance?h(K,q.instance,X,Q,J):y(K,Z.instance,q.instance,X,J,Q),q.dom=q.instance.dom,q.domSize=q.instance.domSize):null!=Z.instance?(L(K,Z.instance),q.dom=void 0,q.domSize=0):(q.dom=Z.dom,q.domSize=Z.domSize)}}else L(e,t),h(e,n,i,a,o)}var w=[];function E(e,t,n){for(;t<e.length;t++)if(null!=e[t]&&null!=e[t].dom)return e[t].dom;return n}function T(e,t,n){if(null!=t.dom){var r;if(null==t.domSize)r=t.dom;else for(var i of(r=s(e).createDocumentFragment(),a(t)))r.appendChild(i);k(e,r,n)}}function k(e,t,n){null!=n?e.insertBefore(t,n):e.appendChild(t)}function O(e){if(null==e.attrs||null==e.attrs.contenteditable&&null==e.attrs.contentEditable)return!1;var t=e.children;if(null!=t&&1===t.length&&"<"===t[0].tag){var n=t[0].children;e.dom.innerHTML!==n&&(e.dom.innerHTML=n)}else if(null!=t&&0!==t.length)throw Error("Child node of a contenteditable must be trusted.");return!0}function x(e,t,n,r){for(var i=n;i<r;i++){var o=t[i];null!=o&&L(e,o)}}function S(e,n,r,i){var l=n.state,s=u.call(r.onbeforeremove,n);if(null!=s){var c=t;for(var p of a(n))o.set(p,c);i.v++,Promise.resolve(s).finally(function(){d(n,l),I(e,n,i)})}}function I(e,t,n){0==--n.v&&(function e(t){if("string"!=typeof t.tag&&"function"==typeof t.state.onremove&&u.call(t.state.onremove,t),t.attrs&&"function"==typeof t.attrs.onremove&&u.call(t.attrs.onremove,t),"string"!=typeof t.tag)null!=t.instance&&e(t.instance);else{null!=t.events&&(t.events._=null);var n=t.children;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];null!=i&&e(i)}}}(t),A(e,t))}function L(e,t){var n={v:1};"string"!=typeof t.tag&&"function"==typeof t.state.onbeforeremove&&S(e,t,t.state,n),t.attrs&&"function"==typeof t.attrs.onbeforeremove&&S(e,t,t.attrs,n),I(e,t,n)}function A(e,t){if(null!=t.dom)if(null==t.domSize)e.removeChild(t.dom);else for(var n of a(t))e.removeChild(n)}function C(e,t,n,r,i){var o,a;if(!("key"===t||null==r||N(t))&&(n!==r||(o=e,"value"===(a=t)||"checked"===a||"selectedIndex"===a||"selected"===a&&(o.dom===p(o.dom)||"option"===o.tag&&o.dom.parentNode===p(o.dom)))||"object"==typeof r)){if("o"===t[0]&&"n"===t[1])return R(e,t,r);if("xlink:"===t.slice(0,6))e.dom.setAttributeNS("http://www.w3.org/1999/xlink",t.slice(6),r);else if("style"===t)M(e.dom,n,r);else if(D(e,t,i)){if("value"===t){if(("input"===e.tag||"textarea"===e.tag)&&e.dom.value===""+r||"select"===e.tag&&null!==n&&e.dom.value===""+r||"option"===e.tag&&null!==n&&e.dom.value===""+r)return;if("input"===e.tag&&"file"===e.attrs.type&&""+r!="")return void console.error("`value` is read-only on file inputs!")}"input"===e.tag&&"type"===t?e.dom.setAttribute(t,r):e.dom[t]=r}else"boolean"==typeof r?r?e.dom.setAttribute(t,""):e.dom.removeAttribute(t):e.dom.setAttribute("className"===t?"class":t,r)}}function N(e){return"oninit"===e||"oncreate"===e||"onupdate"===e||"onremove"===e||"onbeforeremove"===e||"onbeforeupdate"===e}function D(e,t,n){return void 0===n&&(e.tag.indexOf("-")>-1||e.is||"href"!==t&&"list"!==t&&"form"!==t&&"width"!==t&&"height"!==t)&&t in e.dom}function M(e,t,n){if(t===n);else if(null==n)e.style="";else if("object"!=typeof n)e.style=n;else if(null==t||"object"!=typeof t)for(var r in e.style="",n){var i=n[r];null!=i&&(r.includes("-")?e.style.setProperty(r,String(i)):e.style[r]=String(i))}else{for(var r in t)null!=t[r]&&null==n[r]&&(r.includes("-")?e.style.removeProperty(r):e.style[r]="");for(var r in n){var i=n[r];null!=i&&(i=String(i))!==String(t[r])&&(r.includes("-")?e.style.setProperty(r,i):e.style[r]=i)}}}function _(){this._=e}function R(t,n,r){null!=t.events?(t.events._=e,t.events[n]!==r&&(null!=r&&("function"==typeof r||"object"==typeof r)?(null==t.events[n]&&t.dom.addEventListener(n.slice(2),t.events,!1),t.events[n]=r):(null!=t.events[n]&&t.dom.removeEventListener(n.slice(2),t.events,!1),t.events[n]=void 0))):null!=r&&("function"==typeof r||"object"==typeof r)&&(t.events=new _,t.dom.addEventListener(n.slice(2),t.events,!1),t.events[n]=r)}function P(e,t,n){"function"==typeof e.oninit&&u.call(e.oninit,t),"function"==typeof e.oncreate&&n.push(u.bind(e.oncreate,t))}function j(e,t,n){"function"==typeof e.onupdate&&n.push(u.bind(e.onupdate,t))}return _.prototype=Object.create(null),_.prototype.handleEvent=function(e){var t,n=this["on"+e.type];"function"==typeof n?t=n.call(e.currentTarget,e):"function"==typeof n.handleEvent&&n.handleEvent(e);var r=this;null!=r._&&(!1!==e.redraw&&(0,r._)(),null!=t&&"function"==typeof t.then&&Promise.resolve(t).then(function(){null!=r._&&!1!==e.redraw&&(0,r._)()})),!1===t&&(e.preventDefault(),e.stopPropagation())},function(i,o,a){if(!i)throw TypeError("DOM element being rendered to does not exist.");if(null!=n&&i.contains(n))throw TypeError("Node is currently being rendered to and thus is locked.");var l=e,s=n,c=[],d=p(i),u=i.namespaceURI;n=i,e="function"==typeof a?a:void 0,t={};try{null==i.vnodes&&(i.textContent=""),o=r.normalizeChildren(Array.isArray(o)?o:[o]),b(i,i.vnodes,o,c,null,"http://www.w3.org/1999/xhtml"===u?void 0:u),i.vnodes=o,null!=d&&p(i)!==d&&"function"==typeof d.focus&&d.focus();for(var f=0;f<c.length;f++)c[f]()}finally{e=l,n=s}}}},4508:function(e,t,n){"use strict";var r=n(6660);e.exports=function(e){return null==e&&(e=""),r("<",void 0,void 0,e,void 0,void 0)}},6660:function(e){"use strict";function t(e,t,n,r,i,o){return{tag:e,key:t,attrs:n,children:r,text:i,dom:o,is:void 0,domSize:void 0,state:void 0,events:void 0,instance:void 0}}t.normalize=function(e){return Array.isArray(e)?t("[",void 0,void 0,t.normalizeChildren(e),void 0,void 0):null==e||"boolean"==typeof e?null:"object"==typeof e?e:t("#",void 0,void 0,String(e),void 0,void 0)},t.normalizeChildren=function(e){var n=[];if(e.length){for(var r=null!=e[0]&&null!=e[0].key,i=1;i<e.length;i++)if((null!=e[i]&&null!=e[i].key)!==r)throw TypeError(r&&(null==e[i]||"boolean"==typeof e[i])?"In fragments, vnodes must either all have keys or none have keys. You may wish to consider using an explicit keyed empty fragment, m.fragment({key: ...}), instead of a hole.":"In fragments, vnodes must either all have keys or none have keys.");for(var i=0;i<e.length;i++)n[i]=t.normalize(e[i])}return n},e.exports=t},9428:function(e,t,n){"use strict";var r=n(3502);e.exports=n(9370)("undefined"!=typeof window?window:null,r.redraw)},9370:function(e,t,n){"use strict";var r=n(422),i=n(2560);e.exports=function(e,t){function n(e){return new Promise(e)}function o(e,t){for(var n in e.headers)if(i.call(e.headers,n)&&n.toLowerCase()===t)return!0;return!1}return n.prototype=Promise.prototype,n.__proto__=Promise,{request:function(a,l){"string"!=typeof a?(l=a,a=a.url):null==l&&(l={});var s,c,d=(s=a,c=l,new Promise(function(t,n){s=r(s,c.params);var a,l=null!=c.method?c.method.toUpperCase():"GET",d=c.body,u=(null==c.serialize||c.serialize===JSON.serialize)&&!(d instanceof e.FormData||d instanceof e.URLSearchParams),p=c.responseType||("function"==typeof c.extract?"":"json"),f=new e.XMLHttpRequest,h=!1,g=!1,v=f,b=f.abort;for(var y in f.abort=function(){h=!0,b.call(this)},f.open(l,s,!1!==c.async,"string"==typeof c.user?c.user:void 0,"string"==typeof c.password?c.password:void 0),u&&null!=d&&!o(c,"content-type")&&f.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof c.deserialize||o(c,"accept")||f.setRequestHeader("Accept","application/json, text/*"),c.withCredentials&&(f.withCredentials=c.withCredentials),c.timeout&&(f.timeout=c.timeout),f.responseType=p,c.headers)i.call(c.headers,y)&&f.setRequestHeader(y,c.headers[y]);f.onreadystatechange=function(e){if(!h&&4===e.target.readyState)try{var r,i=e.target.status>=200&&e.target.status<300||304===e.target.status||/^file:\/\//i.test(s),o=e.target.response;if("json"===p){if(!e.target.responseType&&"function"!=typeof c.extract)try{o=JSON.parse(e.target.responseText)}catch(e){o=null}}else p&&"text"!==p||null!=o||(o=e.target.responseText);if("function"==typeof c.extract?(o=c.extract(e.target,c),i=!0):"function"==typeof c.deserialize&&(o=c.deserialize(o)),i){if("function"==typeof c.type)if(Array.isArray(o))for(var a=0;a<o.length;a++)o[a]=new c.type(o[a]);else o=new c.type(o);t(o)}else{var l=function(){try{r=e.target.responseText}catch(e){r=o}var t=Error(r);t.code=e.target.status,t.response=o,n(t)};0===f.status?setTimeout(function(){g||l()}):l()}}catch(e){n(e)}},f.ontimeout=function(e){g=!0;var t=Error("Request timed out");t.code=e.target.status,n(t)},"function"==typeof c.config&&(f=c.config(f,c,s)||f)!==v&&(a=f.abort,f.abort=function(){h=!0,a.call(this)}),null==d?f.send():"function"==typeof c.serialize?f.send(c.serialize(d)):d instanceof e.FormData||d instanceof e.URLSearchParams?f.send(d):f.send(JSON.stringify(d))}));if(!0===l.background)return d;var u=0;function p(){0==--u&&"function"==typeof t&&t()}return function e(t){var r=t.then;return t.constructor=n,t.then=function(){u++;var n=r.apply(t,arguments);return n.then(p,function(e){if(p(),0===u)throw e}),e(n)},t}(d)}}}},224:function(e,t,n){"use strict";var r=n(3502);e.exports=n(3745)("undefined"!=typeof window?window:null,r)},8470:function(e,t,n){"use strict";var r=n(2560),i=RegExp("^(?:key|oninit|oncreate|onbeforeupdate|onupdate|onbeforeremove|onremove)$");e.exports=function(e,t){var n={};if(null!=t)for(var o in e)r.call(e,o)&&!i.test(o)&&0>t.indexOf(o)&&(n[o]=e[o]);else for(var o in e)r.call(e,o)&&!i.test(o)&&(n[o]=e[o]);return n}},2560:function(e){"use strict";e.exports=({}).hasOwnProperty},7626:function(e,t){t.plural_EN=function(e){return 1!==e?"p":"s"}},5853:function(e,t,n){"use strict";e.exports={}},3884:function(e,t,n){"use strict";e.exports={}},8706:function(e,t,n){"use strict";e.exports={}},752:function(e,t,n){"use strict";e.exports={}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.k=e=>""+e+".css",n.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.rv=()=>"1.5.8",n.g.importScripts&&(r=n.g.location+"");var r,i=n.g.document;if(!r&&i&&(i.currentScript&&"SCRIPT"===i.currentScript.tagName.toUpperCase()&&(r=i.currentScript.src),!r)){var o=i.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&(!r||!/^http(s?):/.test(r));)r=o[a--].src}if(!r)throw Error("Automatic publicPath is not supported in this browser");n.p=r=r.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.ruid="bundler=rspack@1.5.8",(()=>{"use strict";var e,t,r,i,o,a,l,s,c=n(3201),d=n.n(c);n(5853),n(8706),n(3884),n(752);var u=((e={}).HOME="HOME",e.ABOUT="ABOUT",e.DEFINE_BOX="DEFINE_BOX",e.CREATE_SCENARIO="CREATE_SCENARIO",e.SHOW_SCENARIO="SHOW_SCENARIO",e.DECISION_SUPPORT="DECISION_SUPPORT",e.SETTINGS="SETTINGS",e.HELP="HELP",e);function p(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)0>t.indexOf(r[i])&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}"function"==typeof SuppressedError&&SuppressedError;let f=()=>"idxxxxxxxx".replace(/[x]/g,()=>(16*Math.random()|0).toString(16)),h=(e,t=2,n="0")=>String(e).padStart(t,n),g={view:({attrs:e})=>d()("span.mandatory",Object.assign({},e),"*")},v=()=>({view:e=>{var t=e.attrs,{label:n,id:r,isMandatory:i,isActive:o,className:a,initialValue:l}=t,s=p(t,["label","id","isMandatory","isActive","className","initialValue"]);return n?d()("label",Object.assign(Object.assign({},s),{className:[a,o?"active":""].filter(Boolean).join(" ").trim()||void 0,for:r,oncreate:({dom:e})=>{l&&e.classList.add("active")}}),[d().trust(n),i?d()(g):void 0]):void 0}}),b=()=>({view:({attrs:{helperText:e,dataError:t,dataSuccess:n,className:r}})=>e||t||n?d()("span.helper-text.left",{className:r,"data-error":t,"data-success":n},t?d().trust(t):n?d().trust(n):e?d().trust(e):""):void 0}),y=()=>{let e={id:f(),isActive:!1,internalValue:"",isOpen:!1,suggestions:[],selectedIndex:-1,inputElement:null},t=e=>"value"in e&&void 0!==e.value&&"function"==typeof e.oninput,n=(n,r)=>{t(r)||(e.internalValue=n.key),e.isOpen=!1,e.selectedIndex=-1,r.oninput&&r.oninput(n.key),r.onchange&&r.onchange(n.key),r.onAutocomplete&&r.onAutocomplete(n.key)},r=t=>{let n=t.target,r=n.closest(".autocomplete-wrapper"),i=n.closest(".autocomplete-content");r||i||(e.isOpen=!1,e.selectedIndex=-1),d().redraw()};return{oninit:({attrs:n})=>{t(n)||(e.internalValue=n.defaultValue||""),document.addEventListener("click",r)},onremove:()=>{document.removeEventListener("click",r)},view:({attrs:r})=>{let i=r.id||e.id,{label:o,helperText:a,onchange:l,newRow:s,className:c="col s12",style:u,iconName:f,isMandatory:h,data:g={},limit:y=1/0,minLength:w=1}=r,E=p(r,["label","helperText","onchange","newRow","className","style","iconName","isMandatory","data","limit","minLength"]),T=t(r),k=T?r.value||"":e.internalValue;e.suggestions=!k||k.length<w?[]:Object.entries(g||{}).filter(([e])=>e.toLowerCase().includes(k.toLowerCase())).map(([e,t])=>({key:e,value:t})).slice(0,y);let O=k.length>=w&&Object.keys(g).some(e=>e.toLowerCase()===k.toLowerCase());e.isOpen=e.suggestions.length>0&&k.length>=w&&!O;let x=RegExp(`(${k})`,"i");return d()(".input-field.autocomplete-wrapper",{className:s?c+" clear":c,style:u},[f?d()("i.material-icons.prefix",f):"",d()("input",Object.assign(Object.assign({},E),{className:"autocomplete",type:"text",tabindex:0,id:i,value:k,oncreate:t=>{e.inputElement=t.dom,!T&&r.defaultValue&&(t.dom.value=r.defaultValue)},oninput:t=>{let n=t.target.value;e.selectedIndex=-1,T||(e.internalValue=n),r.oninput&&r.oninput(n),l&&l(n)},onkeydown:t=>{if(e.isOpen)switch(t.key){case"ArrowDown":t.preventDefault(),e.selectedIndex=Math.min(e.selectedIndex+1,e.suggestions.length-1);break;case"ArrowUp":t.preventDefault(),e.selectedIndex=Math.max(e.selectedIndex-1,-1);break;case"Enter":t.preventDefault(),e.selectedIndex>=0&&e.suggestions[e.selectedIndex]&&(e.isOpen=!1,n(e.suggestions[e.selectedIndex],r));break;case"Escape":t.preventDefault(),e.isOpen=!1,e.selectedIndex=-1}r.onkeydown&&r.onkeydown(t,k)},onfocus:()=>{if(e.isActive=!0,k.length>=w){let t=Object.keys(g).some(e=>e.toLowerCase()===k.toLowerCase());e.isOpen=e.suggestions.length>0&&!t}},onblur:t=>{e.isActive=!1,t.relatedTarget&&t.relatedTarget.closest(".autocomplete-content")||(e.isOpen=!1,e.selectedIndex=-1)}})),e.isOpen&&d()("ul.autocomplete-content.dropdown-content",{style:(()=>{if(!e.inputElement)return{display:"block",width:"100%",height:`${50*e.suggestions.length}px`,transformOrigin:"0px 0px",opacity:+!!e.isOpen,transform:"scaleX(1) scaleY(1)"};let t=e.inputElement.getBoundingClientRect().width;return{display:"block",width:`${t}px`,height:`${50*e.suggestions.length}px`,transformOrigin:"0px 0px",opacity:+!!e.isOpen,transform:"scaleX(1) scaleY(1)",position:"absolute",top:"100%",left:"0",zIndex:1e3}})()},e.suggestions.map((t,i)=>d()("li",{key:t.key,class:e.selectedIndex===i?"active":"",onclick:e=>{e.preventDefault(),e.stopPropagation(),n(t,r)},onmouseover:()=>{e.selectedIndex=i}},[t.value&&t.value.includes("http")?d()("img",{src:t.value,class:"right circle",onerror:e=>{e.target.style.display="none"}}):t.value&&t.value.startsWith("icon:")?d()("i.material-icons",{style:{fontSize:"24px",color:"var(--md-grey-600)"}},t.value.replace("icon:","")):null,d()("span",t.key?d().trust(t.key.replace(x,e=>`<span class="highlight">${e}</span>`)):"")]))),d()(v,{label:o,id:i,isMandatory:h,isActive:e.isActive||k.length>0||!!r.placeholder||!!r.value}),d()(b,{helperText:a})])}}},w=()=>({view:e=>{var t=e.attrs,{iconName:n}=t,r=p(t,["iconName"]);return d()("i.material-icons",r,n)}});class E{static offset(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}static createRipple(e,t){if(2===e.button)return;let n=document.createElement("div");n.className="waves-ripple";let r=this.offset(t),i=e.pageY-r.top,o=e.pageX-r.left,a=t.clientWidth/100*10;n.style.cssText=`
      top: ${i}px;
      left: ${o}px;
      transform: scale(0);
      opacity: 1;
    `,t.appendChild(n),n.offsetHeight,n.style.transform=`scale(${a})`,n.style.opacity="1",n.setAttribute("data-created",Date.now().toString())}static removeRipples(e){e.querySelectorAll(".waves-ripple").forEach(e=>{let t=parseInt(e.getAttribute("data-created")||"0"),n=Date.now()-t,r=()=>{e.style.opacity="0",setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},this.duration)};n>=350?r():setTimeout(r,350-n)})}}E.duration=750,E.onMouseDown=e=>{let t=e.currentTarget;t&&t.classList.contains("waves-effect")&&E.createRipple(e,t)},E.onMouseUp=e=>{let t=e.currentTarget;t&&t.classList.contains("waves-effect")&&E.removeRipples(t)},E.onMouseLeave=e=>{let t=e.currentTarget;t&&t.classList.contains("waves-effect")&&E.removeRipples(t)},E.onTouchStart=e=>{let t=e.currentTarget;t&&t.classList.contains("waves-effect")&&E.createRipple(e,t)},E.onTouchEnd=e=>{let t=e.currentTarget;t&&t.classList.contains("waves-effect")&&E.removeRipples(t)};let T=(e,t,n="")=>()=>({view:({attrs:r})=>{let{tooltip:i,tooltipPosition:o,tooltipPostion:a,iconName:l,iconClass:s,label:c,className:u,variant:f}=r,h=p(r,["tooltip","tooltipPosition","tooltipPostion","iconName","iconClass","label","className","variant"]),g=[i?"tooltipped":"",t,u].filter(Boolean).join(" ").trim(),v=g.includes("waves-effect")?{onmousedown:E.onMouseDown,onmouseup:E.onMouseUp,onmouseleave:E.onMouseLeave,ontouchstart:E.onTouchStart,ontouchend:E.onTouchEnd}:{};return d()(e,Object.assign(Object.assign(Object.assign({},h),v),{className:g,"data-position":i?o||a||"top":void 0,"data-tooltip":i||void 0,type:f||n||"button"}),l?d()(w,{iconName:l,className:s||"left"}):void 0,c||void 0)}}),k=T("a","waves-effect waves-light btn","button");T("a","waves-effect waves-light btn-large","button"),T("a","waves-effect waves-light btn-small","button");let O=T("a","waves-effect waves-teal btn-flat","button"),x=T("button","btn-flat btn-icon waves-effect waves-teal","button"),S=T("button","btn-floating btn-large waves-effect waves-light","button");T("button","btn waves-effect waves-light","submit");let I={caret:["M7 10l5 5 5-5z","M0 0h24v24H0z"],close:["M18.3 5.71a1 1 0 0 0-1.41 0L12 10.59 7.11 5.7A1 1 0 0 0 5.7 7.11L10.59 12l-4.89 4.89a1 1 0 1 0 1.41 1.41L12 13.41l4.89 4.89a1 1 0 0 0 1.41-1.41L13.41 12l4.89-4.89a1 1 0 0 0 0-1.4z","M0 0h24v24H0z"],chevron:["M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z","M0 0h24v24H0z"],chevron_left:["M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z","M0 0h24v24H0z"],chevron_right:["M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z","M0 0h24v24H0z"],menu:["M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z","M0 0h24v24H0z"],expand:["M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z","M0 0h24v24H0z"],collapse:["M19 13H5v-2h14v2z","M0 0h24v24H0z"],check:["M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z","M0 0h24v24H0z"],radio_checked:["M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z","M0 0h24v24H0z"],radio_unchecked:["M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z","M0 0h24v24H0z"],light_mode:["M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.4 12.4a.996.996 0 0 0-1.41 0 .996.996 0 0 0 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0a.996.996 0 0 0 0-1.41zm1.06-11a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.4a.996.996 0 0 0 0-1.41.996.996 0 0 0-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z","M0 0h24v24H0z"],dark_mode:["M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.39 5.39 0 0 1-4.4 2.26 5.4 5.4 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z","M0 0h24v24H0z"]},L=()=>({view:({attrs:e})=>{var t;let{name:n,direction:r="down",style:i}=e,o=p(e,["name","direction","style"]),a=null!=(t=({down:0,up:180,left:90,right:-90})[r])?t:0,l=a?`rotate(${a}deg)`:void 0;return d()("svg",Object.assign(Object.assign({},o),{style:Object.assign({transform:l},i),height:"24px",width:"24px",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}),I[n].map(e=>d()("path",{d:e,fill:e.includes("M0 0h24v24H0z")?"none":"currentColor"})))}}),A=()=>{let e={chipsData:[],selectedChip:null,focused:!1,inputValue:"",inputId:f(),autocompleteItems:[],selectedAutocompleteIndex:-1,showAutocomplete:!1},t=null,n=()=>{var n;if(!(null==(n=null==t?void 0:t.attrs.autocompleteOptions)?void 0:n.data)){e.autocompleteItems=[];return}let{data:r,minLength:i=1}=t.attrs.autocompleteOptions,o=e.inputValue.toLowerCase();if(o.length<i){e.autocompleteItems=[],e.showAutocomplete=!1;return}let a=(Array.isArray(r)?r.map(e=>"string"==typeof e?{tag:e}:e):Object.entries(r).map(([e,t])=>({tag:e,value:t||e}))).filter(e=>e.tag.toLowerCase().includes(o)),l=t.attrs.autocompleteOptions.limit||1/0;e.autocompleteItems=a.slice(0,l),e.showAutocomplete=e.autocompleteItems.length>0,e.selectedAutocompleteIndex=-1},r=t=>{i({tag:t.tag,image:t.image,alt:t.alt}),e.inputValue="",e.showAutocomplete=!1,e.selectedAutocompleteIndex=-1},i=n=>{var r;if(!t)return;let{limit:i=1/0,onChipAdd:o,onchange:a}=t.attrs;r=e.chipsData,n.tag&&""!==n.tag.trim()&&!r.some(e=>e.tag===n.tag)&&!(e.chipsData.length>=i)&&(e.chipsData=[...e.chipsData,n],e.inputValue="",o&&o(n),a&&a(e.chipsData))},o=n=>{if(!t)return;let{onChipDelete:r,onchange:i}=t.attrs,o=e.chipsData[n];e.chipsData=e.chipsData.filter((e,t)=>t!==n),e.selectedChip=null,r&&r(o),i&&i(e.chipsData)},a=n=>{if(!t)return;let{onChipSelect:r}=t.attrs;e.selectedChip=n,r&&e.chipsData[n]&&r(e.chipsData[n])},l=n=>{let l=n.target;if(e.showAutocomplete){if("ArrowDown"===n.key){n.preventDefault(),e.selectedAutocompleteIndex=Math.min(e.selectedAutocompleteIndex+1,e.autocompleteItems.length-1);let r=null==t?void 0:t.dom.querySelector(".autocomplete-item.selected");r&&r.scrollIntoView({block:"nearest"});return}if("ArrowUp"===n.key){n.preventDefault(),e.selectedAutocompleteIndex=Math.max(e.selectedAutocompleteIndex-1,-1);let r=null==t?void 0:t.dom.querySelector(".autocomplete-item.selected");r&&r.scrollIntoView({block:"nearest"});return}if("Enter"===n.key&&e.selectedAutocompleteIndex>=0){n.preventDefault(),r(e.autocompleteItems[e.selectedAutocompleteIndex]);return}}"Enter"===n.key&&l.value.trim()?(n.preventDefault(),i({tag:l.value.trim()})):"Backspace"===n.key&&!l.value&&e.chipsData.length>0?(n.preventDefault(),o(e.chipsData.length-1)):"ArrowLeft"===n.key&&!l.value&&e.chipsData.length&&(n.preventDefault(),a(e.chipsData.length-1))};return{oninit:({attrs:t})=>{e.chipsData=t.data||[]},oncreate:e=>{t=e},onremove:()=>{t=null},view:({attrs:i})=>{let{id:s,required:c,isMandatory:u=c,className:p="col s12",label:f,helperText:h,placeholder:g,secondaryPlaceholder:y}=i;return d()(".input-field",{id:s,className:p},[d()(".chips.chips-initial",{class:`chips-container${e.focused?" focused":""}${g?" chips-placeholder":""}`},[e.chipsData.map((n,r)=>d()(".chip",{key:`${n.tag}-${r}`,tabindex:0,class:e.selectedChip===r?"selected":void 0,onkeydown:n=>((n,r)=>{if("Backspace"===n.key||"Delete"===n.key){n.preventDefault(),o(r);let t=Math.max(r-1,0);e.chipsData.length&&a(t)}else if("ArrowLeft"===n.key&&r>0)a(r-1);else if("ArrowRight"===n.key)if(r<e.chipsData.length-1)a(r+1);else{let e=null==t?void 0:t.dom.querySelector(".chips-input");e&&e.focus()}})(n,r)},[n.image&&d()("img",{src:n.image,alt:n.alt||n.tag}),n.tag,d()(L,{name:"close",className:"close",onclick:e=>{e.stopPropagation(),o(r)}})])),d()("input[type=text].chips-input.input.browser-default",{id:e.inputId,title:"label",value:e.inputValue,placeholder:!e.chipsData.length&&g?g:e.chipsData.length&&y?y:"",oninput:t=>{e.inputValue=t.target.value,n()},onfocus:()=>{e.focused=!0,e.selectedChip=null,n()},onblur:()=>{e.focused=!1,setTimeout(()=>{e.showAutocomplete=!1,e.selectedChip=null},150)},onkeydown:l}),e.showAutocomplete&&d()("ul.autocomplete-content.dropdown-content",{style:{display:"block",opacity:1,transform:"scaleX(1) scaleY(1)",position:"absolute",width:"100%",left:0,top:"100%",maxHeight:"200px",overflow:"auto",zIndex:1e3,backgroundColor:"var(--mm-surface-color, #fff)",boxShadow:"0 2px 2px 0 var(--mm-shadow-penumbra, rgba(0,0,0,0.14)), 0 3px 1px -2px var(--mm-shadow-umbra, rgba(0,0,0,0.12)), 0 1px 5px 0 var(--mm-shadow-ambient, rgba(0,0,0,0.2))"}},e.autocompleteItems.map((t,n)=>d()("li.autocomplete-item",{key:t.tag,class:e.selectedAutocompleteIndex===n?"selected":"",style:{padding:"12px 16px",cursor:"pointer",backgroundColor:e.selectedAutocompleteIndex===n?"var(--mm-border-color, #eee)":"transparent",color:"var(--mm-text-primary, inherit)"},onmousedown:e=>{e.preventDefault(),r(t)},onmouseover:()=>{e.selectedAutocompleteIndex=n}},[t.image&&d()("img.autocomplete-item-image",{src:t.image,alt:t.alt||t.tag,style:{width:"24px",height:"24px",marginRight:"8px",verticalAlign:"middle"}}),d()("span.autocomplete-item-text",t.tag)])))]),f&&d()(v,{label:f,id:e.inputId,isMandatory:u,isActive:!!e.focused||!!e.chipsData.length||!!g}),h&&d()(b,{helperText:h})])}}},C=()=>({view:({attrs:{header:e,body:t,iconName:n,isActive:r,onToggle:i}})=>d()("li",{className:r?"active":""},[e||n?d()(".collapsible-header",{onclick:i},[n?d()("i.material-icons",n):void 0,e?"string"==typeof e?d()("span",e):e:void 0]):void 0,d()(".collapsible-body",{style:{display:r?"block":"none",transition:"display 0.3s ease"}},[d()(".collapsible-body-content",{style:{padding:"2rem"}},t?"string"==typeof t?d()("div",{innerHTML:t}):t:void 0)])])}),N=()=>{let e={activeItems:new Set};return{oninit:({attrs:t})=>{t.items.forEach((t,n)=>{t.active&&e.activeItems.add(n)})},view:({attrs:t})=>{let{items:n,accordion:r=!0,class:i,className:o,style:a,id:l}=t;return n&&n.length>0?d()("ul.collapsible",{class:i||o,style:Object.assign({border:"1px solid #ddd",borderRadius:"2px",margin:"0.5rem 0 1rem 0"},a),id:l},n.map((t,n)=>d()(C,Object.assign(Object.assign({},t),{key:n,isActive:e.activeItems.has(n),onToggle:()=>{r?e.activeItems.has(n)?e.activeItems.clear():(e.activeItems.clear(),e.activeItems.add(n)):e.activeItems.has(n)?e.activeItems.delete(n):e.activeItems.add(n)}})))):void 0}}};(t=a||(a={}))[t.BASIC=0]="BASIC",t[t.LINKS=1]="LINKS",t[t.AVATAR=2]="AVATAR";let D={cancel:"Cancel",clear:"Clear",done:"Ok",previousMonth:"‹",nextMonth:"›",months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],weekdaysAbbrev:["S","M","T","W","T","F","S"]},M=e=>/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime()),_=e=>{let t=e.getDay();return 0===t||6===t},R=e=>{M(e)&&e.setHours(0,0,0,0)},P=(e,t)=>[31,j(e)?29:28,31,30,31,30,31,31,30,31,30,31][t],j=e=>e%4==0&&e%100!=0||e%400==0,H=(e,t)=>e.getTime()===t.getTime(),V=(e,t,n)=>"iso"===t?$(e):B(e,n),$=e=>{let t=new Date(e.getTime()),n=(e.getDay()+6)%7;t.setDate(t.getDate()-n+3);let r=new Date(t.getFullYear(),0,4),i=(r.getDay()+6)%7;return r.setDate(r.getDate()-i+3),Math.ceil((t.getTime()-r.getTime())/6048e5)+1},B=(e,t)=>{let n=new Date(e.getFullYear(),0,1),r=n.getDay(),i=(t-r+7)%7;0===i&&r!==t&&(i=7);let o=new Date(n.getTime());return(o.setDate(1+i),e<o)?B(new Date(e.getFullYear()-1,11,31),t):Math.floor(Math.floor((e.getTime()-o.getTime())/864e5)/7)+1},U=()=>{let e,t=e=>{let t=10;if(e.yearrange){let n=e.yearrange.split(",");2===n.length&&(t=[parseInt(n[0],10),parseInt(n[1],10)])}else e.yearRange&&(t=e.yearRange);let n="mmm dd, yyyy";e.format?n=e.format:e.displayFormat&&(n=e.displayFormat);let r=Object.assign({autoClose:!1,format:n,parse:null,defaultDate:null,setDefaultDate:!1,disableWeekends:!1,disableDayFn:null,firstDay:0,minDate:null,maxDate:null,yearRange:t,showClearBtn:!1,showWeekNumbers:!1,weekNumbering:"iso",i18n:D,onSelect:null,onOpen:null,onClose:null},e);return r.i18n=Object.assign(Object.assign({},D),e.i18n),r},n=(t,n)=>{if(!t||!M(t))return"";let r=n;return r.replace(/(dddd|ddd|dd|d|mmmm|mmm|mm|m|yyyy|yy)/g,t=>e.formats[t]?String(e.formats[t]()):t)},r=(e,t,n)=>{if(!e||!M(e))return"";let r=t,i={d:()=>e.getDate(),dd:()=>{let t=e.getDate();return(t<10?"0":"")+t},ddd:()=>n.i18n.weekdaysShort[e.getDay()],dddd:()=>n.i18n.weekdays[e.getDay()],m:()=>e.getMonth()+1,mm:()=>{let t=e.getMonth()+1;return(t<10?"0":"")+t},mmm:()=>n.i18n.monthsShort[e.getMonth()],mmmm:()=>n.i18n.months[e.getMonth()],yy:()=>(""+e.getFullYear()).slice(2),yyyy:()=>e.getFullYear()};return r.replace(/(dddd|ddd|dd|d|mmmm|mmm|mm|m|yyyy|yy)/g,e=>i[e]?String(i[e]()):e)},i=(t,n=!1,r)=>{if(!t){e.date=null;return}if("string"==typeof t&&(t=new Date(Date.parse(t))),!M(t))return;let i=r.minDate,a=r.maxDate;M(i)&&t<i?t=i:M(a)&&t>a&&(t=a),e.date=new Date(t.getTime()),R(e.date),o(e.date),!n&&r.onSelect&&r.onSelect(e.date)},o=t=>{M(t)&&(e.calendars=[{month:t.getMonth(),year:t.getFullYear()}])},a=()=>{e.calendars[0]=l(e.calendars[0])},l=e=>(e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e),s=()=>({view:({attrs:t})=>{let{opts:n,options:r}=t,o=[],a="false";if(n.isEmpty)if(!n.showDaysInNextAndPreviousMonths)return d()("td.is-empty");else o.push("is-outside-current-month"),o.push("is-selection-disabled");return n.isDisabled&&o.push("is-disabled"),n.isToday&&o.push("is-today"),n.isSelected&&(o.push("is-selected"),a="true"),n.isRangeStart&&(o.push("is-range-start"),a="true"),n.isRangeEnd&&(o.push("is-range-end"),a="true"),n.isInRange&&o.push("is-in-range"),n.isRangePreview&&o.push("is-range-preview"),n.hasEvent&&o.push("has-event"),d()("td",{"data-day":n.day,class:o.join(" "),"aria-selected":a},[d()("button.datepicker-day-button",{type:"button","data-year":n.year,"data-month":n.month,"data-day":n.day,onclick:t=>{let o=t.target;if(!n.isDisabled){let t=new Date(parseInt(o.getAttribute("data-year")||"0",10),parseInt(o.getAttribute("data-month")||"0",10),parseInt(o.getAttribute("data-day")||"0",10));r.dateRange?((t,n)=>{if(R(t),!e.startDate||e.startDate&&e.endDate)e.startDate=new Date(t.getTime()),e.endDate=null,e.selectionMode="end",e.isSelectingRange=!0;else if(e.startDate&&!e.endDate){if(t<e.startDate?(e.endDate=new Date(e.startDate.getTime()),e.startDate=new Date(t.getTime())):e.endDate=new Date(t.getTime()),n.minDateRange||n.maxDateRange){let r=Math.ceil((e.endDate.getTime()-e.startDate.getTime())/864e5);if(n.minDateRange&&r<n.minDateRange||n.maxDateRange&&r>n.maxDateRange){e.startDate=new Date(t.getTime()),e.endDate=null,e.selectionMode="end";return}}e.selectionMode=null,e.isSelectingRange=!1,n.onSelect&&n.onSelect(e.startDate,e.endDate),n.autoClose&&(e.isOpen=!1)}})(t,r):(i(t,!1,r),r.autoClose&&(e.isOpen=!1))}}},n.day)])}}),c=()=>({view:({attrs:t})=>{let{year:n,month:r,options:i,randId:o}=t,a=new Date,l=P(n,r),c=new Date(n,r,1).getDay(),u=[],p=[];R(a),i.firstDay>0&&(c-=i.firstDay)<0&&(c+=7);let f=0===r?11:r-1,h=11===r?0:r+1,g=0===r?n-1:n,v=11===r?n+1:n,b=P(g,f),y=l+c,w=y;for(;w>7;)w-=7;y+=7-w;for(let t=0,o=0;t<y;t++){let y=new Date(n,r,1+(t-c)),w=!!M(e.date)&&H(y,e.date),E=H(y,a),T=t<c||t>=l+c,k=1+(t-c),O=r,x=n;T&&(t<c?(k=b+k,O=f,x=g):(k-=l,O=h,x=v));let S=i.minDate&&y<i.minDate||i.maxDate&&y>i.maxDate||i.disableWeekends&&_(y)||i.disableDayFn&&i.disableDayFn(y),I=!1,L=!1,A=!1;i.dateRange&&(e.startDate&&H(y,e.startDate)&&(I=!0),e.endDate&&H(y,e.endDate)&&(L=!0),e.startDate&&e.endDate&&y>e.startDate&&y<e.endDate&&(A=!0));let C={day:k,month:O,year:x,hasEvent:!1,isSelected:!i.dateRange&&w,isToday:E,isDisabled:S,isEmpty:T,showDaysInNextAndPreviousMonths:!1,isRangeStart:I,isRangeEnd:L,isInRange:A,isRangePreview:!1};if(0===o&&i.showWeekNumbers){let e=V(new Date(x,O,k),i.weekNumbering,i.firstDay);p.push(d()("td.datepicker-week-number",{title:`Week ${e}`},e))}p.push(d()(s,{opts:C,options:i})),7==++o&&(u.push(d()("tr.datepicker-row",p)),p=[],o=0)}let E=[];i.showWeekNumbers&&E.push(d()("th.datepicker-week-header",{scope:"col",title:"Week"},"Wk"));for(let e=0;e<7;e++){let t=e+i.firstDay;for(;t>=7;)t-=7;E.push(d()("th",{scope:"col"},[d()("abbr",{title:i.i18n.weekdays[t]},i.i18n.weekdaysAbbrev[t])]))}return d()(".datepicker-table-wrapper",[d()("table.datepicker-table",{cellpadding:"0",cellspacing:"0",role:"grid","aria-labelledby":o||"datepicker-controls",class:i.showWeekNumbers?"with-week-numbers":""},[d()("thead",[d()("tr",E)]),d()("tbody",u)])])}}),u=()=>({view:({attrs:t})=>{let{options:n}=t;if(n.dateRange){let t=e.startDate,r=e.endDate;if(t&&r){let e=n.i18n.weekdaysShort[t.getDay()],i=n.i18n.monthsShort[t.getMonth()],o=n.i18n.weekdaysShort[r.getDay()],a=n.i18n.monthsShort[r.getMonth()];return d()(".datepicker-date-display.range-display",[d()("span.year-text",t.getFullYear()),d()("span.date-text",[d()("span.start-date",`${e}, ${i} ${t.getDate()}`),d()("span.range-separator"," - "),d()("span.end-date",`${o}, ${a} ${r.getDate()}`)])])}if(t){let e=n.i18n.weekdaysShort[t.getDay()],r=n.i18n.monthsShort[t.getMonth()];return d()(".datepicker-date-display.range-display",[d()("span.year-text",t.getFullYear()),d()("span.date-text",[d()("span.start-date",`${e}, ${r} ${t.getDate()}`),d()("span.range-separator"," - "),d()("span.end-date.placeholder","Select end date")])])}{let e=new Date;return d()(".datepicker-date-display.range-display",[d()("span.year-text",e.getFullYear()),d()("span.date-text.placeholder","Select date range")])}}{let t=M(e.date)?e.date:new Date,r=n.i18n.weekdaysShort[t.getDay()],i=n.i18n.monthsShort[t.getMonth()],o=t.getDate();return d()(".datepicker-date-display",[d()("span.year-text",t.getFullYear()),d()("span.date-text",`${r}, ${i} ${o}`)])}}}),p=()=>({view:({attrs:t})=>{let n,r,i,{options:o,randId:l}=t,s=e.calendars[0],c=s.year,u=s.month;return Array.isArray(o.yearRange)?(n=o.yearRange[0],r=o.yearRange[1]):(n=c-o.yearRange,r=c+o.yearRange),d()(".datepicker-controls",{id:l,role:"heading","aria-live":"assertive"},[d()("button.month-prev",{type:"button",onclick:t=>{t.preventDefault(),e.calendars[0].month--,a()}},d()("svg",{fill:"#000000",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[d()("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),d()("path",{d:"M0-.5h24v24H0z",fill:"none"})])),d()(".selects-container",[d()(".select-wrapper.select-month",[d()("input.select-dropdown.dropdown-trigger",{type:"text",readonly:!0,value:o.i18n.months[u],onclick:t=>{t.preventDefault(),e.monthDropdownOpen=!e.monthDropdownOpen,e.yearDropdownOpen=!1}}),e.monthDropdownOpen&&d()(".dropdown-content",o.i18n.months.map((t,n)=>d()(".dropdown-item",{key:n,class:n===u?"selected":"",onclick:t=>{t.stopPropagation(),h(n),e.monthDropdownOpen=!1}},t)))]),d()(".select-wrapper.select-year",[d()("input.select-dropdown.dropdown-trigger",{type:"text",readonly:!0,value:c.toString(),onclick:t=>{t.preventDefault(),e.yearDropdownOpen=!e.yearDropdownOpen,e.monthDropdownOpen=!1}}),e.yearDropdownOpen&&d()(".dropdown-content",Array.from({length:r-(i=n)+1},(e,t)=>i+t).map(t=>d()(".dropdown-item",{key:t,class:t===c?"selected":"",onclick:n=>{n.stopPropagation(),g(t),e.yearDropdownOpen=!1}},t)))])]),d()("button.month-next",{type:"button",onclick:t=>{t.preventDefault(),e.calendars[0].month++,a()}},d()("svg",{fill:"#000000",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},[d()("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),d()("path",{d:"M0-.25h24v24H0z",fill:"none"})]))])}}),h=t=>{if(!isNaN(t)&&(e.calendars[0].month=t,a(),e.date&&M(e.date))){let n=e.date.getDate(),r=e.calendars[0].year,i=Math.min(n,P(r,t)),o=new Date(r,t,i);e.date=o,R(e.date)}},g=t=>{if(!isNaN(t)&&(e.calendars[0].year=t,a(),e.date&&M(e.date))){let n=e.date.getMonth(),r=Math.min(e.date.getDate(),P(t,n)),i=new Date(t,n,r);e.date=i,R(e.date)}},v=t=>{let n=t.target;n.closest(".select-wrapper")||n.closest(".dropdown-content")||(e.monthDropdownOpen=!1,e.yearDropdownOpen=!1),d().redraw()};return{oninit:n=>{let r=n.attrs,a=t(r);if(e={id:f(),isOpen:!1,date:null,startDate:null,endDate:null,selectionMode:null,isSelectingRange:!1,calendars:[{month:0,year:0}],monthDropdownOpen:!1,yearDropdownOpen:!1,formats:{d:()=>{var t;return(null==(t=e.date)?void 0:t.getDate())||0},dd:()=>{var t;let n=(null==(t=e.date)?void 0:t.getDate())||0;return(n<10?"0":"")+n},ddd:()=>{var t;return a.i18n.weekdaysShort[(null==(t=e.date)?void 0:t.getDay())||0]},dddd:()=>{var t;return a.i18n.weekdays[(null==(t=e.date)?void 0:t.getDay())||0]},m:()=>{var t;return((null==(t=e.date)?void 0:t.getMonth())||0)+1},mm:()=>{var t;let n=((null==(t=e.date)?void 0:t.getMonth())||0)+1;return(n<10?"0":"")+n},mmm:()=>{var t;return a.i18n.monthsShort[(null==(t=e.date)?void 0:t.getMonth())||0]},mmmm:()=>{var t;return a.i18n.months[(null==(t=e.date)?void 0:t.getMonth())||0]},yy:()=>{var t;return(""+((null==(t=e.date)?void 0:t.getFullYear())||0)).slice(2)},yyyy:()=>{var t;return(null==(t=e.date)?void 0:t.getFullYear())||0}}},a.dateRange)r.initialStartDate&&M(r.initialStartDate)&&(e.startDate=new Date(r.initialStartDate.getTime()),R(e.startDate),o(e.startDate)),r.initialEndDate&&M(r.initialEndDate)&&(e.endDate=new Date(r.initialEndDate.getTime()),R(e.endDate)),e.startDate||e.endDate||o(new Date);else{let e=r.defaultDate;!e&&r.defaultValue&&(e=new Date(r.defaultValue)),M(e)?i(e,!0,a):o(new Date)}document.addEventListener("click",v)},onremove:()=>{document.removeEventListener("click",v)},view:o=>{let a=o.attrs,l=t(a),{id:s=e.id,label:f,dateLabel:h,placeholder:g,disabled:v,readonly:b,required:y,iconName:w,helperText:E,onchange:T,oninput:k,className:O,class:x}=a,S="";if(l.dateRange){let t=a.displayFormat||l.format;if(e.startDate&&e.endDate){let n,i;a.displayFormat?(n=a.displayFormat.replace(/yyyy/gi,e.startDate.getFullYear().toString()).replace(/mm/gi,(e.startDate.getMonth()+1).toString().padStart(2,"0")).replace(/dd/gi,e.startDate.getDate().toString().padStart(2,"0")),i=a.displayFormat.replace(/yyyy/gi,e.endDate.getFullYear().toString()).replace(/mm/gi,(e.endDate.getMonth()+1).toString().padStart(2,"0")).replace(/dd/gi,e.endDate.getDate().toString().padStart(2,"0"))):(n=r(e.startDate,t,l),i=r(e.endDate,t,l)),S=`${n} - ${i}`}else if(e.startDate){let n;n=a.displayFormat?a.displayFormat.replace(/yyyy/gi,e.startDate.getFullYear().toString()).replace(/mm/gi,(e.startDate.getMonth()+1).toString().padStart(2,"0")).replace(/dd/gi,e.startDate.getDate().toString().padStart(2,"0")):r(e.startDate,t,l),S=`${n} - `}}else if(e.date&&(S=n(e.date,l.format)),a.displayFormat){let t=a.displayFormat;e.date&&(S=t=t.replace(/yyyy/gi,e.date.getFullYear().toString()).replace(/mm/gi,(e.date.getMonth()+1).toString().padStart(2,"0")).replace(/dd/gi,e.date.getDate().toString().padStart(2,"0")))}return d()(".input-field",{className:O||x||"col s12"},[w&&d()("i.material-icons.prefix",w),d()("input.datepicker",{id:s,type:"text",value:S,placeholder:g,disabled:v,readonly:b,required:y,onclick:()=>{v||b||(e.isOpen=!0,l.onOpen&&l.onOpen())},oninput:e=>{k&&k(e.target.value)},onchange:e=>{if(T){let t=e.target,r=new Date(t.value);M(r)?(i(r,!1,l),T(n(r,"yyyy-mm-dd"))):T(t.value)}}}),(f||h)&&d()("label",{for:s,class:S||g?"active":""},f||h),E&&d()("span.helper-text",E),e.isOpen&&[d()(".modal.datepicker-modal.open",{id:`modal-${e.id}`,tabindex:0,style:{zIndex:1003,display:"block",opacity:1,top:"10%",transform:"scaleX(1) scaleY(1)"}},[d()(".modal-content.datepicker-container",{onclick:t=>{let n=t.target;n.closest(".select-wrapper")||n.closest(".dropdown-content")||(e.monthDropdownOpen=!1,e.yearDropdownOpen=!1)}},[d()(u,{options:l}),d()(".datepicker-calendar-container",[d()(".datepicker-calendar",[d()(p,{options:l,randId:`datepicker-title-${Math.random().toString(36).slice(2)}`}),d()(c,{year:e.calendars[0].year,month:e.calendars[0].month,options:l})]),d()(".datepicker-footer",[l.showClearBtn&&d()("button.btn-flat.datepicker-clear.waves-effect",{type:"button",style:"",onclick:()=>{i(null,!1,l),e.isOpen=!1}},l.i18n.clear),d()("button.btn-flat.datepicker-cancel.waves-effect",{type:"button",onclick:()=>{e.isOpen=!1,l.onClose&&l.onClose()}},l.i18n.cancel),d()("button.btn-flat.datepicker-done.waves-effect",{type:"button",onclick:()=>{if(e.isOpen=!1,l.dateRange){if(e.startDate&&e.endDate&&T){let t=n(e.startDate,"yyyy-mm-dd"),r=n(e.endDate,"yyyy-mm-dd");T(`${t} - ${r}`)}}else e.date&&T&&T(n(e.date,"yyyy-mm-dd"));l.onClose&&l.onClose()}},l.i18n.done)])])])]),d()(".modal-overlay",{style:{zIndex:1002,display:"block",opacity:.5},onclick:()=>{e.isOpen=!1,l.onClose&&l.onClose()}})]])}}},z={view:({attrs:{show:e,position:t,value:n}})=>e?d()(`.value-tooltip.${t}`,n.toFixed(0)):null},W={view:({attrs:{show:e,orientation:t,value:n}})=>e?d()(`.value.${t}`,n.toFixed(0)):null},F=(e,t,n)=>(e-t)/(n-t)*100,G=(e,t,n,r,i,o)=>Math.round((n+Math.max(0,Math.min(100,o?(t.bottom-e.clientY)/t.height*100:(e.clientX-t.left)/t.width*100))/100*(r-n))/i)*i,Y=(e,t,n,r,i)=>{let o=10*i;switch(e){case"ArrowLeft":case"ArrowDown":return Math.max(n,t-i);case"ArrowRight":case"ArrowUp":return Math.min(r,t+i);case"PageDown":return Math.max(n,t-o);case"PageUp":return Math.min(r,t+o);case"Home":return n;case"End":return r;default:return null}},K=e=>void 0!==e.value&&"function"==typeof e.oninput,Z=e=>(void 0!==e.minValue||void 0!==e.maxValue)&&"function"==typeof e.oninput,q=(e,t)=>{let{min:n=0,max:r=100,value:i,minValue:o,maxValue:a,defaultValue:l}=t;if(K(t)?e.singleValue=void 0!==i?i:n:(void 0===e.singleValue&&(e.singleValue=void 0!==l?l:void 0!==i?i:n),e.lastValue===i||e.hasUserInteracted||void 0===i||(e.singleValue=i,e.lastValue=i)),Z(t))e.rangeMinValue=void 0!==o?o:n,e.rangeMaxValue=void 0!==a?a:r;else{let t=void 0!==o?o:n,i=void 0!==a?a:r;(void 0===e.rangeMinValue||void 0===e.rangeMaxValue)&&(e.rangeMinValue=t,e.rangeMaxValue=i),e.hasUserInteracted||(void 0===o||e.lastMinValue===o)&&(void 0===a||e.lastMaxValue===a)||(e.rangeMinValue=t,e.rangeMaxValue=i,e.lastMinValue=o,e.lastMaxValue=a)}null===e.activeThumb&&(e.activeThumb="min"),void 0===e.isDragging&&(e.isDragging=!1)},X=(e,t,n,r,i)=>{e>t&&(e=t),t<e&&(t=e),Z(n)||(r.rangeMinValue=e,r.rangeMaxValue=t),r.hasUserInteracted=!0,i&&n.oninput&&n.oninput(e,t),!i&&n.onchange&&n.onchange(e,t)},J={oninit({state:e}){e.componentInitialized||(e.componentInitialized=!0)},onremove({state:e}){e.cleanupMouseEvents&&(e.cleanupMouseEvents(),e.cleanupMouseEvents=null)},view({attrs:e,state:t}){let{cn:n,style:r,iconName:i,id:o,label:a,isMandatory:l,helperText:s,min:c=0,max:u=100,step:p=1,vertical:f=!1,showValue:h=!1,valueDisplay:g,height:y="200px",disabled:w=!1,tooltipPos:E="top",oninput:T,onchange:k}=e,O=g||(h?"always":"none");q(t,e);let x=F(t.singleValue,c,u),S=f?{height:y}:{},I=f?"vertical":"horizontal",L=f?{height:`${x}%`}:{width:`${x}%`},A=f?{bottom:`${x}%`}:{left:`${x}%`},C=f&&("top"===E||"bottom"===E)?"right":E,N=(n,r=!1)=>{K(e)||(t.singleValue=n),t.hasUserInteracted=!0,r&&T&&T(n),!r&&k&&k(n)},D=f?"range-field vertical":"range-field";return d()(".input-field",{className:n,style:r},[i?d()("i.material-icons.prefix",i):void 0,d()("input[type=range]",{id:o,value:t.singleValue,min:c,max:u,step:p,style:{display:"none"},disabled:w,tabindex:-1}),d()("div",{class:D,style:S},[d()(`.single-range-slider.${I}`,{tabindex:w?-1:0,role:"slider","aria-valuemin":c,"aria-valuemax":u,"aria-valuenow":t.singleValue,"aria-label":a||"Range slider",onclick:e=>{if(w)return;let t=e.currentTarget.getBoundingClientRect();N(G(e,t,c,u,p,f),!1),e.currentTarget.focus()},onkeydown:e=>{if(w)return;let n=t.singleValue,r=Y(e.key,n,c,u,p);null!==r&&(e.preventDefault(),N(r,!1))},onblur:()=>{!w&&k&&k(t.singleValue)}},[d()(`.track.${I}`),d()(`.range-progress.${I}`,{style:L}),d()(`.thumb.${I}`,{style:A,onmousedown:e=>{if(w)return;e.preventDefault(),e.stopPropagation(),t.isDragging=!0,"auto"===O&&d().redraw();let n=e.currentTarget.parentElement;if(!n)return;let r=e=>{t.isDragging&&n&&(N(G(e,n.getBoundingClientRect(),c,u,p,f),!0),d().redraw())},i=()=>{t.isDragging=!1,t.cleanupMouseEvents&&(t.cleanupMouseEvents(),t.cleanupMouseEvents=null),N(t.singleValue,!1),d().redraw()};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),t.cleanupMouseEvents=()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i)}}},d()(z,{value:t.singleValue,position:C,show:"always"===O||"auto"===O&&t.isDragging}))])]),a?d()(v,{label:a,id:o,isMandatory:l,isActive:!0}):null,s?d()(b,{helperText:s}):null])}},Q={oninit({state:e}){e.componentInitialized||(e.componentInitialized=!0)},onremove({state:e}){e.cleanupMouseEvents&&(e.cleanupMouseEvents(),e.cleanupMouseEvents=null)},view({attrs:e,state:t}){let{cn:n,style:r,iconName:i,id:o,label:a,isMandatory:l,helperText:s,min:c=0,max:u=100,step:p=1,vertical:f=!1,showValue:h=!1,valueDisplay:g,height:y="200px",disabled:w=!1}=e,E=g||(h?"always":"none");q(t,e);let T=F(t.rangeMinValue,c,u),k=F(t.rangeMaxValue,c,u),O=f?"vertical":"horizontal",x=f?{bottom:`${T}%`,height:`${k-T}%`}:{left:`${T}%`,width:`${k-T}%`},S=(e,t)=>f?{bottom:`${e}%`,zIndex:t?10:5}:{left:`${e}%`,zIndex:t?10:5},I=n=>r=>{if(w)return;r.preventDefault(),r.stopPropagation(),t.isDragging=!0,t.activeThumb=n,"auto"===E&&d().redraw();let i=r.currentTarget.parentElement;if(!i)return;let o=r=>{if(!t.isDragging||!i)return;let o=G(r,i.getBoundingClientRect(),c,u,p,f);"min"===n?X(Math.min(o,t.rangeMaxValue),t.rangeMaxValue,e,t,!0):X(t.rangeMinValue,Math.max(o,t.rangeMinValue),e,t,!0),d().redraw()},a=()=>{t.isDragging=!1,t.activeThumb=null,t.cleanupMouseEvents&&(t.cleanupMouseEvents(),t.cleanupMouseEvents=null),X(t.rangeMinValue,t.rangeMaxValue,e,t,!1),d().redraw()};document.addEventListener("mousemove",o),document.addEventListener("mouseup",a),t.cleanupMouseEvents=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",a)}};return d()(".input-field",{className:n,style:r},[i?d()("i.material-icons.prefix",i):void 0,d()("input[type=range]",{id:o,value:t.rangeMinValue,min:c,max:u,step:p,style:{display:"none"},disabled:w,tabindex:-1}),d()("input[type=range]",{id:`${o}_max`,value:t.rangeMaxValue,min:c,max:u,step:p,style:{display:"none"},disabled:w,tabindex:-1}),d()("div",{className:f?"range-field vertical":"range-field"},[d()(`.double-range-slider.${O}`,{style:f?{height:y}:{},onclick:n=>{if(w)return;let r=n.currentTarget,i=G(n,r.getBoundingClientRect(),c,u,p,f);if(Math.abs(i-t.rangeMinValue)<=Math.abs(i-t.rangeMaxValue)){X(Math.min(i,t.rangeMaxValue),t.rangeMaxValue,e,t,!1),t.activeThumb="min";let n=r.querySelector(".thumb.min-thumb");n&&n.focus()}else{X(t.rangeMinValue,Math.max(i,t.rangeMinValue),e,t,!1),t.activeThumb="max";let n=r.querySelector(".thumb.max-thumb");n&&n.focus()}},onblur:()=>{!w&&e.onchange&&e.onchange(t.rangeMinValue,t.rangeMaxValue)}},[d()(`.track.${O}`),d()(`.range.${O}`,{style:x}),d()(`.thumb.${O}.min-thumb${"min"===t.activeThumb?".active":""}`,{style:S(T,"min"===t.activeThumb),tabindex:w?-1:0,role:"slider","aria-valuemin":c,"aria-valuemax":t.rangeMaxValue,"aria-valuenow":t.rangeMinValue,"aria-label":`Minimum value: ${t.rangeMinValue}`,"aria-orientation":f?"vertical":"horizontal",onmousedown:I("min"),onclick:e=>{e.stopPropagation(),t.activeThumb="min",e.currentTarget.focus()},onfocus:()=>{t.activeThumb="min"},onkeydown:n=>{if(w)return;let r=t.rangeMinValue,i=Y(n.key,r,c,u,p);null!==i&&(n.preventDefault(),X(Math.min(i,t.rangeMaxValue),t.rangeMaxValue,e,t,!1))}},d()(W,{value:t.rangeMinValue,orientation:O,show:"always"===E||"auto"===E&&t.isDragging&&"min"===t.activeThumb})),d()(`.thumb.${O}.max-thumb${"max"===t.activeThumb?".active":""}`,{style:S(k,"max"===t.activeThumb),tabindex:w?-1:0,role:"slider","aria-valuemin":t.rangeMinValue,"aria-valuemax":u,"aria-valuenow":t.rangeMaxValue,"aria-label":`Maximum value: ${t.rangeMaxValue}`,"aria-orientation":f?"vertical":"horizontal",onmousedown:I("max"),onclick:e=>{e.stopPropagation(),t.activeThumb="max",e.currentTarget.focus()},onfocus:()=>{t.activeThumb="max"},onkeydown:n=>{if(w)return;let r=t.rangeMaxValue,i=Y(n.key,r,c,u,p);if(null!==i){n.preventDefault();let r=Math.max(i,t.rangeMinValue);X(t.rangeMinValue,r,e,t,!1)}}},d()(W,{value:t.rangeMaxValue,orientation:O,show:"always"===E||"auto"===E&&t.isDragging&&"max"===t.activeThumb}))])]),a?d()(v,{label:a,id:o,isMandatory:l,isActive:!0}):null,s?d()(b,{helperText:s}):null])}},ee=()=>({view:({attrs:e})=>{let{currentLength:t,maxLength:n,show:r}=e;return r?d()("span.character-counter",{style:{color:t>n?"#F44336":"#9e9e9e"}},`${t}/${n}`):null}}),et=()=>{let e={id:f(),currentLength:0,hasInteracted:!1,height:void 0,active:!1,textarea:void 0,hiddenDiv:void 0,internalValue:""},t=(t,n)=>{if(!t||!n)return;let r=window.getComputedStyle(t);n.style.fontFamily=r.fontFamily,n.style.fontSize=r.fontSize,n.style.lineHeight=r.lineHeight,n.style.paddingTop=r.paddingTop,n.style.paddingRight=r.paddingRight,n.style.paddingBottom=r.paddingBottom,n.style.paddingLeft=r.paddingLeft,"off"===t.getAttribute("wrap")?(n.style.overflowWrap="normal",n.style.whiteSpace="pre"):(n.style.overflowWrap="break-word",n.style.whiteSpace="pre-wrap"),n.textContent=t.value+"\n";let i=n.innerHTML.replace(/\n/g,"<br>");n.innerHTML=i,t.offsetWidth>0?n.style.width=t.offsetWidth+"px":n.style.width=window.innerWidth/2+"px";let o=t.offsetHeight,a=n.offsetHeight;o<=a?e.height=a+"px":e.height=void 0},n=e=>void 0!==e.value&&(void 0!==e.oninput||void 0!==e.onchange);return{oninit:({attrs:t})=>{let r=n(t),i=t.readonly||t.disabled;void 0===t.value||r||i||console.warn("TextArea received 'value' prop without 'oninput' or 'onchange' handler. Use 'defaultValue' for uncontrolled components or add an event handler for controlled components."),r||(e.internalValue=t.defaultValue||"")},onremove:()=>{},view:({attrs:r})=>{var i,o,a,l;let s,{className:c="col s12",helperText:u,iconName:f,id:h=e.id,value:g,placeholder:y,isMandatory:w,label:E,maxLength:T,oninput:k,onchange:O,onkeydown:x,onkeypress:S,onkeyup:I,onblur:L,style:A}=r,C=p(r,["className","helperText","iconName","id","value","placeholder","isMandatory","label","maxLength","oninput","onchange","onkeydown","onkeypress","onkeyup","onblur","style"]),N=n(r),D=r.readonly||r.disabled;return s=N?g||"":D?null!=(o=null!=(i=r.defaultValue)?i:g)?o:"":null!=(l=null!=(a=e.internalValue)?a:r.defaultValue)?l:"",[d()(".hiddendiv",{style:{visibility:"hidden",position:"absolute",top:"0",left:"0",zIndex:"-1",whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word"},oncreate:({dom:n})=>{let r=e.hiddenDiv=n;e.textarea&&t(e.textarea,r)},onupdate:({dom:n})=>{let r=e.hiddenDiv=n;e.textarea&&t(e.textarea,r)}}),d()(".input-field",{className:c,style:A},[f?d()("i.material-icons.prefix",f):"",d()("textarea.materialize-textarea",Object.assign(Object.assign({},C),{id:h,tabindex:0,value:N?s:void 0,style:{height:e.height},oncreate:({dom:t})=>{let n=e.textarea=t;N||void 0===r.defaultValue||(n.value=String(r.defaultValue)),T&&(e.currentLength=n.value.length)},onupdate:({dom:n})=>{e.height&&(n.style.height=e.height),e.hiddenDiv&&t(n,e.hiddenDiv)},onfocus:()=>{e.active=!0},oninput:t=>{e.active=!0,e.hasInteracted=!1;let n=t.target;T&&(e.currentLength=n.value.length,e.hasInteracted=n.value.length>0),N||(e.internalValue=n.value),k&&k(n.value)},onblur:t=>{e.active=!1,e.hasInteracted=!0,L&&L(t),O&&e.textarea&&O(e.textarea.value)},onkeyup:I?e=>{I(e,e.target.value)}:void 0,onkeydown:x?e=>{x(e,e.target.value)}:void 0,onkeypress:S?e=>{S(e,e.target.value)}:void 0})),d()(v,{label:E,id:h,isMandatory:w,isActive:s||y||e.active,initialValue:""!==s}),d()(b,{helperText:u,dataError:e.hasInteracted&&r.dataError?r.dataError:void 0,dataSuccess:e.hasInteracted&&r.dataSuccess?r.dataSuccess:void 0}),T?d()(ee,{currentLength:e.currentLength,maxLength:T,show:e.currentLength>0}):void 0])]}}},en=(e,t="")=>()=>{let n={id:f(),internalValue:void 0,hasInteracted:!1,isValid:!0,active:!1,inputElement:null,rangeMinValue:void 0,rangeMaxValue:void 0,singleValue:void 0,isDragging:!1,activeThumb:null},r=e=>"value"in e&&void 0!==e.value&&"function"==typeof e.oninput,i=t=>{let n=t.value;return n&&("number"===e||"range"===e)?+n:n};return{oninit:({attrs:t})=>{let i=r(t),o=t.readonly||t.disabled;if(void 0===t.value||i||o||console.warn(`${e} input with label '${t.label}' received 'value' prop without 'oninput' handler. Use 'defaultValue' for uncontrolled components or add an event handler for controlled components.`),!i){let r=["number","range"].includes(e);void 0!==t.defaultValue?r?n.internalValue=t.defaultValue:n.internalValue=String(t.defaultValue):n.internalValue="color"===e?"#ff0000":r?void 0:""}},view:({attrs:o})=>{var a,l,s,c,u,f;let h,{className:g="col s12",dataError:y,dataSuccess:w,helperText:E,iconName:T,id:k=n.id,placeholder:O,isMandatory:x,label:S,maxLength:I,newRow:A,oninput:C,onchange:N,onkeydown:D,onkeypress:M,onkeyup:_,style:R,validate:P,canClear:j}=o,H=p(o,["className","dataError","dataSuccess","helperText","iconName","id","placeholder","isMandatory","label","maxLength","newRow","oninput","onchange","onkeydown","onkeypress","onkeyup","style","validate","canClear"]),V=[A?"clear":"",t,g].filter(Boolean).join(" ").trim()||void 0;if("range"===e&&(o.minmax||o.valueDisplay))return d()(o.minmax?Q:J,Object.assign(Object.assign({},o),{state:n,cn:V,style:R,iconName:T,id:k,label:S,isMandatory:x,helperText:E}));let $=["number","range"].includes(e),B=r(o),U=o.readonly||o.disabled;h=B?o.value:U?null!=(l=null!=(a=o.defaultValue)?a:o.value)?l:$?0:"":null!=(c=null!=(s=n.internalValue)?s:o.defaultValue)?c:$?0:"";let z=!!n.active||null!=(u=n.inputElement)&&!!u.value||!!h||!!O||"color"===e||"range"===e||!1,W="range"===e&&!o.minmax,F=!U&&(P||"email"===e||"url"===e||$);return d()(".input-field",{className:V,style:R},[T?d()("i.material-icons.prefix",T):void 0,d()("input",Object.assign(Object.assign({class:F?"validate":void 0},H),{type:e,tabindex:0,id:k,placeholder:O,value:B?h:void 0,class:"range"===e&&o.vertical?"range-slider vertical":void 0,style:"range"===e&&o.vertical?{height:o.height||"200px",width:"6px",writingMode:"vertical-lr",direction:"rtl"}:void 0,oncreate:({dom:e})=>{let t=n.inputElement=e;(({autofocus:e})=>!!e&&("boolean"==typeof e?e:e()))(o)&&t.focus(),B||void 0===o.defaultValue||(t.value=String(o.defaultValue))},onkeyup:_?e=>{_(e,i(e.target))}:void 0,onkeydown:D?e=>{D(e,i(e.target))}:void 0,onkeypress:M?e=>{M(e,i(e.target))}:void 0,oninput:t=>{n.active=!0,n.hasInteracted=!1;let r=t.target,o=i(r);if(B||(n.internalValue=o),C&&C(o),W){let e=r.value,t=parseFloat(r.min||"0"),n=parseFloat(r.max||"100"),i=Math.round(100*(parseFloat(e)-t)/(n-t));r.style.setProperty("--range-progress",`${i}%`)}if(P&&r.classList.contains("invalid")&&r.value.length>0){let e=P(h,r);"boolean"==typeof e&&e?(r.classList.remove("invalid"),r.classList.add("valid"),n.isValid=!0):"string"==typeof e&&""===e&&(r.classList.remove("invalid"),r.classList.add("valid"),n.isValid=!0)}else("email"===e||"url"===e)&&r.classList.contains("invalid")&&r.value.length>0&&r.validity.valid&&(r.classList.remove("invalid"),r.classList.add("valid"),n.isValid=!0)},onfocus:()=>{n.active=!0},onblur:t=>{n.active=!1;let r=t.target;if(n.hasInteracted=!0,o.readonly||o.disabled){o.onblur&&o.onblur(t),N&&n.inputElement&&N(i(n.inputElement));return}if(r&&P){let e=i(r);if(e&&String(e).length>0){let t=P(e,r);n.isValid="boolean"==typeof t&&t,"boolean"==typeof t?r.setCustomValidity(t?"":"Custom validation failed"):r.setCustomValidity(t),"boolean"==typeof t?t?(r.classList.remove("invalid"),r.classList.add("valid")):(r.classList.remove("valid"),r.classList.add("invalid")):"string"==typeof t&&(r.classList.remove("valid"),r.classList.add("invalid"),n.isValid=!1)}else r.classList.remove("valid","invalid"),n.isValid=!0}else if("email"===e||"url"===e){let e=i(r);e&&String(e).length>0?(n.isValid=r.validity.valid,r.setCustomValidity(""),n.isValid?(r.classList.remove("invalid"),r.classList.add("valid")):(r.classList.remove("valid"),r.classList.add("invalid"))):(r.classList.remove("valid","invalid"),n.isValid=!0)}else if($){let e=i(r);null==e||isNaN(Number(e))?(r.classList.remove("valid","invalid"),n.isValid=!0):(n.isValid=r.validity.valid,r.setCustomValidity(""),n.isValid?(r.classList.remove("invalid"),r.classList.add("valid")):(r.classList.remove("valid"),r.classList.add("invalid")))}o.onblur&&o.onblur(t),N&&n.inputElement&&N(i(n.inputElement))}})),j&&"text"===e&&(null==(f=n.inputElement)?void 0:f.value)?d()(L,{name:"close",className:"input-clear-btn",onclick:e=>{e.preventDefault(),e.stopPropagation();if(n.inputElement){n.inputElement.value="",n.inputElement.focus(),n.active=!1;let e=i(n.inputElement);C&&C(e),N&&N(e),n.inputElement.classList.remove("valid","invalid"),n.isValid=!0,d().redraw()}}}):void 0,d()(v,{label:S,id:k,isMandatory:x,isActive:z,initialValue:void 0!==h&&""!==h}),d()(b,{helperText:E,dataError:n.hasInteracted&&!n.isValid?y:void 0,dataSuccess:n.hasInteracted&&n.isValid?w:void 0}),I&&"string"==typeof h?d()(ee,{currentLength:h.length,maxLength:I,show:h.length>0}):void 0])}}},er=en("text");en("password");let ei=en("number"),eo=en("url"),ea=en("color");en("range",".range-field");let el=en("email"),es=()=>{let e,t=!1;return{view:({attrs:n})=>{let{multiple:r,disabled:i,value:o,placeholder:a,onchange:l,className:s="col s12",accept:c,label:u="File"}=n,p=c?c instanceof Array?c.join(", "):c:void 0;return d()(".file-field.input-field",{className:n.class||s},[d()(".btn",[d()("span",u),d()("input[type=file]",{title:u,accept:p,multiple:r,disabled:i,onchange:l?e=>{let n=e.target;n&&n.files&&l&&(t=!0,l(n.files))}:void 0})]),d()(".file-path-wrapper",d()("input.file-path.validate[type=text]",{placeholder:a,oncreate:({dom:t})=>{e=t,o&&(e.value=o)}})),(t||(null==e?void 0:e.value))&&d()("a.waves-effect.waves-teal.btn-flat",{style:{float:"right",position:"relative",top:"-3rem",padding:0},onclick:()=>{t=!1,e.value="",l&&l({})}},d()(L,{name:"close",className:"close"}))])}}},ec=()=>{let e;return{view:({attrs:{className:t="col s12",onchange:n,label:r,checked:i,disabled:o,description:a,style:l,inputId:s}})=>(e||(e=s||f()),d()("p",{className:t,style:l},d()("label",{for:e},[d()("input[type=checkbox][tabindex=0]",{className:o?"disabled":void 0,id:e,checked:i,disabled:o,onclick:n?e=>{e.target&&void 0!==e.target.checked&&n(e.target.checked)}:void 0}),r?"string"==typeof r?d()("span",r):r:void 0]),a&&d()(b,{className:"input-checkbox-desc",helperText:a})))}},ed={view:({attrs:{options:e,layout:t}})=>{let n=e.map(({component:e,props:t,key:n})=>d()(e,Object.assign(Object.assign({},t),{key:n})));return"horizontal"===t?d()("div.grid-container",n):n}},eu=()=>{let e={componentId:""};return{oninit:({attrs:t})=>{e.componentId=t.id||f()},view:({attrs:{checkedId:t,label:n,options:r=[],description:i,className:o="col s12",style:a,disabled:l,checkboxClass:s,newRow:c,isMandatory:u,layout:p="vertical",showSelectAll:f=!1,selectAllText:h="Select All",selectNoneText:g="Select None",onchange:v}})=>{let y=void 0!==t?Array.isArray(t)?t:[t]:[],w=[c?"clear":"",o].filter(Boolean).join(" ").trim()||void 0,E=r.map(t=>{let n;return{component:ec,props:{disabled:l||t.disabled,label:t.label,onchange:v?e=>{var n;let r;return n=t.id,r=y.filter(e=>e!==n),void(e&&r.push(n),v&&v(r))}:void 0,className:t.className||s,checked:(n=t.id,y.includes(n)),description:t.description,inputId:`${e.componentId}-${t.id}`},key:t.id}}),T=d()(ed,{options:E,layout:p});return d()("div",{id:e.componentId,className:w,style:a},[n&&d()("h5.form-group-label",n+(u?" *":"")),f&&d()("div.select-all-controls",{style:{marginBottom:"10px"}},[d()("a",{href:"#",onclick:e=>{let t;e.preventDefault(),t=r.map(e=>e.id),v&&v(t)},style:{marginRight:"15px"}},h),d()("a",{href:"#",onclick:e=>{e.preventDefault(),v&&v([])}},g)]),i&&d()(b,{helperText:i}),d()("form",{action:"#"},T)])}}},ep=()=>{let e={isOpen:!1,id:""},t=null,n=n=>{e.isOpen=!1,n.onToggle&&n.onToggle(!1),n.onClose&&n.onClose(),t&&(document.removeEventListener("keydown",t),t=null),document.body.style.overflow="",d().redraw()},r=r=>{e.isOpen=!0,r.onToggle&&r.onToggle(!0),t=t=>{"Escape"===t.key&&!1!==r.closeOnEsc&&e.isOpen&&n(r)},document.addEventListener("keydown",t),document.body.style.overflow="hidden"};return{oninit:({attrs:t})=>{var n;e.id=null!=(n=t.id)?n:f(),t.isOpen&&r(t)},onremove:()=>{t&&(document.removeEventListener("keydown",t),t=null),document.body.style.overflow=""},view:({attrs:t})=>{void 0!==t.isOpen&&t.isOpen!==e.isOpen&&(t.isOpen?r(t):n(t));let{id:i,title:o,description:a,fixedFooter:l,bottomSheet:s,buttons:c,richContent:u,className:p,showCloseButton:f=!0,closeOnBackdropClick:h=!0}=t,g=["modal",p||"",l?"modal-fixed-footer":"",s?"bottom-sheet":"",e.isOpen?"active":""].filter(Boolean).join(" ").trim(),v=["modal-overlay",e.isOpen?"active":""].filter(Boolean).join(" ").trim()||void 0;return d()("div",{className:"modal-container"},[d()("div",{className:v,onclick:h?()=>n(t):void 0,style:{display:e.isOpen?"block":"none",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:"1002"}}),d()("div",{id:i,className:g,"aria-hidden":e.isOpen?"false":"true",role:"dialog","aria-labelledby":`${i}-title`,"aria-describedby":a?`${i}-desc`:void 0,style:Object.assign(Object.assign({display:e.isOpen?"flex":"none",position:"fixed"},s?{top:"auto",bottom:"0",left:"0",right:"0",transform:"none",maxWidth:"100%",borderRadius:"8px 8px 0 0"}:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",maxWidth:"75%",borderRadius:"4px"}),{backgroundColor:"var(--mm-modal-background, #fff)",maxHeight:"85%",overflow:"auto",zIndex:"1003",padding:"0",flexDirection:"column",boxShadow:"0 24px 38px 3px rgba(0,0,0,0.14), 0 9px 46px 8px rgba(0,0,0,0.12), 0 11px 15px -7px rgba(0,0,0,0.20)"})},[f&&d()("button",{className:"modal-close btn-flat",style:{position:"absolute",top:"8px",right:"8px",padding:"8px",minWidth:"auto",lineHeight:1},onclick:()=>n(t),"aria-label":"Close modal"},"\xd7"),d()(".modal-content",{style:{padding:"24px",paddingTop:f?"48px":"24px",minHeight:"auto",flex:"1 1 auto"}},[d()("h4",{id:`${i}-title`,style:{margin:"0 0 20px 0"}},o),a&&d()("div",Object.assign({id:`${i}-desc`},u&&"string"==typeof a?{innerHTML:a}:{}),u&&"string"==typeof a?void 0:a)]),c&&c.length>0&&d()(".modal-footer",{style:{padding:"4px 6px",borderTop:"1px solid var(--mm-border-color, rgba(160,160,160,0.2))",textAlign:"right"}},c.map(e=>d()(O,Object.assign(Object.assign({},e),{className:`modal-close ${e.className||""}`,onclick:r=>{e.onclick&&e.onclick(r),n(t)}}))))])])}}},em=()=>({view:({attrs:{title:e,href:t,active:n,disabled:r}})=>d()("li",{className:n?"active":r?"disabled":"waves-effect"},"number"==typeof e?d()(d().route.Link,{href:t},e):e)}),ef=()=>{let e={pagIndex:0};return{view:({attrs:{items:t,curPage:n=1,size:r=Math.min(9,t.length)}})=>{let{pagIndex:i}=e,o=i*r,a=o+r,l=i>0,s=a<t.length,c=[{title:d()("a",{onclick:()=>l&&e.pagIndex--},d()("i.material-icons","chevron_left")),disabled:!l},...t.filter((e,t)=>o<=t&&t<a),{title:d()("a",{onclick:()=>s&&e.pagIndex++},d()("i.material-icons","chevron_right")),disabled:!s}];return d()("ul.pagination",c.map((e,t)=>d()(em,Object.assign(Object.assign({title:o+t},e),{active:o+t===n}))))}}},eh={dialRadius:135,outerRadius:105,innerRadius:70,tickRadius:20,duration:350,container:null,defaultTime:"now",fromNow:0,showClearBtn:!1,i18n:{cancel:"Cancel",clear:"Clear",done:"Ok"},autoClose:!1,twelveHour:!0,vibrate:!0,onOpen:()=>{},onOpenStart:()=>{},onOpenEnd:()=>{},onCloseStart:()=>{},onCloseEnd:()=>{},onSelect:()=>{}},eg=()=>{let e,t,n=e=>(e<10?"0":"")+e,r=e=>e.targetTouches&&e.targetTouches.length>=1?{x:e.targetTouches[0].clientX,y:e.targetTouches[0].clientY}:{x:e.clientX,y:e.clientY},i=n=>{if(n.preventDefault(),!e.plate)return;let i=e.plate.getBoundingClientRect(),l={x:i.left,y:i.top};e.x0=l.x+t.dialRadius,e.y0=l.y+t.dialRadius,e.moved=!1;let s=r(n);e.dx=s.x-e.x0,e.dy=s.y-e.y0,p(e.dx,e.dy,!1),document.addEventListener("mousemove",o),document.addEventListener("touchmove",o),document.addEventListener("mouseup",a),document.addEventListener("touchend",a)},o=t=>{t.preventDefault();let n=r(t),i=n.x-e.x0,o=n.y-e.y0;e.moved=!0,p(i,o,!1),d().redraw()},a=n=>{n.preventDefault(),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",a),document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o);let i=r(n),l=i.x-e.x0,s=i.y-e.y0;e.moved&&l===e.dx&&s===e.dy&&p(l,s),"hours"===e.currentView?c("minutes",t.duration/2):t.autoClose&&(e.minutesView&&e.minutesView.classList.add("timepicker-dial-out"),setTimeout(()=>{v()},t.duration/2)),t.onSelect&&t.onSelect(e.hours,e.minutes),d().redraw()},l=r=>{let i=((r||t.defaultTime||"")+"").split(":"),o=!1;if(t.twelveHour&&i.length>1&&(i[1].toUpperCase().indexOf("AM")>-1?(e.amOrPm="AM",o=!0):i[1].toUpperCase().indexOf("PM")>-1&&(e.amOrPm="PM",o=!0),i[1]=i[1].replace("AM","").replace("PM","").trim()),"now"===i[0]){let n=new Date(+new Date+t.fromNow);i=[n.getHours().toString(),n.getMinutes().toString()],t.twelveHour&&(e.amOrPm=parseInt(i[0])>=12?"PM":"AM",o=!1)}let a=+i[0]||0,l=+i[1]||0;t.twelveHour&&(o?0===a&&"AM"===e.amOrPm&&(a=12):a>=12?(e.amOrPm="PM",a>12&&(a-=12)):(e.amOrPm="AM",0===a&&(a=12))),e.hours=a,e.minutes=l,e.spanHours&&(e.spanHours.innerHTML=e.hours.toString()),e.spanMinutes&&(e.spanMinutes.innerHTML=n(e.minutes)),s()},s=()=>{t.twelveHour&&e.amBtn&&e.pmBtn&&(e.amBtn.classList.toggle("text-primary","AM"===e.amOrPm),e.pmBtn.classList.toggle("text-primary","PM"===e.amOrPm))},c=(n,r)=>{let i="hours"===n,o=i?e.hoursView:e.minutesView,a=i?e.minutesView:e.hoursView;e.currentView=n,e.spanHours&&e.spanHours.classList.toggle("text-primary",i),e.spanMinutes&&e.spanMinutes.classList.toggle("text-primary",!i),a&&a.classList.add("timepicker-dial-out"),o&&(o.style.visibility="visible",o.classList.remove("timepicker-dial-out")),u(r),e.toggleViewTimer&&clearTimeout(e.toggleViewTimer),e.toggleViewTimer=window.setTimeout(()=>{a&&(a.style.visibility="hidden")},t.duration)},u=n=>{let r=e.currentView,i=e[r],o="hours"===r,a=Math.PI/(o?6:30)*i,l=o&&i>0&&i<13?t.innerRadius:t.outerRadius,s=Math.sin(a)*l,c=-Math.cos(a)*l;n&&e.canvas?(e.canvas.classList.add("timepicker-canvas-out"),setTimeout(()=>{e.canvas&&e.canvas.classList.remove("timepicker-canvas-out"),p(s,c)},n)):p(s,c)},p=(r,i,o,a)=>{let l=Math.atan2(r,-i),s="hours"===e.currentView,c=Math.PI/(s||o?6:30),d=Math.sqrt(r*r+i*i),u=s&&d<(t.outerRadius+t.innerRadius)/2,p=u?t.innerRadius:t.outerRadius;t.twelveHour&&(p=t.outerRadius),l<0&&(l=2*Math.PI+l);let f=Math.round(l/c);if(l=f*c,t.twelveHour?s?0===f&&(f=12):(o&&(f*=5),60===f&&(f=0)):s?(12===f&&(f=0),f=u?0===f?12:f:0===f?0:f+12):(o&&(f*=5),60===f&&(f=0)),e[e.currentView]!==f&&(e.vibrateTimer&&clearTimeout(e.vibrateTimer),t.vibrate&&navigator.vibrate&&(navigator.vibrate(10),e.vibrateTimer=window.setTimeout(()=>{e.vibrateTimer=void 0},100))),e[e.currentView]=f,s&&e.spanHours?e.spanHours.innerHTML=f.toString():!s&&e.spanMinutes&&(e.spanMinutes.innerHTML=n(f)),e.hand&&e.bg){let n=Math.sin(l)*(p-t.tickRadius),r=-Math.cos(l)*(p-t.tickRadius),i=Math.sin(l)*p,o=-Math.cos(l)*p;e.hand.setAttribute("x2",n.toString()),e.hand.setAttribute("y2",r.toString()),e.bg.setAttribute("cx",i.toString()),e.bg.setAttribute("cy",o.toString())}},h=t=>{e.amOrPm=t,s()},g=()=>{e.isOpen&&(e.isOpen=!1,t.onCloseStart&&t.onCloseStart(),t.onCloseEnd&&t.onCloseEnd())},v=r=>{let i=r?"":n(e.hours)+":"+n(e.minutes);return!r&&t.twelveHour&&(i=`${i} ${e.amOrPm}`),g(),d().redraw(),i},b=()=>({view:({attrs:r})=>{let{showClearBtn:o,clearLabel:a,closeLabel:l,doneLabel:s}=r;return[d()(".modal-content.timepicker-container",[d()(".timepicker-digital-display",[d()(".timepicker-text-container",[d()(".timepicker-display-column",[d()("span.timepicker-span-hours",{class:"hours"===e.currentView?"text-primary":"",onclick:()=>c("hours"),oncreate:t=>{e.spanHours=t.dom}},e.hours.toString()),":",d()("span.timepicker-span-minutes",{class:"minutes"===e.currentView?"text-primary":"",onclick:()=>c("minutes"),oncreate:t=>{e.spanMinutes=t.dom}},n(e.minutes))]),t.twelveHour&&d()(".timepicker-display-column.timepicker-display-am-pm",[d()(".timepicker-span-am-pm",{oncreate:t=>{e.spanAmPm=t.dom}},[d()(".am-btn",{class:"AM"===e.amOrPm?"text-primary":"",onclick:()=>h("AM"),oncreate:t=>{e.amBtn=t.dom}},"AM"),d()(".pm-btn",{class:"PM"===e.amOrPm?"text-primary":"",onclick:()=>h("PM"),oncreate:t=>{e.pmBtn=t.dom}},"PM")])])])]),d()(".timepicker-analog-display",[d()(".timepicker-plate",{oncreate:t=>{e.plate=t.dom,e.plate.addEventListener("mousedown",i),e.plate.addEventListener("touchstart",i)},onremove:()=>{e.plate&&(e.plate.removeEventListener("mousedown",i),e.plate.removeEventListener("touchstart",i))}},[d()(".timepicker-canvas",{oncreate:n=>{e.canvas=n.dom,(()=>{if(!e.canvas)return;let n=t.dialRadius,r=t.tickRadius,i=2*n,o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("class","timepicker-svg"),o.setAttribute("width",i.toString()),o.setAttribute("height",i.toString());let a=document.createElementNS("http://www.w3.org/2000/svg","g");a.setAttribute("transform",`translate(${n},${n})`);let l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class","timepicker-canvas-bearing"),l.setAttribute("cx","0"),l.setAttribute("cy","0"),l.setAttribute("r","4");let s=document.createElementNS("http://www.w3.org/2000/svg","line");s.setAttribute("x1","0"),s.setAttribute("y1","0");let c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.setAttribute("class","timepicker-canvas-bg"),c.setAttribute("r",r.toString()),a.appendChild(s),a.appendChild(c),a.appendChild(l),o.appendChild(a),e.canvas.appendChild(o),e.hand=s,e.bg=c,e.bearing=l,e.g=a})(),setTimeout(()=>u(),10)}}),d()(".timepicker-dial.timepicker-hours",{oncreate:n=>{e.hoursView=n.dom,(()=>{if(e.hoursView)if(t.twelveHour)for(let n=1;n<13;n++){let r=document.createElement("div");r.className="timepicker-tick";let i=n/6*Math.PI,o=t.outerRadius;r.style.left=t.dialRadius+Math.sin(i)*o-t.tickRadius+"px",r.style.top=t.dialRadius-Math.cos(i)*o-t.tickRadius+"px",r.innerHTML=0===n?"00":n.toString(),e.hoursView.appendChild(r)}else for(let n=0;n<24;n++){let r=document.createElement("div");r.className="timepicker-tick";let i=n/6*Math.PI,o=n>0&&n<13?t.innerRadius:t.outerRadius;r.style.left=t.dialRadius+Math.sin(i)*o-t.tickRadius+"px",r.style.top=t.dialRadius-Math.cos(i)*o-t.tickRadius+"px",r.innerHTML=0===n?"00":n.toString(),e.hoursView.appendChild(r)}})()}}),d()(".timepicker-dial.timepicker-minutes.timepicker-dial-out",{oncreate:r=>{if(e.minutesView=r.dom,e.minutesView)for(let r=0;r<60;r+=5){let i=document.createElement("div");i.className="timepicker-tick";let o=r/30*Math.PI;i.style.left=t.dialRadius+Math.sin(o)*t.outerRadius-t.tickRadius+"px",i.style.top=t.dialRadius-Math.cos(o)*t.outerRadius-t.tickRadius+"px",i.innerHTML=n(r),e.minutesView.appendChild(i)}}})]),d()(".timepicker-footer",{oncreate:t=>{e.footer=t.dom}},[d()("button.btn-flat.timepicker-clear.waves-effect",{type:"button",tabindex:t.twelveHour?"3":"1",style:o?"":"visibility: hidden;",onclick:()=>v(!0)},a),d()(".confirmation-btns",[d()("button.btn-flat.timepicker-close.waves-effect",{type:"button",tabindex:t.twelveHour?"3":"1",onclick:()=>g()},l),d()("button.btn-flat.timepicker-close.waves-effect",{type:"button",tabindex:t.twelveHour?"3":"1",onclick:()=>v()},s)])])])])]}});return{oninit:n=>{let r=n.attrs;t=Object.assign(Object.assign({},eh),r),e={id:f(),isOpen:!1,hours:12,minutes:0,amOrPm:"AM",currentView:"hours",moved:!1,x0:0,y0:0,dx:0,dy:0},r.defaultValue&&l(r.defaultValue)},onremove:()=>{e.toggleViewTimer&&clearTimeout(e.toggleViewTimer),e.vibrateTimer&&clearTimeout(e.vibrateTimer),document.removeEventListener("mousemove",o),document.removeEventListener("touchmove",o),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",a)},view:({attrs:n})=>{let{id:r=e.id,label:i,placeholder:o,disabled:a,readonly:s,required:u,iconName:p,helperText:f,onchange:h,oninput:v,useModal:y=!0,showClearBtn:w=!1,clearLabel:E="Clear",closeLabel:T="Cancel",twelveHour:k,className:O,class:x}=n,S=e.hours;t.twelveHour&&("PM"===e.amOrPm&&12!==e.hours?S=e.hours+12:"AM"===e.amOrPm&&12===e.hours&&(S=0));let I=void 0!==e.hours&&void 0!==e.minutes?((e,t,n)=>{if(!n)return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`;{let n=0===e?12:e>12?e-12:e,r=e>=12?"PM":"AM";return`${n}:${t.toString().padStart(2,"0")} ${r}`}})(S,e.minutes,k||!1):"";return d()(".input-field",{className:O||x||"col s12"},[p&&d()("i.material-icons.prefix",p),d()("input.timepicker",{id:r,type:y?"text":"time",value:y?I:void 0!==e.hours&&void 0!==e.minutes?`${e.hours.toString().padStart(2,"0")}:${e.minutes.toString().padStart(2,"0")}`:"",placeholder:y?o:void 0,disabled:a,readonly:s,required:u,onclick:()=>{a||s||!y||!e.isOpen&&(e.isOpen=!0,l(I),c("hours"),t.onOpen&&t.onOpen(),t.onOpenStart&&t.onOpenStart(),t.onOpenEnd&&t.onOpenEnd())},onchange:t=>{if(!y){let n=t.target.value,[r,i]=n.split(":").map(Number);e.hours=r,e.minutes=i,h&&h(n)}},oninput:e=>{!y&&v&&v(e.target.value)}}),i&&d()("label",{for:r,class:I||o?"active":""},i),f&&d()("span.helper-text",f),y&&e.isOpen&&[d()(".modal-overlay",{style:{zIndex:1002,display:"block",opacity:.5},onclick:()=>g()}),d()(".modal.timepicker-modal.open",{style:{zIndex:1003,display:"block",opacity:1,top:"10%",transform:"scaleX(1) scaleY(1)"}},d()(b,{showClearBtn:w,clearLabel:E,closeLabel:T,doneLabel:"OK"}))]])}}};class ev{constructor(e,t={}){this.el=e,this.options=Object.assign(Object.assign({},ev.defaults),t),this.state={originalOffset:this.el.getBoundingClientRect().top+window.pageYOffset},this.el.M_Pushpin=this,this._setupEventHandlers(),this._updateElementPosition()}static getInstance(e){return e.M_Pushpin}destroy(){this.el.style.position="",this.el.style.top="",this.el.style.left="",this._removeEventHandlers(),this.el.M_Pushpin=void 0}_setupEventHandlers(){this._updateElementPositionBound=this._updateElementPosition.bind(this),window.addEventListener("scroll",this._updateElementPositionBound),window.addEventListener("resize",this._updateElementPositionBound)}_removeEventHandlers(){window.removeEventListener("scroll",this._updateElementPositionBound),window.removeEventListener("resize",this._updateElementPositionBound)}_updateElementPosition(){let e=window.pageYOffset;e>this.state.originalOffset-this.options.offset?this.options.bottom!==1/0&&e>this.options.bottom?(this._removePinClasses(),this.el.classList.add("pin-bottom"),this.el.style.position="absolute",this.el.style.top=this.options.bottom-this.el.offsetHeight+"px",this.el.style.left="",this.options.onPositionChange&&this.options.onPositionChange("pin-bottom")):(this._removePinClasses(),this.el.classList.add("pinned"),this.el.style.position="fixed",this.el.style.top=this.options.top+"px",this.el.style.left=this.el.getBoundingClientRect().left+"px",this.options.onPositionChange&&this.options.onPositionChange("pinned")):(this._removePinClasses(),this.el.classList.add("pin-top"),this.el.style.position="",this.el.style.top="",this.el.style.left="",this.options.onPositionChange&&this.options.onPositionChange("pin-top"))}_removePinClasses(){this.el.classList.remove("pin-top"),this.el.classList.remove("pinned"),this.el.classList.remove("pin-bottom")}_updatePosition(){this.state.originalOffset=this.el.getBoundingClientRect().top+window.pageYOffset,this._updateElementPosition()}}ev.defaults={top:0,bottom:1/0,offset:0,onPositionChange:void 0};let eb=()=>({view:({attrs:{id:e,groupId:t,label:n,onchange:r,className:i="col s12",checked:o,disabled:a,inputId:l}})=>{let s=l||`${t}-${e}`;return d()("p",{className:i},d()("label",{for:s},[d()("input[type=radio][tabindex=0]",{id:s,name:t,disabled:a,checked:o,onclick:r?()=>r(e):void 0}),d()("span",d().trust(n))]))}}),ey=()=>{let e={groupId:f(),componentId:"",internalCheckedId:void 0},t=e=>void 0!==e.checkedId&&"function"==typeof e.onchange;return{oninit:({attrs:n})=>{e.componentId=n.id||f();let r=t(n);void 0===n.checkedId||r||n.disabled||console.warn("RadioButtons component received 'checkedId' prop without 'onchange' handler. Use 'defaultCheckedId' for uncontrolled components or add 'onchange' for controlled components."),r||(e.internalCheckedId=n.defaultCheckedId)},view:({attrs:n})=>{var r,i;let o,{checkedId:a,newRow:l,className:s="col s12",label:c="",disabled:u,description:p,options:f,isMandatory:h,checkboxClass:g,layout:v="vertical",onchange:b}=n,{groupId:y,componentId:w}=e,E=t(n);o=E?a:u?null!=(r=n.defaultCheckedId)?r:a:null!=(i=e.internalCheckedId)?i:n.defaultCheckedId;let T=t=>{E||(e.internalCheckedId=t),b&&b(t)},k=[l?"clear":"",s].filter(Boolean).join(" ").trim()||void 0,O=f.map(e=>({component:eb,props:Object.assign(Object.assign({},e),{onchange:T,groupId:y,disabled:u||e.disabled,className:g,checked:e.id===o,inputId:`${w}-${e.id}`}),key:e.id})),x=d()(ed,{options:O,layout:v});return d()("div",{id:w,className:k},[c&&d()("h5.form-group-label",c+(h?" *":"")),p&&d()("p.helper-text",d().trust(p)),d()("form",{action:"#"},x)])}}},ew=()=>{let e={id:"",dropdownId:"",isOpen:!1,focusedIndex:-1,inputRef:null,dropdownRef:null,internalSelectedIds:[],isInsideModal:!1,isMultiple:!1},t=e=>void 0!==e.checkedId&&void 0!==e.onchange,n=(e,t)=>t.some(t=>t===e),r=(n,r,i)=>{let o,a=t(i),l=a?void 0!==i.checkedId?Array.isArray(i.checkedId)?i.checkedId:[i.checkedId]:[]:e.internalSelectedIds;r?o=l.includes(n)?l.filter(e=>e!==n):[...l,n]:(o=[n],e.isOpen=!1),a||(e.internalSelectedIds=o),i.onchange&&i.onchange(o)},i=t=>{if(!e.isMultiple){e.isOpen=!1,d().redraw();return}let n=t.target,r=n.closest(".input-field.select-space"),i=e.isInsideModal&&e.dropdownRef&&(e.dropdownRef.contains(n)||n===e.dropdownRef);r||i||(e.isOpen=!1),d().redraw()},o=(t,i,o,a)=>[a&&d()("li.disabled",{tabindex:0},d()("span",a)),t.options.filter(e=>!e.group).map(n=>d()("li",Object.assign({class:n.disabled?"disabled":e.focusedIndex===t.options.indexOf(n)?"focused":""},n.disabled?{}:{onclick:()=>{r(n.id,o,t)}}),[n.img&&d()("img",{src:n.img,alt:n.label}),d()("span",[o?d()("label",{for:n.id},d()("input",{id:n.id,type:"checkbox",checked:i.includes(n.id),disabled:!!n.disabled||void 0,onclick:e=>{e.stopPropagation()}}),d()("span",n.label)):d()("span",n.label)].filter(Boolean))])),Object.entries(t.options.filter(e=>e.group).reduce((e,t)=>{let n=t.group;return e[n]||(e[n]=[]),e[n].push(t),e},{})).map(([a,l])=>[d()("li.optgroup",{tabindex:0},d()("span",a)),...l.map(a=>d()("li",Object.assign({class:`optgroup-option${a.disabled?" disabled":""}${n(a.id,i)?" selected":""}${e.focusedIndex===t.options.indexOf(a)?" focused":""}`},a.disabled?{}:{onclick:e=>{e.stopPropagation(),r(a.id,o,t)}}),[a.img&&d()("img",{src:a.img,alt:a.label}),d()("span",[o?d()("label",{for:a.id},d()("input",{id:a.id,type:"checkbox",checked:i.includes(a.id),disabled:!!a.disabled||void 0,onclick:e=>{e.stopPropagation()}}),d()("span",a.label)):d()("span",a.label)].filter(Boolean))]))]).reduce((e,t)=>e.concat(t),[])];return{oninit:({attrs:n})=>{e.id=n.id||f(),e.dropdownId=`${e.id}-dropdown`;let r=t(n);void 0===n.checkedId||r||n.disabled||console.warn("Select component received 'checkedId' prop without 'onchange' handler. Use 'defaultCheckedId' for uncontrolled components or add 'onchange' for controlled components."),r||(e.internalSelectedIds=void 0!==n.defaultCheckedId?Array.isArray(n.defaultCheckedId)?n.defaultCheckedId:[n.defaultCheckedId]:[]),document.addEventListener("click",i)},oncreate:({dom:t})=>{e.isInsideModal=!!t.closest(".modal")},onremove:()=>{if(document.removeEventListener("click",i),e.isInsideModal&&e.dropdownRef){let t=document.getElementById(e.dropdownId);t&&t.parentNode&&t.parentNode.removeChild(t)}},view:({attrs:i})=>{var a;let l,s=t(i),{newRow:c,className:u="col s12",key:p,options:f=[],multiple:h=!1,label:g,helperText:y,placeholder:w="",isMandatory:E,iconName:T,style:k,disabled:O}=i;if(e.isMultiple=h,s)l=void 0!==i.checkedId?Array.isArray(i.checkedId)?i.checkedId:[i.checkedId]:[];else if(O){let e=null!=(a=i.defaultCheckedId)?a:i.checkedId;l=void 0!==e?Array.isArray(e)?e:[e]:[]}else l=e.internalSelectedIds;let x=c?`${u} clear`:u,S=f.filter(e=>n(e.id,l));return e.isInsideModal&&((t,n,r,i)=>{if(!e.isInsideModal)return;let a=document.getElementById(e.dropdownId);if(a&&a.remove(),!e.isOpen||!e.inputRef)return;let l=document.createElement("div");l.id=e.dropdownId,document.body.appendChild(l);let s=d()("ul.dropdown-content.select-dropdown",{tabindex:0,style:(e=>{if(!e)return{};let t=e.getBoundingClientRect(),n=window.innerHeight,r=n-t.bottom,i=t.top,o=r<200&&i>r;return{position:"fixed",top:o?"auto":`${t.bottom}px`,bottom:o?`${n-t.top}px`:"auto",left:`${t.left}px`,width:`${t.width}px`,zIndex:1e4,maxHeight:o?`${i-20}px`:`${r-20}px`,overflow:"auto",display:"block",opacity:1}})(e.inputRef),oncreate:({dom:t})=>{e.dropdownRef=t},onremove:()=>{e.dropdownRef=null}},o(t,n,r,i));d().render(l,s)})(i,l,h,w),d()(".input-field.select-space",{className:x,key:p,style:k},[T&&d()("i.material-icons.prefix",T),d()(".select-wrapper",{onkeydown:O?void 0:t=>((t,n)=>{let{options:i}=n,o=i.filter(e=>!e.disabled);switch(t.key){case"ArrowDown":if(t.preventDefault(),e.isOpen){let t=Math.min(o.findIndex(t=>t===i[e.focusedIndex])+1,o.length-1),n=o[t];e.focusedIndex=i.findIndex(e=>e===n)}else e.isOpen=!0,e.focusedIndex=0;break;case"ArrowUp":if(t.preventDefault(),e.isOpen){let t=Math.max(o.findIndex(t=>t===i[e.focusedIndex])-1,0),n=o[t];e.focusedIndex=i.findIndex(e=>e===n)}break;case"Enter":case" ":if(t.preventDefault(),e.isOpen&&e.focusedIndex>=0&&e.focusedIndex<i.length){let t=i[e.focusedIndex];t&&!t.disabled&&r(t.id,n.multiple||!1,n)}else e.isOpen||(e.isOpen=!0,e.focusedIndex=0);break;case"Escape":t.preventDefault(),e.isOpen=!1,e.focusedIndex=-1}})(t,i),tabindex:O?-1:0,"aria-expanded":e.isOpen?"true":"false","aria-haspopup":"listbox","aria-controls":e.dropdownId,role:"combobox"},[d()("input[type=text][readonly=true].select-dropdown.dropdown-trigger",{id:e.id,value:S.length>0?S.map(e=>e.label||e.id).join(", "):w,oncreate:({dom:t})=>{e.inputRef=t},onclick:t=>{t.preventDefault(),t.stopPropagation(),O||(e.isOpen=!e.isOpen)}}),e.isOpen&&!e.isInsideModal&&d()("ul.dropdown-content.select-dropdown",{tabindex:0,oncreate:({dom:t})=>{e.dropdownRef=t},onremove:()=>{e.dropdownRef=null},style:((e,t=!1,n,r=!1)=>{let i;if(!e)return{display:"block",opacity:1,position:"absolute",top:t?0:"100%",left:"0",zIndex:1e3,width:"100%"};let o=e.getBoundingClientRect(),a=window.innerHeight,l=200;if(n){let e=new Set,t=0;n.filter(e=>!e.divider).forEach(n=>{t++,n.group&&e.add(n.group)}),l=52*t+52*e.size}let s=a-o.bottom,c=o.top,d=s<l&&c>s,u=d?c:s;d&&(u=o.top-10);let p=l>u,f=p?u:l;if(d){let e=o.top;i=f<=e?12-f+52*!!r:-e+5}else i=t?0:"100%";let h={display:"block",opacity:1,position:"absolute",top:"number"==typeof i?`${i}px`:i,left:"0",zIndex:1e3,width:`${o.width}px`};return p&&(h.maxHeight=`${f}px`,h.overflowY="auto"),h})(e.inputRef,!0,f)},o(i,l,h,w)),d()(L,{name:"caret",direction:"down",class:"caret"})]),g&&d()(v,{id:e.id,label:g,isMandatory:E}),y&&d()(b,{helperText:y})])}}},eE=()=>{let e={id:f(),checked:!1};return{oninit:({attrs:{checked:t}})=>{e.checked=t||!1},view:({attrs:t})=>{let{checked:n,label:r,left:i,right:o,disabled:a,newRow:l,onchange:s,isMandatory:c,className:u="col s12",id:f=e.id}=t,h=p(t,["checked","label","left","right","disabled","newRow","onchange","isMandatory","className","id"]),g=["input-field",l?"clear":"",u].filter(Boolean).join(" ").trim();return d()("div",{className:g,onclick:e=>{e.preventDefault(),s&&s(!n)}},[r&&d()(v,{label:r||"",id:f,isMandatory:c,className:"active"}),d()(".switch",h,d()("label",[d()("span",i||"Off"),d()("input[type=checkbox]",{id:f,disabled:a,checked:n}),d()("span.lever"),d()("span",o||"On")]))])}}},eT=()=>{let e=()=>e=>{let t=n(e.title,e.id);return Object.assign(Object.assign({},e),{tabId:t,anchorId:`anchor-${t}`})},t={activeTabId:"",isDragging:!1,startX:0,translateX:0,indicatorStyle:{left:"0px",width:"0px"},lastIndicatorUpdate:""},n=(e,t)=>t||e.replace(/ /g,"").toLowerCase(),r=()=>{let e=document.getElementById(t.activeTabId);if(e){let n=e.closest(".tabs");if(n){let r=n.getBoundingClientRect(),i=e.getBoundingClientRect(),o=`${i.left-r.left}px`,a=`${i.width}px`;(t.indicatorStyle.left!==o||t.indicatorStyle.width!==a)&&(t.indicatorStyle={left:o,width:a})}}},i=e=>{e.touches&&0!==e.touches.length&&(t.isDragging=!0,t.startX=e.touches[0].clientX)},o=(e,n)=>{let r=n?e.find(e=>e.tabId===n):void 0;if(r)return t.activeTabId=r.tabId,r;let i=t.activeTabId&&e.find(e=>e.tabId===t.activeTabId);if(i)return i;let o=e.find(e=>!e.disabled&&!e.href);if(o)return t.activeTabId=o.tabId,o};return{oninit:({attrs:t})=>{o(t.tabs.map(e()),t.selectedTabId)},oncreate:()=>{r()},view:({attrs:a})=>{let{tabWidth:l,tabs:s,className:c,style:u,swipeable:p=!1}=a,f=["fill"===l?"tabs-fixed-width":"",c].filter(Boolean).join(" ").trim()||void 0,h=s.map(e()),g=o(h,a.selectedTabId);return r(),d()(".row",[d()(".col.s12",d()("ul.tabs",{className:f,style:u},[...h.map(e=>{let{className:n,title:r,anchorId:i,tabId:o,disabled:c,target:u,href:p}=e,f=["tab","fixed"===l?`col s${Math.floor(12/s.length)}`:"",n].filter(Boolean).join(" ").trim();return d()("li",{key:o,id:o,className:f,disabled:c},d()("a",{id:i,className:e.tabId===t.activeTabId?"active":void 0,target:u,href:p||`#${i}`,onclick:c||p?void 0:e=>{var n;e.preventDefault(),n=e.target,console.log({state:t,tabId:o}),t.activeTabId!==o&&(t.activeTabId=o,a.onShow&&a.onShow(n),a.onTabChange&&a.onTabChange(o))},style:c?{opacity:"0.6",cursor:"not-allowed"}:void 0},r))}),d()("li.indicator",{key:"indicator",style:{display:t.activeTabId?"block":"none",left:t.indicatorStyle.left,width:t.indicatorStyle.width,transition:"left 0.35s ease, width 0.35s ease"}})]),g&&d()(".col.s12",{ontouchstart:p?i:void 0,ontouchend:p?e=>((e,r)=>{if(!t.isDragging||!e.changedTouches||0===e.changedTouches.length)return;let i=e.changedTouches[0].clientX-t.startX;if(Math.abs(i)>50){let e=r.tabs.findIndex(e=>n(e.title,e.id)===t.activeTabId);if(i>0&&e>0){let i=r.tabs[e-1];if(!i.disabled&&!i.href){let e=n(i.title,i.id);t.activeTabId=e,r.onTabChange&&r.onTabChange(e)}}else if(i<0&&e<r.tabs.length-1){let i=r.tabs[e+1];if(!i.disabled&&!i.href){let e=n(i.title,i.id);t.activeTabId=e,r.onTabChange&&r.onTabChange(e)}}}t.isDragging=!1,t.translateX=0})(e,a):void 0,style:p?{touchAction:"pan-y"}:void 0},d()(".tab-content",{className:g.contentClass},g.vnode)))])}}};class ek{constructor(e={}){this.options=Object.assign(Object.assign({},ek.defaults),e),this.state={panning:!1,timeRemaining:this.options.displayLength,startingXPos:0,xPos:0,velocityX:0,time:0,deltaX:0,wasSwiped:!1},0===ek._toasts.length&&ek._createContainer(),ek._toasts.push(this),this.el=this._createToast(),this._animateIn(),this._setTimer()}static getInstance(e){return e.M_Toast}static _createContainer(){let e=document.createElement("div");e.setAttribute("id","toast-container"),e.addEventListener("touchstart",ek._onDragStart),e.addEventListener("touchmove",ek._onDragMove),e.addEventListener("touchend",ek._onDragEnd),e.addEventListener("mousedown",ek._onDragStart),document.addEventListener("mousemove",ek._onDragMove),document.addEventListener("mouseup",ek._onDragEnd),document.body.appendChild(e),ek._container=e}static _removeContainer(){document.removeEventListener("mousemove",ek._onDragMove),document.removeEventListener("mouseup",ek._onDragEnd),ek._container&&(ek._container.remove(),ek._container=null)}static _xPos(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}static dismissAll(){ek._toasts.forEach(e=>e.dismiss())}_createToast(){let e=document.createElement("div");e.classList.add("toast"),this.options.classes&&e.classList.add(...this.options.classes.split(" "));let t=this.options.html;return"object"==typeof t&&t&&"nodeType"in t?e.appendChild(t):e.innerHTML=t,e.M_Toast=this,ek._container.appendChild(e),e}_animateIn(){this.el.style.cssText=`
      transform: translateY(35px);
      opacity: 0;
      transition: transform ${this.options.inDuration}ms cubic-bezier(0.215, 0.61, 0.355, 1),
                  opacity ${this.options.inDuration}ms cubic-bezier(0.215, 0.61, 0.355, 1);
    `,setTimeout(()=>{this.el.style.transform="translateY(0)",this.el.style.opacity="1"},10)}_setTimer(){this.state.timeRemaining!==1/0&&(this.state.counterInterval=window.setInterval(()=>{this.state.panning||(this.state.timeRemaining-=20),this.state.timeRemaining<=0&&this.dismiss()},20))}dismiss(){this.state.counterInterval&&window.clearInterval(this.state.counterInterval);let e=this.el.offsetWidth*this.options.activationPercent;this.state.wasSwiped&&(this.el.style.transition="transform .05s, opacity .05s",this.el.style.transform=`translateX(${e}px)`,this.el.style.opacity="0"),this.el.style.cssText+=`
      transition: opacity ${this.options.outDuration}ms cubic-bezier(0.165, 0.84, 0.44, 1),
                  margin-top ${this.options.outDuration}ms cubic-bezier(0.165, 0.84, 0.44, 1);
      opacity: 0;
      margin-top: -40px;
    `,setTimeout(()=>{this.options.completeCallback&&this.options.completeCallback(),this.el.remove();let e=ek._toasts.indexOf(this);e>-1&&ek._toasts.splice(e,1),0===ek._toasts.length&&ek._removeContainer()},this.options.outDuration)}}ek._toasts=[],ek._container=null,ek._draggedToast=null,ek.defaults={html:"",displayLength:4e3,inDuration:300,outDuration:375,classes:"",completeCallback:void 0,activationPercent:.8},ek._onDragStart=e=>{let t=e.target.closest(".toast");if(t){let n=t.M_Toast;n&&(n.state.panning=!0,ek._draggedToast=n,n.el.classList.add("panning"),n.el.style.transition="",n.state.startingXPos=ek._xPos(e),n.state.time=Date.now(),n.state.xPos=ek._xPos(e))}},ek._onDragMove=e=>{if(ek._draggedToast){e.preventDefault();let t=ek._draggedToast;t.state.deltaX=Math.abs(t.state.xPos-ek._xPos(e)),t.state.xPos=ek._xPos(e),t.state.velocityX=t.state.deltaX/(Date.now()-t.state.time),t.state.time=Date.now();let n=t.state.xPos-t.state.startingXPos,r=t.el.offsetWidth*t.options.activationPercent;t.el.style.transform=`translateX(${n}px)`,t.el.style.opacity=String(1-Math.abs(n/r))}},ek._onDragEnd=()=>{if(ek._draggedToast){let e=ek._draggedToast;e.state.panning=!1,e.el.classList.remove("panning"),Math.abs(e.state.xPos-e.state.startingXPos)>e.el.offsetWidth*e.options.activationPercent||e.state.velocityX>1?(e.state.wasSwiped=!0,e.dismiss()):(e.el.style.transition="transform .2s, opacity .2s",e.el.style.transform="",e.el.style.opacity=""),ek._draggedToast=null}};let eO=e=>new ek(e);class ex{constructor(e,t={}){this.el=e,this.options=Object.assign(Object.assign({},ex.defaults),t),this.state={isOpen:!1,isHovered:!1,isFocused:!1,xMovement:0,yMovement:0},this.el.M_Tooltip=this,this._appendTooltipEl(),this._setupEventHandlers()}static getInstance(e){return e.M_Tooltip}destroy(){this.tooltipEl.remove(),this._removeEventHandlers(),this.el.M_Tooltip=void 0}_appendTooltipEl(){let e=document.createElement("div");e.classList.add("material-tooltip"),this.tooltipEl=e;let t=document.createElement("div");t.classList.add("tooltip-content"),t.innerHTML=this.options.html||"",e.appendChild(t),document.body.appendChild(e)}_updateTooltipContent(){let e=this.tooltipEl.querySelector(".tooltip-content");e&&(e.innerHTML=this.options.html||"")}_setupEventHandlers(){this._handleMouseEnterBound=this._handleMouseEnter.bind(this),this._handleMouseLeaveBound=this._handleMouseLeave.bind(this),this._handleFocusBound=this._handleFocus.bind(this),this._handleBlurBound=this._handleBlur.bind(this),this.el.addEventListener("mouseenter",this._handleMouseEnterBound),this.el.addEventListener("mouseleave",this._handleMouseLeaveBound),this.el.addEventListener("focus",this._handleFocusBound,!0),this.el.addEventListener("blur",this._handleBlurBound,!0)}_removeEventHandlers(){this.el.removeEventListener("mouseenter",this._handleMouseEnterBound),this.el.removeEventListener("mouseleave",this._handleMouseLeaveBound),this.el.removeEventListener("focus",this._handleFocusBound,!0),this.el.removeEventListener("blur",this._handleBlurBound,!0)}open(e=!0){this.state.isOpen||(this.state.isOpen=!0,this.options=Object.assign(Object.assign({},this.options),this._getAttributeOptions()),this._updateTooltipContent(),this._setEnterDelayTimeout(e))}close(){this.state.isOpen&&(this.state.isHovered=!1,this.state.isFocused=!1,this.state.isOpen=!1,this._setExitDelayTimeout())}_setExitDelayTimeout(){this.state.exitDelayTimeout&&clearTimeout(this.state.exitDelayTimeout),this.state.exitDelayTimeout=window.setTimeout(()=>{this.state.isHovered||this.state.isFocused||this._animateOut()},this.options.exitDelay)}_setEnterDelayTimeout(e){this.state.enterDelayTimeout&&clearTimeout(this.state.enterDelayTimeout),this.state.enterDelayTimeout=window.setTimeout(()=>{(this.state.isHovered||this.state.isFocused||e)&&this._animateIn()},this.options.enterDelay)}_positionTooltip(){let e=this.el,t=this.tooltipEl,n=e.offsetHeight,r=e.offsetWidth,i=t.offsetHeight,o=t.offsetWidth,a=this.options.margin;this.state.xMovement=0,this.state.yMovement=0;let l=e.getBoundingClientRect(),s=l.top+window.pageYOffset,c=l.left+window.pageXOffset;switch(this.options.position){case"top":s+=-i-a,c+=r/2-o/2,this.state.yMovement=-this.options.transitionMovement;break;case"right":s+=n/2-i/2,c+=r+a,this.state.xMovement=this.options.transitionMovement;break;case"left":s+=n/2-i/2,c+=-o-a,this.state.xMovement=-this.options.transitionMovement;break;default:s+=n+a,c+=r/2-o/2,this.state.yMovement=this.options.transitionMovement}let d=this._repositionWithinScreen(c,s,o,i);this.tooltipEl.style.top=d.y+"px",this.tooltipEl.style.left=d.x+"px"}_repositionWithinScreen(e,t,n,r){let i=window.pageXOffset,o=window.pageYOffset,a=e-i,l=t-o,s=this.options.margin+this.options.transitionMovement;return a<s?a=s:a+n>window.innerWidth-s&&(a=window.innerWidth-n-s),l<s?l=s:l+r>window.innerHeight-s&&(l=window.innerHeight-r-s),{x:a+i,y:l+o}}_animateIn(){this._positionTooltip(),this.tooltipEl.style.visibility="visible",this.tooltipEl.style.cssText+=`
      opacity: 0;
      transform: translate(0, 0);
      transition: opacity ${this.options.inDuration}ms cubic-bezier(0.215, 0.61, 0.355, 1),
                  transform ${this.options.inDuration}ms cubic-bezier(0.215, 0.61, 0.355, 1);
    `,setTimeout(()=>{this.tooltipEl.style.opacity="1",this.tooltipEl.style.transform=`translate(${this.state.xMovement}px, ${this.state.yMovement}px)`},10)}_animateOut(){this.tooltipEl.style.cssText+=`
      transition: opacity ${this.options.outDuration}ms cubic-bezier(0.215, 0.61, 0.355, 1),
                  transform ${this.options.outDuration}ms cubic-bezier(0.215, 0.61, 0.355, 1);
      opacity: 0;
      transform: translate(0, 0);
    `,setTimeout(()=>{this.tooltipEl.style.visibility="hidden"},this.options.outDuration)}_handleMouseEnter(){this.state.isHovered=!0,this.state.isFocused=!1,this.open(!1)}_handleMouseLeave(){this.state.isHovered=!1,this.state.isFocused=!1,this.close()}_handleFocus(){this.state.isFocused=!0,this.open(!1)}_handleBlur(){this.state.isFocused=!1,this.close()}_getAttributeOptions(){let e={},t=this.el.getAttribute("data-tooltip"),n=this.el.getAttribute("data-position");return t&&(e.html=t),n&&["top","bottom","left","right"].includes(n)&&(e.position=n),e}}ex.defaults={exitDelay:200,enterDelay:0,html:null,margin:5,inDuration:250,outDuration:200,position:"bottom",transitionMovement:10};let eS={theme:"Theme:",light:"Light",dark:"Dark",auto:"Auto",lightTitle:"Light theme",darkTitle:"Dark theme",autoTitle:"Auto theme (system preference)",switchToDark:"Switch to dark theme",switchToLight:"Switch to light theme"};class eI{static setTheme(e){this.currentTheme=e;let t=document.documentElement;"auto"===e?t.removeAttribute("data-theme"):t.setAttribute("data-theme",e);try{localStorage.setItem("mm-theme",e)}catch(e){}}static getTheme(){return this.currentTheme}static getEffectiveTheme(){return"auto"!==this.currentTheme?this.currentTheme:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}static initialize(){let e="auto";try{let t=localStorage.getItem("mm-theme");t&&["light","dark","auto"].includes(t)&&(e=t)}catch(e){}this.setTheme(e)}static toggle(){let e=this.getEffectiveTheme();this.setTheme("light"===e?"dark":"light")}}eI.currentTheme="auto";let eL=()=>({oninit:()=>{"undefined"!=typeof window&&eI.initialize()},view:({attrs:e={}})=>{let t=eI.getEffectiveTheme(),n=Object.assign(Object.assign({},eS),e.i18n);return d()("button.btn-flat.theme-toggle",{type:"button",class:e.className||"",onclick:()=>{eI.toggle()},title:"light"===t?n.switchToDark:n.switchToLight},[d()(L,{name:"light"===t?"dark_mode":"light_mode"})])}}),eA=()=>{let e,t=async(t,n)=>{let r=n[t];if(!r||!r.validate)return!0;e.isValidating=!0;try{let n=await r.validate();return n?(e.completedSteps.add(t),e.errorSteps.delete(t)):(e.errorSteps.add(t),e.completedSteps.delete(t)),n}catch(n){return e.errorSteps.add(t),e.completedSteps.delete(t),!1}finally{e.isValidating=!1}},n=async(n,r)=>{let{linear:i=!0,onStepChange:o,steps:a}=r;if(n<0||n>=a.length||a[n].disabled)return!1;if(i&&n>e.currentStep){for(let r=e.currentStep;r<n;r++)if(!await t(r,a)&&!a[r].optional)return!1}if(n>e.currentStep&&!await t(e.currentStep,a)&&!a[e.currentStep].optional)return!1;let l=e.currentStep;return e.currentStep=n,o&&l!==n&&o(n,a[n].id||`step-${n}`),!0},r=async t=>{let{steps:r}=t;if(e.currentStep===r.length-1){t.onComplete&&t.onComplete();return}await n(e.currentStep+1,t)};return{oninit:({attrs:t})=>{e={id:f(),currentStep:t.currentStep||0,isValidating:!1,completedSteps:new Set,errorSteps:new Set}},onbeforeupdate:({attrs:t})=>{"number"==typeof t.currentStep&&t.currentStep!==e.currentStep&&(e.currentStep=Math.max(0,t.currentStep))},view:({attrs:t})=>{let{steps:i,showStepNumbers:o=!0,className:a="",showNavigation:l=!0,labels:s={},orientation:c="horizontal",allowHeaderNavigation:u=!1}=t;e.currentStep>=i.length&&(e.currentStep=Math.max(0,i.length-1));let p=i[e.currentStep],f=0===e.currentStep,h=e.currentStep===i.length-1,g=(null==p?void 0:p.vnode)?p.vnode():null;return d()(".wizard",{class:`${c} ${a}`},[d()(".wizard-header",[d()(".wizard-steps",i.map((r,a)=>{let l=a===e.currentStep,p=e.completedSteps.has(a),f=e.errorSteps.has(a);return d()(".wizard-step",{class:[l?"active":"",p?"completed":"",f?"error":"",r.disabled?"disabled":"",r.optional?"optional":""].filter(Boolean).join(" ")||void 0,onclick:u&&!r.disabled?()=>n(a,t):void 0},[d()(".wizard-step-indicator",[p?d()("i.material-icons","check"):f?d()("i.material-icons","error"):r.icon?d()("i.material-icons",r.icon):o?d()("span.wizard-step-number",a+1):null]),d()(".wizard-step-content",[d()(".wizard-step-title",r.title),r.subtitle&&d()(".wizard-step-subtitle",r.subtitle),r.optional&&d()(".wizard-step-optional",s.optional||"Optional")]),"horizontal"===c&&a<i.length-1&&d()(".wizard-step-connector")])}))]),d()(".wizard-body",[g&&d()(".wizard-step-panel",{key:(null==p?void 0:p.id)||`step-${e.currentStep}`},g)]),l&&d()(".wizard-footer",[d()(".wizard-navigation",[!f&&d()("button.btn-flat.wizard-btn-previous",{onclick:()=>{n(e.currentStep-1,t)},disabled:e.isValidating},s.previous||"Previous"),p&&p.optional&&!h&&d()("button.btn-flat.wizard-btn-skip",{onclick:()=>(t=>{let{steps:r}=t,i=r[e.currentStep];i&&i.optional&&n(e.currentStep+1,t)})(t),disabled:e.isValidating},s.skip||"Skip"),d()("button.btn.wizard-btn-next",{onclick:()=>r(t),disabled:e.isValidating,class:h?"wizard-btn-complete":""},[e.isValidating&&d()("i.material-icons.left","hourglass_empty"),h?s.complete||"Complete":s.next||"Next"])])])])}}},eC=()=>({view:({attrs:e})=>{let{node:t,level:n,isSelected:r,isExpanded:i,isFocused:o,showConnectors:a,iconType:l,selectionMode:s,onToggleExpand:c,onToggleSelect:d,onFocus:u}=e,p=t.children&&t.children.length>0,f=24*n;return m("li.tree-node",{class:[r&&"selected",o&&"focused",t.disabled&&"disabled",p&&"has-children",e.isLastInBranch&&"tree-last-in-branch"].filter(Boolean).join(" ")||void 0,"data-node-id":t.id,"data-level":n},[m(".tree-node-content",{style:{paddingLeft:`${f}px`},onclick:t.disabled?void 0:()=>{"none"!==s&&d(t.id),u(t.id)},onkeydown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),t.disabled||"none"===s||d(t.id))},tabindex:t.disabled?-1:0,role:"multiple"===s?"option":"treeitem","aria-selected":"none"!==s?r.toString():void 0,"aria-expanded":p?i.toString():void 0,"aria-disabled":t.disabled?"true":void 0},[a&&n>0&&m(".tree-connectors",Array.from({length:n},(e,t)=>m(".tree-connector",{key:t,style:{left:`${24*t+12}px`}}))),p?m(".tree-expand-icon",{onclick:e=>{e.stopPropagation(),t.disabled||c(t.id)},class:l},["plus-minus"===l?m("span.tree-plus-minus",i?"−":"+"):"triangle"===l?m("span.tree-triangle",{class:i?"expanded":void 0},"▶"):"chevron"===l?m(L,{name:"chevron",direction:i?"down":"right",class:"tree-chevron-icon"}):m(L,{name:"caret",direction:i?"down":"right",class:"tree-caret-icon"})]):m(".tree-expand-spacer"),"multiple"===s&&m(".tree-selection-indicator",[m("input[type=checkbox]",{checked:r,disabled:t.disabled,onchange:()=>{t.disabled||d(t.id)},onclick:e=>e.stopPropagation()})]),t.icon&&m("i.tree-node-icon.material-icons",t.icon),m("span.tree-node-label",t.label)]),p&&i&&m("ul.tree-children",{role:"group","aria-expanded":"true"},t.children.map((t,r)=>{var i,o,p,f,h,g;let v=null!=(o=null==(i=e.treeState)?void 0:i.selectedIds.has(t.id))&&o,b=null!=(f=null==(p=e.treeState)?void 0:p.expandedIds.has(t.id))&&f,y=(null==(h=e.treeState)?void 0:h.focusedNodeId)===t.id,w=[...e.currentPath||[],r],E=null!=(g=e.treeAttrs)&&!!g.data&&((e,t)=>{let n=t;for(let t=0;t<e.length;t++){let r=e[t];if(r!==n.length-1)return!1;if(t<e.length-1){let e=n[r];e.children&&(n=e.children)}}return!0})(w,e.treeAttrs.data);return m(eC,{key:t.id,node:t,level:n+1,isSelected:v,isExpanded:b,isFocused:y,showConnectors:a,iconType:l,selectionMode:s,onToggleExpand:c,onToggleSelect:d,onFocus:u,isLastInBranch:E,currentPath:w,treeState:e.treeState,treeAttrs:e.treeAttrs})}))])}});var eN=[{threshold:0,color:"#ddeced"},{threshold:1,color:"#FF7800"},{threshold:2,color:"#ffff00"},{threshold:3,color:"#ff0000"}],eD={version:1,lastUpdate:new Date().valueOf(),scenarios:[],scenario:{id:"demo1",label:"Demo",desc:"Demo scenario",includeDecisionSupport:!1,hideInconsistentValues:!0,inconsistencies:{},categories:[{id:"threat",label:"Threat",componentIds:["ThreatDirection","Impact","Motivation","ModusOperandiDuringExecution","Equipment","Responsibility"]},{id:"context",label:"Context",componentIds:["WeatherType","WeatherBehaviour","TypeOfObject","AvailableBudget","OpenCompartments","Location"]}],components:[{id:"ThreatDirection",label:"Threat direction",values:[{id:"df62efe6",label:"Hannibal"},{id:"70630364",label:"The Romans"},{id:"82d5d4f5",label:"Herbert Hoover"}]},{id:"Impact",label:"Impact",values:[{id:"5c532a23",label:"Low"},{id:"16ad9a77",label:"Medium"},{id:"b894abb6",label:"High"}]},{id:"Motivation",label:"Motivation",values:[{id:"f4ab7a7a",label:"Money"},{id:"ff550f8f",label:"Justice"},{id:"22b4867e",label:"Revenge"}]},{id:"ModusOperandiDuringExecution",label:"Modus operandi during execution",values:[{id:"7ed25fa5",label:"Sniper attack",type:"ModusOperandiDuringExecution"},{id:"1f9b68c9",label:"Kidnapping",type:"ModusOperandiDuringExecution"},{id:"5cc5e352",label:"Singing",type:"ModusOperandiDuringExecution"}]},{id:"Equipment",label:"Equipment",values:[{id:"b4218a1f",label:"None"},{id:"8f6185f7",label:"Drone"},{id:"cb02878d",label:"Bomb"},{id:"9d645efb",label:"Helicopter"},{id:"3a4398c7",label:"Hammer"}]},{id:"Responsibility",label:"Responsibility",values:[{id:"f44d22be",label:"Private"},{id:"20f9a6ed",label:"Public"}]},{id:"WeatherType",label:"Weather type",values:[{id:"b9fe2b73",label:"Rainy"},{id:"478581c1",label:"Sunny"},{id:"b855ac10",label:"Windy"},{id:"24c73f36",label:"Cloudy"}]},{id:"WeatherBehaviour",label:"Weather behaviour",values:[{id:"0ff8041e",label:"Stable"},{id:"894a9bcb",label:"Changing"}]},{id:"TypeOfObject",label:"Type of object",values:[{id:"29a303b3",label:"Church"},{id:"2e7df143",label:"Park"},{id:"e11282fb",label:"Palace"},{id:"9a1b3256",label:"Airport"}]},{id:"AvailableBudget",label:"Available budget",values:[{id:"90e1ba48",label:"Knowledge"},{id:"f961174c",label:"Water"}]},{id:"OpenCompartments",label:"Open compartments",values:[{id:"01c3940a",label:"Open"},{id:"56b7fa45",label:"Closed"}]},{id:"Location",label:"Location",values:[{id:"ea57f820",label:"Vietnam"},{id:"b8bd8bc3",label:"Washington"},{id:"8fb1e1ab",label:"Buitenpost"}]}],narratives:[],thresholdColors:eN}},eM=function(){return{id:f(),label:"NEW SCENARIO",desc:"",includeDecisionSupport:!1,hideInconsistentValues:!1,inconsistencies:{},categories:[],components:[],narratives:[],thresholdColors:eN}},e_=function(){return{version:1,lastUpdate:new Date().valueOf(),scenarios:[],scenario:eM(),personas:[]}},eR=[e_(),eD],eP=[{id:"airport",name:"Airport",key:"aeroway",value:"aerodrome"},{id:"cafe",name:"Cafe",key:"amenity",value:"bar"},{id:"church",name:"Church",key:"building",value:"church"},{id:"city_square",name:"City square",key:"place",value:"square"},{id:"flats",name:"Flats",key:'"building:levels"',value:'"([6-9]|d{2,})"'},{id:"gas_station",name:"Gas station",key:"amenity",value:"fuel"},{id:"hospital",name:"Hospital",key:"amenity",value:"hospital"},{id:"hotel",name:"Hotel",key:"tourism",value:"hotel"},{id:"palace",name:"Palace",key:"castle_type",value:"palace"},{id:"parking",name:"Parking",key:"amenity",value:"parking"},{id:"restaurant",name:"Restaurant",key:"amenity",value:"restaurant"},{id:"shopping_street",name:"Shopping street",key:"highway",value:"pedestrian"},{id:"stadspoort",name:"Stadspoort",key:"historic",value:"city_gate"},{id:"statue",name:"Statue",key:"memorial",value:"statue"}].map(function(e){return e.id}),ej=[{id:"cook1",img:n.p+"c17103ea2cc7dd72.jpg",label:"Cook 1"},{id:"cook2",img:n.p+"b2d5fba9d32dafca.jpg",label:"Cook 2"},{id:"cook3",img:n.p+"48096cd40fc6c8f4.jpg",label:"Cook 3"},{id:"elderly_man1",img:n.p+"b1fdba939c2f5297.jpg",label:"Elderly man 1"},{id:"elderly_man2",img:n.p+"b5debe6fe4b3afaa.jpg",label:"Elderly man 2"},{id:"elderly_man3",img:n.p+"c0a54ea4c215265b.jpg",label:"Elderly man 3"},{id:"elderly_man4",img:n.p+"ac6f14e91d7cc000.jpg",label:"Elderly man 4"},{id:"farmer1",img:n.p+"ba0a433953d69a08.jpg",label:"Farmer 1"},{id:"farmer2",img:n.p+"6aa44cc8a896a39b.jpg",label:"Farmer 2"},{id:"farmer3",img:n.p+"25d2d2ded0ed6bd2.jpg",label:"Farmer 3"},{id:"female_student1",img:n.p+"8863b9b162df0d4b.jpg",label:"Female student 1"},{id:"female_student2",img:n.p+"2a66fb742825ed15.jpg",label:"Female student 2"},{id:"nurse1",img:n.p+"2903f3ef3d7fd72a.jpg",label:"Nurse 1"},{id:"nurse2",img:n.p+"a367bff23ca073b5.jpg",label:"Nurse 2"},{id:"nurse3",img:n.p+"19a125c7f0ba3fa2.jpg",label:"Nurse 3"},{id:"nurse4",img:n.p+"bba1fa90de604384.jpg",label:"Nurse 4"},{id:"young_mother1",img:n.p+"af8481c371fe65d4.jpg",label:"Young mother 1"},{id:"young_mother2",img:n.p+"48018dc5c5a48420.jpg",label:"Young mother 2"},{id:"young_mother3",img:n.p+"732359e869ab9c7f.jpg",label:"Young mother 3"},{id:"young_mother4",img:n.p+"815dc185f97fe0f0.jpg",label:"Young mother 4"},{id:"elderly_man_wheelchair1",img:n.p+"d5c5fa50c124e713.jpg",label:"Elderly man in wheelchair 1"},{id:"elderly_man_wheelchair2",img:n.p+"63b233d30242a82f.jpg",label:"Elderly man in wheelchair 2"},{id:"elderly_man_wheelchair3",img:n.p+"29563f51b25aeccf.jpg",label:"Elderly man in wheelchair 3"},{id:"middle_aged_male_truck_driver1",img:n.p+"a05b2084c8422157.jpg",label:"Middle-aged male truckdriver 1"},{id:"middle_aged_male_truck_driver2",img:n.p+"30dc14f001d32564.jpg",label:"Middle-aged male truckdriver 2"},{id:"middle_aged_male_truck_driver3",img:n.p+"31f4ec5bc001c757.jpg",label:"Middle-aged male truckdriver 3"},{id:"middle_aged_male_truck_driver4",img:n.p+"dc24f937096fd880.jpg",label:"Middle-aged male truckdriver 4"},{id:"male_indian_student1",img:n.p+"ac78245de3c16d35.jpg",label:"Male Indian student 1"},{id:"male_indian_student2",img:n.p+"0ffecf2e012cd292.jpg",label:"Male Indian student 2"},{id:"male_indian_student3",img:n.p+"8083e6f74664f9d7.jpg",label:"Male Indian student 3"},{id:"male_indian_student4",img:n.p+"f475a19983f3f16e.jpg",label:"Male Indian student 4"},{id:"female_worker_with_laptop1",img:n.p+"0f5cead64acae32f.jpg",label:"Female worker with laptop 1"},{id:"female_worker_with_laptop2",img:n.p+"1b7f3792f2a7e1ae.jpg",label:"Female worker with laptop 2"},{id:"female_worker_with_laptop3",img:n.p+"b9cb6abc844bba28.jpg",label:"Female worker with laptop 3"},{id:"female_worker_with_laptop4",img:n.p+"ca5055f62f785dee.jpg",label:"Female worker with laptop 4"},{id:"families1",img:n.p+"b414869356c66f77.jpg",label:"Families 1"},{id:"families2",img:n.p+"52dc0b012211bb98.jpg",label:"Families 2"},{id:"families3",img:n.p+"933a961b2cc4ccc6.jpg",label:"Families 3"},{id:"families4",img:n.p+"c303e41cff62a1c7.jpg",label:"Families 4"},{id:"families5",img:n.p+"a17c8d1ae56d42b0.jpg",label:"Families 5"},{id:"families6",img:n.p+"cf19dfc144092334.jpg",label:"Families 6"},{id:"families7",img:n.p+"fd9eb7c66db099c8.jpg",label:"Families 7"},{id:"families8",img:n.p+"56060654829facad.jpg",label:"Families 8"},{id:"families9",img:n.p+"b9564e9dfbe51f1d.jpg",label:"Families 9"},{id:"families10",img:n.p+"2bbc81bcce4f948d.jpg",label:"Families 10"},{id:"families11",img:n.p+"20b3f24a471fc2ab.jpg",label:"Families 11"},{id:"families12",img:n.p+"ba5d690ec2286324.jpg",label:"Families 12"},{id:"families13",img:n.p+"c10098320d985597.jpg",label:"Families 13"},{id:"families14",img:n.p+"5e7d4c1aca78dfce.jpg",label:"Families 14"},{id:"families15",img:n.p+"e885f489d7f73419.jpg",label:"Families 15"},{id:"female_speaker1",img:n.p+"c4f3277fa4912730.jpg",label:"Female speaker 1"},{id:"female_speaker2",img:n.p+"b4f38543d0f4fad3.jpg",label:"Female speaker 2"},{id:"female_speaker3",img:n.p+"75430f3874b4d2a3.jpg",label:"Female speaker 3"},{id:"female_speaker4",img:n.p+"705b062d96e89833.jpg",label:"Female speaker 4"},{id:"construction_worker1",img:n.p+"1173a280cc7db935.jpg",label:"Construction worker 1"},{id:"construction_worker2",img:n.p+"d7d2291761e806f7.jpg",label:"Construction worker 2"},{id:"construction_worker3",img:n.p+"65b21c37b85863e4.jpg",label:"Construction worker 3"},{id:"construction_worker4",img:n.p+"925d5acba6a06c43.jpg",label:"Construction worker 4"},{id:"elderly_woman_wheelchair1",img:n.p+"5de0d68bafbc35f6.jpg",label:"Elderly woman in wheelchair 1"},{id:"elderly_woman_wheelchair2",img:n.p+"92e47ed0191af049.jpg",label:"Elderly woman in wheelchair 2"},{id:"elderly_woman_wheelchair3",img:n.p+"e7a42b5c01fab2eb.jpg",label:"Elderly woman in wheelchair 3"},{id:"elderly_woman_wheelchair4",img:n.p+"2eedda4586c2d0f4.jpg",label:"Elderly woman in wheelchair 4"},{id:"female_teacher1",img:n.p+"a1b42cdb8d767016.jpg",label:"Female teacher 1"},{id:"female_teacher2",img:n.p+"a1444c5ba7467f47.jpg",label:"Female teacher 2"},{id:"male_teacher1",img:n.p+"432a5d4490d0d359.jpg",label:"Male teacher 1"},{id:"male_teacher2",img:n.p+"5e17705bb3caace1.jpg",label:"Male teacher 2"},{id:"male_zzp1",img:n.p+"e3191876e312bd1a.jpg",label:"Male worker with laptop"},{id:"male_zzp2",img:n.p+"f7126b8735cda4e7.jpg",label:"Male worker with laptop"},{id:"male_zzp3",img:n.p+"c98b9e495f5b24fa.jpg",label:"Male worker with laptop"},{id:"male_zzp4",img:n.p+"70ca9c5b29427f85.jpg",label:"Male worker with laptop"},{id:"business_woman1",img:n.p+"df4e7a224bdfe8df.jpg",label:"Business woman 1"},{id:"business_woman2",img:n.p+"a1fab39fe8a0c3e6.jpg",label:"Business woman 2"},{id:"business_woman3",img:n.p+"de82680488daf92f.jpg",label:"Business woman 3"},{id:"business_woman4",img:n.p+"d4ef1e1ea05262bf.jpg",label:"Business woman 4"},{id:"climate_girl1",img:n.p+"2cbc15021ccfe071.jpg",label:"Climate girl 1"},{id:"climate_girl2",img:n.p+"b01fde9aa9bd4dbe.jpg",label:"Climate girl 2"},{id:"climate_girl3",img:n.p+"84797a40859fed04.jpg",label:"Climate girl 3"},{id:"climate_girl4",img:n.p+"096fa9e7fcccc9b0.jpg",label:"Climate girl 4"},{id:"taxi_driver1",img:n.p+"9599745fc7af8a66.jpg",label:"Taxi driver 1"},{id:"taxi_driver2",img:n.p+"12de43f34486fb0e.jpg",label:"Taxi driver 2"},{id:"taxi_driver3",img:n.p+"b65e7b542f5220b9.jpg",label:"Taxi driver 3"},{id:"taxi_driver4",img:n.p+"8a07f04c16108db2.jpg",label:"Taxi driver 4"},{id:"tech_guy1",img:n.p+"dbba424353e700a7.jpg",label:"Tech guy 1"},{id:"tech_guy2",img:n.p+"2a2bafda1f141fbd.jpg",label:"Tech guy 2"},{id:"tech_guy3",img:n.p+"8db11414829ba136.jpg",label:"Tech guy 3"},{id:"tech_guy4",img:n.p+"86d2e40850d6267d.jpg",label:"Tech guy 4"},{id:"middleaged_man_suit1",img:n.p+"774b2c7bbd638c55.jpg",label:"Middleaged man in suit 1"},{id:"middleaged_man_suit2",img:n.p+"cb40059f01133457.jpg",label:"Middleaged man in suit 2"},{id:"middleaged_man_suit3",img:n.p+"8c764a5d7c201ddf.jpg",label:"Middleaged man in suit 3"},{id:"middleaged_man_suit4",img:n.p+"9e6a81093a180964.jpg",label:"Middleaged man in suit 4"}];let eH=n.p+"110fb094e6327dbf.svg";var eV=n(5723);function e$(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function eB(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){e$(o,r,i,a,l,"next",e)}function l(e){e$(o,r,i,a,l,"throw",e)}a(void 0)})}}function eU(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var ez=function(){var e,t="undefined"!=typeof window?window:void 0;if(!t)throw Error("indexedDB cannot get window");var n=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB;if("undefined"!=typeof window&&!n)throw Error("indexDB not supported");var r=n.open("ldb",1);r.onsuccess=function(){e=this.result},r.onerror=function(e){console.error("indexedDB request error"),console.error(e)},r.onupgradeneeded=function(t){e=null,(t&&t.target&&t.target.result.createObjectStore("s",{keyPath:"k"})).transaction.oncomplete=function(t){e=t.target.db}};var i={get:function(t){return new Promise(function(n){e?e.transaction("s").objectStore("s").get(t).onsuccess=function(e){n(e.target.result&&e.target.result.v||null)}:setTimeout(function(){return eB(function(){return eU(this,function(e){switch(e.label){case 0:return[4,i.get(t)];case 1:return[2,n.apply(void 0,[e.sent()])]}})})()},50)})},set:function(t,n){return new Promise(function(r){if(!e)return void setTimeout(function(){return eB(function(){return eU(this,function(e){switch(e.label){case 0:return[4,i.set(t,n)];case 1:return[2,r.apply(void 0,[e.sent()])]}})})()},50);var o=e.transaction("s","readwrite");o.oncomplete=function(){return r()},o.objectStore("s").put({k:t,v:n}),o.commit()})},delete:function(t){return new Promise(function(n){e?e.transaction("s","readwrite").objectStore("s").delete(t).onsuccess=function(){n()}:setTimeout(function(){return eB(function(){return eU(this,function(e){switch(e.label){case 0:return[4,i.delete(t)];case 1:return[2,n.apply(void 0,[e.sent()])]}})})()},50)})},list:function(){return new Promise(function(t){e?e.transaction("s").objectStore("s").getAllKeys().onsuccess=function(e){t(e.target.result||null)}:setTimeout(function(){return eB(function(){return eU(this,function(e){switch(e.label){case 0:return[4,i.list()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})()},50)})},getAll:function(){return new Promise(function(t){e?e.transaction("s").objectStore("s").getAll().onsuccess=function(e){t(e.target.result||null)}:setTimeout(function(){return eB(function(){return eU(this,function(e){switch(e.label){case 0:return[4,i.getAll()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})()},50)})},clear:function(){return new Promise(function(t){e?e.transaction("s","readwrite").objectStore("s").clear().onsuccess=function(){t()}:setTimeout(function(){return eB(function(){return eU(this,function(e){switch(e.label){case 0:return[4,i.clear()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})()},50)})}};return i}();let eW=[],eF=[],eG=[],eY=[],eK=[],eZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eq=RegExp(`[${Object.keys(eZ).join("")}]`,"g"),eX=e=>e.replace(eq,e=>eZ[e]),eJ=(e,t)=>{let n=t.trim();return/^<\/?(ul|ol|li|h|p|bl|table|tbody|tr|td|th|caption)/i.test(n)||""===n?`
${t}
`:`
<p>
${n}
</p>
`},eQ=e=>{if(0===e.length)return"";let t="",n=[];for(let r=0;r<e.length;r++){let i=e[r],o=r<e.length-1?e[r+1]:null;for(;n.length>0&&n[n.length-1].level>i.level;){let e=n.pop();e.hasOpenLi&&(t+="</li>"),t+=`</${e.type}>`}if(n.length>0&&n[n.length-1].level===i.level&&n[n.length-1].type!==i.type){let e=n.pop();e.hasOpenLi&&(t+="</li>"),t+=`</${e.type}>`}(0===n.length||n[n.length-1].level<i.level)&&(t+=`<${i.type}>`,n.push({type:i.type,level:i.level,hasOpenLi:!1})),n.length>0&&n[n.length-1].hasOpenLi&&n[n.length-1].level===i.level&&(t+="</li>",n[n.length-1].hasOpenLi=!1),t+=`<li>${i.content}`,n[n.length-1].hasOpenLi=!0,(!o||o.level<=i.level)&&(t+="</li>",n[n.length-1].hasOpenLi=!1)}for(;n.length>0;){let e=n.pop();e.hasOpenLi&&(t+="</li>"),t+=`</${e.type}>`}return t},e0=(e,t,n,r="")=>{let i=n.split("|").filter((e,t,n)=>t>0&&t<n.length-1).map(e=>/:-+:/g.test(e)?"center":/-+:/g.test(e)?"right":/:-+/.test(e)?"left":""),o=e=>{let t=i[e];return t?` align="${t}"`:""},a=t.split("|").slice(1,-1),l=a.map(e=>e.trim()),s=[],c=0;for(let e=0;e<l.length;e++){if(c>0){c--;continue}let t=l[e];if(t&&t.length){let n=1,r=!1;for(let t=e+1;t<l.length&&0===l[t].length;t++)if(""===a[t]){r=!0;break}if(r)for(let t=e+1;t<l.length&&0===l[t].length;t++)n++;n>1?(c=n-1,s.push(`<th${o(e)} colspan="${n}">${t}</th>`)):s.push(`<th${o(e)}>${t}</th>`)}else s.push(`<th${o(e)}></th>`)}return`
<table><tbody><tr>
  ${s.join("\n  ")}
</tr>
${r.split("\n").map(e=>e.trim()).filter(e=>e&&e.length).map(e=>{let t=e.split("|").slice(1,-1),n=t.map(e=>e.trim()),r=[],i=0;for(let e=0;e<n.length;e++){if(i>0){i--;continue}let a=n[e];if(a&&a.length){let l=1,s=!1;for(let r=e+1;r<n.length&&0===n[r].length;r++)if(""===t[r]){s=!0;break}if(s)for(let t=e+1;t<n.length&&0===n[t].length;t++)l++;l>1?(i=l-1,r.push(`<td${o(e)} colspan="${l}">${a}</td>`)):r.push(`<td${o(e)}>${a}</td>`)}else r.push(`<td${o(e)}></td>`)}return`<tr>
  ${r.join("\n  ")}
</tr>
`}).join("")}</tbody></table>
`},e1=[[/\r\n/g,"\n"],[/\n(#+)(.*)/g,(e,t,n="")=>{let r=t.length;return`<h${r}>${n.trim()}</h${r}>`}],[/!\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,'<img src="$2" alt="$1">'],[/\[([^\[]+)\]\((?:javascript:)?([^\)]+)\)/g,'<a href="$2">$1</a>'],[/([^\\])(\*\*|__)(.*?(_|\*)?)\2/g,"$1<strong>$3</strong>"],[/([^\\])(\*|_)(.*?)\2/g,"$1<em>$3</em>"],[/\\_/g,"&#95;"],[/\~\~(.*?)\~\~/g,"<del>$1</del>"],[/\:\"(.*?)\"\:/g,"<q>$1</q>"],[/\n-{3,}/g,"\n<hr />"],[/\n( *)[-*+] \[([xX ])\](.*)/g,(e,t,n,r)=>`
{{LISTITEM:ul:${Math.floor(t.length/2)}:<input type="checkbox"${"x"===n.toLowerCase()?" checked":""} disabled> ${r.trim()}}}
`],[/\n( *)(\*|-|\+)(.*)/g,(e,t,n,r)=>`
{{LISTITEM:ul:${Math.floor(t.length/2)}:${r.trim()}}}
`],[/\n( *)([0-9]+\.) (.*)/g,(e,t,n,r)=>`
{{LISTITEM:ol:${Math.floor(t.length/2)}:${r.trim()}}}
`],[/\n(&gt;|\>)(.*)/g,(e,t,n="")=>`
<blockquote>${n.trim()}</blockquote>`],[/(\^)(.*?)\1/g,"<sup>$2</sup>"],[/(\~)(.*?)\1/g,"<sub>$2</sub>"],[/\n\[(.+?)\]\n( *\|[^\n]+\|\r?\n)((?: *\|:?[ -]+:?)+ *\|)(\n(?: *\|[^\n]+\|\r?\n?)*)?/g,(e,t,n,r,i="")=>e0(0,n,r,i).replace("<table>",`<table><caption>${t.trim()}</caption>`)],[/( *\|[^\n]+\|\r?\n)((?: *\|:?[ -]+:?)+ *\|)(\n(?: *\|[^\n]+\|\r?\n?)*)?/g,e0],[/\[\^([^\]]+)\](?!:)/g,(e,t)=>`<sup id="fnref:${t}"><a href="#fn:${t}">[${t}]</a></sup>`],[/\[\^([^\]]+)\]:\s*((?:[^\n]*\n?)*)/g,(e,t,n)=>(eK.push([t,n.trim()]),"")],[/\n([A-Z][A-Za-z\s]*?)\s:\s*([A-Z][^\n]*)/g,(e,t,n)=>`
<dl><dt>${t.trim()}</dt><dd>${n.trim()}</dd></dl>
`]],e2=[[/\s?<\/[ou]l>\s?<[ou]l>/g,"",3],[/<\/blockquote>\n<blockquote>/g,"<br>\n"],[/https?:\/\/[^"']*/g,e=>e.replace(/<\/?em>/g,"_")],[/&#95;/g,"_"]],e4=(e,t=!1,n=!1)=>(eW.length=0,eF.length=0,eG.length=0,eY.length=0,eK.length=0,e=(e=(e=(e=`
${e}
`.replace(/\n\s*```\w*\n([^]*?)\n\s*```\s*\n/g,(e,t)=>(eW.push(t),`
<pre>{{CODEBLOCKPH${eW.length-1}}}</pre>
`))).replace(/\n\s*\$\$([^]*?)\$\$\s*\n/g,(e,t)=>(eG.push(t.trim()),`
{{MATHBLOCKPH${eG.length-1}}}
`))).replace(/`([^`]+)`/g,(e,t)=>(eF.push(t),`{{INLINECODEPH${eF.length-1}}}`))).replace(/\$([^$\n]+)\$/g,(e,t)=>(eY.push(t),`{{INLINEMATHPH${eY.length-1}}}`)),e1.forEach(([t,n,r=1])=>{for(let i=0;i<r;i++)e=e.replace(t,n)}),e=(e=(e=>{if(!e.includes("{{LISTITEM:"))return e;let t=e.split("\n"),n=[],r=[],i=!1;for(let e of t){let t=e.match(/\{\{LISTITEM:([^:]+):([^:]+):(.+)\}\}/);if(t){let o=t[1],a=parseInt(t[2]);if(i&&r.length>0){let e=r[r.length-1];e.type!==o&&e.level===a&&(n.push([...r]),r=[])}r.push({type:o,level:a,content:t[3],originalLine:e}),i=!1}else""!==e.trim()?(r.length>0&&(n.push([...r]),r=[]),i=!1):""===e.trim()&&(i=!0)}if(r.length>0&&n.push(r),0===n.length)return e;for(let t of n){let n=eQ(t);e=e.replace(t[0].originalLine,n);for(let n=1;n<t.length;n++)e=e.replace(t[n].originalLine,"")}return e})(e)).replace(/\n([^\n]+)\n/g,eJ),e2.forEach(([t,n,r=1])=>{for(let i=0;i<r;i++)e=e.replace(t,n)}),e=(e=(e=(e=(e=e.replace(/<pre>{{CODEBLOCKPH(\d+)}}<\/pre>/g,(e,t)=>{let n=eW[parseInt(t)];return`<pre>${eX(n)}</pre>`})).replace(/{{MATHBLOCKPH(\d+)}}/g,(e,t)=>{let n=eG[parseInt(t)];return`<div class="math-block">${eX(n)}</div>`})).replace(/{{INLINECODEPH(\d+)}}/g,(e,t)=>{let n=eF[parseInt(t)];return`<code>${eX(n)}</code>`})).replace(/{{INLINEMATHPH(\d+)}}/g,(e,t)=>{let n=eY[parseInt(t)];return`<span class="math-inline">${eX(n)}</span>`})).trim()+(0===eK.length?"":`
<div class="footnotes">
  <hr>
  <ol>
    ${eK.map(([e,t])=>`
    <li id="fn:${e}">
      ${t}
      <sup><a href="#fnref:${e}">↩</a></sup>
    </li>`).join("\n")}
  </ol>
</div>`),t&&(e=e.replace(/^<p>([\s\S]*)<\/p>$/,"$1")),n&&(e=e.replace(/<a href="/g,'<a target="_blank" href="')),e),e5=e=>e.charAt(0).toUpperCase()+e.slice(1),e3=(e,t=2,n="0")=>e.toString().length>=t?e.toString():e3(n+e,t,n),e6=e=>e?`${e3(e.getHours())}:${e3(e.getMinutes())}`:"00:00",e8=(e,t)=>{if(e&&t)return t.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split(".").reduce((e,t)=>{if(null!=e){if(Array.isArray(e)){let n=/([A-Z]\w+)/.exec(t);if(n){let r=n[0][0].toLowerCase()+n[0].substr(1)||t;return e.find(e=>"object"==typeof e&&null!==e&&r in e&&e[r]===t)}return e[parseInt(t,10)]}return"object"==typeof e&&null!==e&&t in e?e[t]:void 0}},e)},e9=/([^ =><!]*)\s*([=><!]*)\s*(\S*)/i,e7=/^\s*!\s*/,te=/===?|[^<>=]/i,tt=(e,...t)=>{let n=e instanceof Array?e:[e];return 0===e.length||n.some(e=>{var n;return n=te.test(e)?[t[0]]:t.reduce((e,t)=>t instanceof Array?[...e,...t]:[...e,t],[]),e.split(/&|;/).map(e=>e.trim()).reduce((e,t)=>{let r=e7.test(t),i=r?t.replace(e7,""):t;return e=e&&n.filter(Boolean).reduce((e,t)=>e||((e,t)=>{if(!t||0===Object.keys(t).length)return!1;let n=e9.exec(e);if(n){let[e,r,i,o]=n,a=e8(t,r.trim());if(void 0===a||"string"==typeof a&&0===a.length)return!1;if(!i||!o)return!0;{let t=isNaN(+o)?"true"===o||"false"!==o&&o:+o;switch(i){case"=":case"==":case"===":return a instanceof Array?a.indexOf(t)>=0:a===t;case"!=":case"!==":return a instanceof Array?a.indexOf(t)>=0:a!==t;case"<=":return a<=t;case">=":return a>=t;case"<":return a<t;case">":return a>t;default:return console.error(`Unrecognized operand (${i}) in expression: ${e}`),!1}}}return!0})(i.trim(),t),!1),r?!e:e},!0)})},tn=(e,t)=>e8(t.filter(Boolean).reduceRight((e,t)=>({...t,...e})),e.trim()),tr=(e,t)=>void 0!==tn(e,t),ti=/{{\s*([^\s"'`:]*):?([^\s]*)\s*}}/g,to=(e,...t)=>{let n;if(!ti.test(e))return!0;ti.lastIndex=0;let r=!0;do(n=ti.exec(e))&&(n.index===ti.lastIndex&&ti.lastIndex++,n.forEach((e,n,[,i])=>{r=r&&tr(i,t)}));while(r&&null!==n);return r},ta=(e,t)=>{if(void 0===e)return"";if(e instanceof Array)return e.map(e=>ta(e,t)).join(", ");if(!t)return e.toString();if("boolean"==typeof e){let n=t.indexOf(":");return e?t.substring(0,n):t.substring(n+1)}switch(t){default:return e.toString();case"date":return new Date(e).toLocaleDateString();case"time":return new Date(e).toLocaleTimeString();case"iso":return new Date(e).toISOString();case"utc":return new Date(e).toUTCString()}},tl=(e,...t)=>e.replace(ti,(e,n,r)=>{let i=tn(n.trim(),t);return!i||i instanceof Array?e:ta(i,r)}),ts=e=>{if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){let t=[];return e.forEach(e=>{t.push(e)}),t.map(e=>ts(e))}if("object"==typeof e){let t={...e};return Object.keys(t).forEach(e=>{t[e]=ts(t[e])}),t}return e},tc=(e="")=>e.replace(/\s|,|\./g,"").toLowerCase(),td=(e,t,n=1)=>{let r=[];for(let i=e;i<=t;i+=n)r.push(i);return r},tu=e=>{if(null!==e&&"object"==typeof e){for(let t of["title","label","alt","name"])if(t in e&&"string"==typeof e[t])return e[t]}},tp=()=>({view:({attrs:{md:e="",removeParagraphs:t=!1,externalLinks:n=!1,...r}})=>d()(".slimdown-view.markdown",r,d().trust(e4(e,t,n)))}),tm=()=>({view:({attrs:{type:e,props:t,label:n="",initialValue:r,inline:i=!1}})=>{let o={className:t.className||"col s12"};if(r instanceof Array&&r.length>3)return d()(".readonly",o,[d()("label",n),d()(tp,{md:"\n- "+r.join("\n- ")})]);if("string"==typeof r){let t=`${n.trim()}: `;return d()(".readonly",o,"url"===e?[d()("label",t),d()("a[target=_blank]",{href:r},r)]:"color"===e?[d()("label",t),d()(".color",{style:{height:"1rem",width:"40px",borderRadius:"4px",backgroundColor:r}})]:[d()("label",n),d()(tp,{md:r})])}let a=r instanceof Array?r.join(", "):r;return d()(".readonly",o,[n&&d()("label",n),i?d()("span",a?`: ${a}`:d().trust("&nbsp;")):d()("p",a||d().trust("&nbsp;"))])}}),tf=(e,t="default")=>`mui_${t}_${e}_${f()}`,th=()=>{let e,t={},n=(e,n)=>{let r=e instanceof Array?e.length:e.hasOwnProperty(n)?e[n].length:0,i=t.onNewItem?t.onNewItem(e,n,r):{};e instanceof Array?e.push(i):e.hasOwnProperty(n)&&Array.isArray(e[n])?e[n].push(i):e[n]=[i]},r=e=>{e.preventDefault()};return{oninit:({attrs:{i18n:n={},field:{id:r="",sortProperty:i,onNewItem:o}}})=>{t.editLabel=n.editRepeat||`Edit ${String(r)}`,t.createLabel=n.createRepeat||`Create new ${String(r)}`,t.onNewItem=o,e=(e=>{if(!e)return(e,t)=>0;let t="!"===e[0],n=t?e.substring(1):e;return t?(e,t)=>e[n]>t[n]?-1:+(e[n]<t[n]):(e,t)=>e[n]>t[n]?1:e[n]<t[n]?-1:0})(i)},view:({attrs:{field:i,obj:o,context:a,className:l=i.className||"col s12",section:s,containerId:c,disabled:u="boolean"==typeof i.disabled?i.disabled:void 0,readonly:p,i18n:f={},onchange:h}})=>{var g;let v,b,y,{filterValue:w}=t,{id:E,label:T,type:k,min:x,max:I,pageSize:L,propertyFilter:A,filterLabel:C,readonly:N=p,repeatItemClass:D=""}=i,M=(v=o)instanceof Array?v:(v.hasOwnProperty(E)&&Array.isArray(v[E])||(v[E]=[]),v[E]),_=w?tc(w):void 0,R=A&&_&&_.length>2?M.filter(e=>tc(`${e[A]}`).indexOf(_)>=0):M,P=(g=String(E),-1===(y=(b=window.location.hash||"").indexOf("?"))?null:new URLSearchParams(b.substring(y+1)).get(g)),j=P?Math.min(R.length,+P):1,H=L&&R&&(j-1)*L<R.length?j:1,V=L?Math.ceil(R.length/L):0,$=!!(I&&R.length>=I),B=!u&&!N&&(!x||R.length>x),U=location.hash?location.hash.split("?")[0].replace("#!",""):"",z=(e=>{let t="";if(e&&e.length>0){let n=e.indexOf("?");-1!==n?t=e.substring(n+1).split("#")[0]:e.startsWith("?")&&(t=e.slice(1).split("#")[0])}else{let e=window.location,n=e.search??"";if(n.startsWith("?")&&(n=n.slice(1)),n)t=n;else if("string"==typeof e.href&&-1!==e.href.indexOf("?"))t=e.href.substring(e.href.indexOf("?")+1).split("#")[0];else{let n=e.hash??"",r=n.indexOf("?");-1!==r&&(t=n.substring(r+1))}}let n={};if(!t)return n;for(let e of t.split("&").filter(Boolean)){let t=e.indexOf("="),r=-1===t?e:e.substring(0,t),i=-1===t?void 0:e.substring(t+1),o=decodeURIComponent(r),a=void 0===i||decodeURIComponent(i);if(o.match(/\[(\d+)?\]$/)){let e=o.replace(/\[(\d+)?\]$/,""),t=n[e];void 0===t?t=[]:"string"!=typeof t&&"boolean"!=typeof t||(t=[t]);let r=t;/\[\d+\]$/.test(o)?r[+/\[(\d+)\]/.exec(o)[1]]=a:r.push(a),n[e]=r}else void 0===n[o]?n[o]=a:"string"==typeof n[o]||"boolean"==typeof n[o]?n[o]=[n[o],a]:n[o].push(a)}return n})(location.hash),W=30+10*Math.floor(Math.log10(R.length)),F=0===V;return[[d()("div",{id:String(E),className:"mui-repeat-list "+l},[d()(".row.mui-repeat-list-controls",d()(".col.s12",[d()(O,{iconName:u||N||$?"":"add",iconClass:"right",label:T,onclick:()=>{n(o,String(E)),E&&d().route.set(U,Object.assign(z,{[E]:R.length})),h&&h(o)},style:{padding:0},className:"left",disabled:u||$,readonly:N}),V>1&&d()(".right",d()(ef,{curPage:H,items:td(1,V).map(e=>{let t;return{href:(t=Object.assign({},z,{[E]:e}),`${U}?${Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}`)}})})),(R.length>1||w)&&A&&!u&&d()(er,{style:"margin-top: -6px; margin-bottom: -1rem;",iconName:"filter_list",iconClass:"small",placeholder:C,onkeyup:(e,n)=>t.filterValue=n,className:"right",disabled:u,readonly:N})])),R&&R.length>0&&"string"!=typeof k&&R.sort(e).filter(L?(e,t)=>(H-1)*L<=t&&t<H*L:()=>!0).map((e,n)=>d()(".mui-repeat-item",{key:`item-${j}-${L?(H-1)*L+n:n}`,draggable:F,ondragstart:F?e=>{e.dataTransfer?.setData("text/plain",n.toString())}:void 0,ondragover:F?r:void 0,ondrop:F?e=>((e,t,n,r,i)=>{let o=parseInt(e.dataTransfer?.getData("text")||"0",10),a=[...n[r]],[l]=a.splice(o,1);a.splice(t,0,l),n[r]=a,i&&i(n),e.preventDefault()})(e,n,o,E,h):void 0,style:{display:"flex",cursor:F?"move":void 0}},[B&&[(!L||L>1)&&d()("span.mui-show-item-number left",{style:`flex: 0 0 ${W}px;`},`[${(L?(H-1)*L+n:n)+1}]`)],[d()(".row.repeat-item",{className:D,key:`repeat-${j}-${L?(H-1)*L+n:n}`,style:"flex: 1;"},[k&&d()(ty,{form:k,obj:e,i18n:f,context:a instanceof Array?[o,...a]:[o,a],section:s,containerId:c,disabled:u,readonly:N,onchange:()=>h&&h(o)})])],B&&[d()(O,{iconName:"delete",className:"mui-delete-item",iconClass:"mui-delete-icon",style:{flex:"0 0 20px",padding:0},disabled:u,readonly:N,onclick:()=>{t.curItemIdx=L?(H-1)*L+n:n}})]])),!(u||$||N||!R||0===R.length||1===L)&&d()(S,{iconName:"add",className:"row mui-add-new-item btn-small right",title:T,style:"padding: 0; margin-top: -10px; margin-right: -25px",onclick:()=>{n(o,String(E)),d().route.set(U,Object.assign(z,{[E]:R.length})),h&&h(o)}})])],void 0!==t.curItemIdx&&d()(ep,{id:"deleteItem",isOpen:void 0!==t.curItemIdx,onClose:()=>{t.curItemIdx=void 0,d().redraw()},fixedFooter:!0,title:f.deleteItem||"Delete item",description:d()(ty,{form:k,obj:R[t.curItemIdx],context:a instanceof Array?[o,...a]:[o,a],section:s,containerId:c,readonly:!0,i18n:f}),buttons:[{label:f.disagree||"Disagree"},{label:f.agree||"Agree",onclick:()=>{void 0!==t.curItemIdx&&(R.splice(t.curItemIdx,1),o instanceof Array?o=[...R]:o[E]=[...R],h&&h(o))}}]})]}}},tg=()=>{let e={};return{oninit:({attrs:{i18n:t={}}})=>{let{raw:n="RAW",view:r="VIEW"}=t;e.raw=n,e.view=r},view:({attrs:{field:{id:t="",type:n,onSelect:r},obj:i,context:o,containerId:a,disabled:l,readonly:s,i18n:c,onchange:u}})=>{if(i instanceof Array)return;let p=i[t],f=p?JSON.parse(p):void 0,h=f&&f.features||[],g=[],v={title:e.raw,vnode:d()(et,{class:"col s12",defaultValue:f?JSON.stringify(f,null,2):void 0,placeholder:"Enter GeoJSON",onchange:e=>i[t]=e})};if(!n||"string"==typeof n)return;let b=n.length>0?n[0].id:void 0,y={title:e.view,vnode:h.length?d()(N,{oncreate:({dom:t})=>e.dom=t,onOpenStart:r?t=>{let n=e.dom.children||[];for(let e=0;e<n.length;e++)if(n[e]===t)return void r(e,h[e])}:void 0,className:"geojson-feature-list",items:h.map((e,r)=>(e.properties||(e.properties={}),{id:"erik_"+r,key:r,header:b&&e.properties[b]||e.geometry.type,body:d()(".row",d()(ty,{class:"col s12",form:n,obj:e.properties,i18n:c,context:o instanceof Array?[i,...o]:[i,o],containerId:a,disabled:l,readonly:s,onchange:(e,n)=>{n&&(h[r].properties=n),i[t]=JSON.stringify(f,null,2),u&&u(i)}}))}))}):d()("span","...")};return g.push(y),g.push(v),d()(eT,{tabs:g,tabWidth:"fill"})}}},tv=e=>{let{autogenerate:t,value:n,options:r}=e;return t?"none":n?"string"==typeof n?"md":"number"==typeof n?"number":"boolean"==typeof n?"checkbox":"none":r&&r.length>0?"select":"none"},tb=((e={},t={})=>()=>{let n={key:Date.now(),stableId:void 0};return{oninit:({attrs:{field:e,obj:t}})=>{let{id:r=""}=e,i=t&&"object"==typeof t&&"id"in t?String(t.id):"default";n.stableId=tf(String(r),i)},view:({attrs:{i18n:r,field:i,obj:o,autofocus:a,onchange:l,context:s=[],containerId:c,disabled:u,readonly:p}})=>{let{id:h="",type:g,disabled:v=u,readonly:b=p,value:w,required:E,autogenerate:T,show:k,label:x,description:S,i18n:I=r||{},checkAllOptions:L,transform:C,effect:N,onkeyup:D,onkeydown:M,onblur:_}=i,R=!k||tt(k,o,...s);if(k&&!R||x&&!to(x,o,...s)||w&&!to(w,o,...s)||S&&!to(S,o,...s))return;let P="string"==typeof i.options?tn(i.options,[o,...s]):i.options,j=P&&P instanceof Array?P.filter(e=>"string"==typeof e||void 0!==e.id&&(e.label||isNaN(Number(e.id)))&&(!e.show||tt(e.show,o,...s))).map(e=>"string"==typeof e?{id:e,label:e5(e)}:e.label?e:{...e,label:e5(e.id)}):[],H="boolean"==typeof u&&u,V=o&&"object"==typeof o&&"id"in o?String(o.id):"default",$=((e,t=!1,n=!1,r="default",i,o)=>{let{id:a="",label:l,description:s,required:c,multiple:d,className:u,checkboxClass:p,icon:f,iconClass:h,placeholder:g,maxLength:v,minLength:b,max:y,min:w,step:E,dateTimeOutput:T,dateTimeSeconds:k,dateFormat:O,twelveHour:x}=e,S={id:o||tf(String(a),r),label:l};return void 0===l&&a&&(S.label=e5(String(a))),s&&(S.helperText=e4(s,!0)),u&&(S.className=u),f&&(S.iconName=f),h&&(S.iconClass=h),p&&(S.checkboxClass=p),g&&(S.placeholder=g),c&&(S.isMandatory=!0,S["aria-required"]="true"),d&&(S.multiple=d),n&&(S.disabled=!0,S["aria-disabled"]="true"),t&&(S.autofocus=!0),void 0!==v&&(S.maxLength=v),void 0!==b&&(S.minLength=b),void 0!==y&&(S.max=y),void 0!==w&&(S.min=w),void 0!==E&&(S.step=E),T&&(S.dateTimeOutput=T),k&&(S.dateTimeSeconds=k),O&&(S.dateFormat=O),x&&(S.twelveHour=x),S})(i,a,"boolean"==typeof v||void 0===v?H||v:H||tt(v,o,...s),V,0,n.stableId);x&&($.label=e4(tl($.label||x,o,...s),!0)),w&&($.value=tl($.value||w,o,...s)),S&&($.description=e4(tl($.description||S,o,...s),!0));let B=E?e=>!(e instanceof Array)||e&&e.length>0:void 0;if(o instanceof Array)return void console.warn("Only a repeat list can deal with arrays!");let z=async e=>{if(void 0===e||"undefined"===e)return delete o[h],void l(o);if(o[h]=C?C("to",e):e,!N)return l(o);let t=await N(o,o[h],s);l(void 0!==t?t:o)};if(g instanceof Array)return h?("object"!=typeof o||o.hasOwnProperty(h)||(o[h]={}),d()(".muf-form",{className:i.className},[d()(".muf-form-header",d().trust(e4($.label||e5(String(h)),!0))),$.description&&d()("div",d().trust(e4($.description))),d()(".row",d()(ty,{...$,i18n:I,readonly:b,form:g,obj:o[h],context:s instanceof Array?[o,...s]:[o,s],onchange:()=>l&&l(o),containerId:c}))])):void console.warn("Missing ID for type "+JSON.stringify(g));T&&!o[h]&&(o[h]="guid"===T?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}):"id"===T?f():Date.now());let W="object"==typeof o&&o.hasOwnProperty(h)&&void 0!==o[h]?C?C("from",o[h]):o[h]:$.value;h&&void 0!==w&&void 0!==W&&(o[h]=C?C("to",W):W);let[F,G]=L?L.split("|"):["",""];if(b&&g&&0>["md","none"].indexOf(g)){if(t.hasOwnProperty(g))return d()(t[g],{iv:W,field:i,props:$,label:$.label,obj:o,context:s});if(g&&e.hasOwnProperty(g))return d()(e[g],{iv:W,field:i,props:$,label:$.label,onchange:z,obj:o,context:s});switch(g){case"time":{let e=I.dateTimeOptions?{hour:"2-digit",minute:"2-digit",second:void 0,...I.dateTimeOptions,weekday:void 0,month:void 0,day:void 0,year:void 0}:void 0,t="number"==typeof W||"string"==typeof W||W instanceof Date?new Date(W):void 0,n=t?t.toLocaleTimeString(I.locales,e):"";return d()(tm,{props:$,label:$.label,initialValue:n})}case"date":{let e=I.dateTimeOptions?{...I.dateTimeOptions,hour:void 0,hour12:void 0,minute:void 0,second:void 0}:void 0,t="number"==typeof W||"string"==typeof W||W instanceof Date?new Date(W):void 0,n=t?t.toLocaleDateString(I.locales,e):"";return d()(tm,{props:$,label:$.label,initialValue:n})}case"datetime":{let e=I.dateTimeOptions?{hour:"2-digit",minute:"2-digit",month:"numeric",day:"numeric",...I.dateTimeOptions}:void 0,t="number"==typeof W||"string"==typeof W||W instanceof Date?new Date(W):void 0,n=t?t.toLocaleTimeString(I.locales,e):"";return d()(tm,{props:$,label:$.label,initialValue:n})}case"switch":case"checkbox":{let e=W?"✔":"✘";return d()(tm,{props:$,label:$.label,initialValue:e,inline:!0})}case"tags":{let e=W||[];return d()(tm,{props:$,label:$.label,initialValue:e})}case"options":case"select":{let e=void 0!==W?W instanceof Array?W:[W]:[],t=j.filter(t=>e.indexOf(t.id)>=0),n=t&&0===t.length?"?":1===t.length?t[0].label:t.map(e=>e.label);return d()(tm,{props:$,label:$.label,initialValue:n})}case"radio":{let e=j.filter(e=>e.id===W),t=e&&e.length?e[0].label:"?";return d()(tm,{props:$,label:$.label,initialValue:t})}case"base64":{let e=!(!W||!/data:image/i.test(W)),t=i.label||tu(o)||i.placeholder||"Uploaded image";return e&&d()("div",{role:"img","aria-label":"string"==typeof t?t:"Image"},d()("img.responsive-img",{src:W,alt:"string"==typeof t?t:"Image",style:{maxHeight:`${i.max||50}px`}}))}case"file":return d()("div",$,(W instanceof Array?W:[W]).map((e="")=>{let t=/data:image|.jpg$|.jpeg$|.png$|.gif$|.svg$|.bmp$|.tif$|.tiff$/i.test(e),n=`${new URL(i.url).origin}${e}`;return d()("a[target=_blank]",{href:n},t?d()("img",{src:n,alt:i.label||i.placeholder||e||"File image",style:{maxHeight:`${i.max||50}px`}}):d()(tm,{props:$,label:i.placeholder||"File",initialValue:e}))}));case"md":case"markdown":{let e="string"==typeof W&&W?e4(W):"";return d()(tm,{props:$,label:$.label,initialValue:e})}default:return d()(tm,{props:$,type:g,label:$.label,initialValue:W})}}if(g&&e.hasOwnProperty(g))return d()(e[g],{iv:W,field:i,props:$,label:$.label,onchange:z,obj:o,context:s});switch(g){case"colour":case"color":return d()(ea,{...$,value:W,oninput:z,onblur:_});case"time":{let{twelveHour:e=!1}=$,t=W?"number"==typeof W||"string"==typeof W?new Date(W):W:new Date,n=e6(t);return o[h]=C?C("to",t):t,d()(eg,{...$,twelveHour:e,value:n,oninput:e=>{let n=e.split(":").map(e=>+e);t.setHours(n[0],n[1]),z(t)},container:c})}case"date":{let{format:e="mmmm d, yyyy"}=$,t="number"==typeof W||"string"==typeof W?new Date(W):W;o[h]=t?C?C("to",t.valueOf()):t.valueOf():t;let{min:n,max:r}=$,i=n?!t||n<t.valueOf()?new Date(n):t:void 0,a=r?!t||r>t.valueOf()?new Date(r):t:void 0;return d()(U,{...$,minDate:i,maxDate:a,setDefaultDate:!!t,format:e,value:t,oninput:e=>{z(new Date(e))},container:c})}case"datetime":{let{label:e,className:t="col s12",dateTimeSeconds:n=!1,twelveHour:r=!1,format:i="mmmm d, yyyy",...o}=$,a="number"==typeof W||"string"==typeof W?new Date(W):W,l={initialDateTime:a},s=a||void 0,u=a?e6(a):"",{min:p,max:f}=$,h=p?!a||p<a.valueOf()?new Date(p):a:void 0,g=f?!a||f>a.valueOf()?new Date(f):a:void 0,v=$.dateTimeOutput||"UTC",b=e=>{l.initialDateTime=e,z("UTC"===v?e.toUTCString():"ISO"===v?e.toISOString():e.valueOf())};return d()("div",{className:t},d()(".row",[d()(n?".col.s6":".col.s8",{style:"padding: 0"},d()(U,{...o,label:e,minDate:h,maxDate:g,setDefaultDate:!!a,format:i,value:s,container:c,oninput:e=>{let t=new Date(l.initialDateTime);t.setFullYear(e.getFullYear()),t.setMonth(e.getMonth()),t.setDate(e.getDate()),b(t)}})),d()(".col.s4",{style:"min-width: 6rem; padding-right: 0; padding-left: 0"},d()(eg,{...o,label:"",helperText:"",twelveHour:r,value:u,container:c,oninput:e=>{let t=e.split(":").map(e=>+e),n=l.initialDateTime||new Date((new Date).setSeconds(0,0));n.setHours(t[0],t[1]),b(n)}})),n&&d()(ei,{style:"min-width: 4rem; padding-right: 0; padding-left: 0",className:"col s2",min:0,max:59,oninput:e=>{let t=l.initialDateTime||new Date((new Date).setSeconds(0,0));t.setSeconds(e,0),b(t)}})]))}case"email":return d()(el,{...$,validate:B,autofocus:a,oninput:z,value:W,onkeydown:M,onkeyup:D,onblur:_});case"number":return d()(ei,{...$,validate:B,autofocus:a,oninput:z,value:W,onkeydown:M,onkeyup:D,onblur:_});case"radio":return d()(ey,{label:"",...$,options:j,checkedId:W,onchange:z});case"checkbox":{let e=!!W;return d()(ec,{...$,checked:e,onchange:z})}case"options":return[[d()(eu,{key:n.key,checkboxClass:"col s6 m4 l3",className:"input-field col s12",...$,disabled:$.disabled||!j||0===j.length,options:j,checkedId:W,onchange:e=>z(1===e.length?e[0]:e.filter(e=>null!==e))})],void 0!==L&&d()(".col.s12.option-buttons",[d()(O,{disabled:$.disabled,label:F,iconName:"check",onclick:()=>{n.key=Date.now(),z(j.map(e=>"string"==typeof e?e:e.id))}}),G&&d()(O,{disabled:$.disabled,label:G,iconName:"check_box_outline_blank",onclick:()=>{let e=o[h]||[];e.length=0,n.key=Date.now(),z(e)}})])];case"select":return d()(ew,{placeholder:$.multiple?I.pickOneOrMore||"Pick one or more":I.pickOne||"Pick one",...$,disabled:$.disabled||!j||0===j.length,options:j,checkedId:W,onchange:e=>z(1!==e.length||$.multiple?e.filter(e=>null!==e||void 0!==e):e[0])});case"markdown":case"md":{let{label:e,className:t="col s12"}=$,n=tl((h?W:w||e)||"",o,...s);return d()(tp,{md:n,className:t})}case"section":return d()(".divider");case"switch":{let e=j&&j.length>0?j[0].label??"":"",t=j&&j.length>1?j[1].label??"":"";return d()(eE,{...$,left:e,right:t,checked:W,onchange:z})}case"tags":{let e=(W?W instanceof Array?W:[W]:[]).map(e=>({tag:e})),t=j&&j.length>0?{data:j.reduce((e,t)=>(e[t.id]=null,e),{}),limit:i.maxLength||1/0,minLength:i.minLength||1}:void 0,{label:n,isMandatory:r,className:o,helperText:a}=$;return d()(A,{className:o,label:n,isMandatory:r,helperText:a,placeholder:i.placeholder||"Add a tag",secondaryPlaceholder:i.secondaryPlaceholder||"+tag",data:e,onchange:e=>z(e.map(e=>e.tag)),autocompleteOptions:t})}case"autocomplete":{let e=j&&j.length>0?{data:j.reduce((e,t)=>(e[t.id]=null,e),{}),limit:i.maxLength||1/0,minLength:i.minLength||1}:{data:{}},{label:t,isMandatory:n,className:r,helperText:o}=$;return d()(y,{value:W,className:r,label:t,isMandatory:n,helperText:o,oninput:z,onblur:_,placeholder:i.placeholder||"...",...e})}case"textarea":return d()(et,{...$,validate:B,autofocus:a,oninput:z,value:W,onkeyup:D,onkeydown:M,onblur:_});case"file":{let{url:e,placeholder:t}=i;if(!e)throw Error('Input field "url" not defined, which indicates the URL to the upload folder.');let n=j?j.map(e=>"string"==typeof e?e:String(e.id)):void 0;return d()(es,{...$,accept:n,placeholder:t,onchange:t=>{if(!t||t.length<1)return void z("");let n=new FormData;n.append("file",t[0]),d().request({method:"POST",url:e,body:n}).then(e=>z(e)).catch(console.error)},value:W})}case"base64":{let e=!(!W||!/data:image/i.test(W)),{placeholder:t}=i,n=j?j.map(e=>"string"==typeof e?e:String(e.id)).join(","):void 0,r=i.label||tu(o)||i.placeholder||"Uploaded image",a=$.className||$.class||"col s12";return e?d()("div",{className:a,style:{position:"relative"}},[d()("img.responsive-img",{src:W,alt:"string"==typeof r?r:"Uploaded image",style:{maxHeight:`${i.max||50}px`}}),d()(O,{iconName:"close","aria-label":"Remove image",onclick:()=>z(""),className:"btn-floating btn-small red darken-2",style:{position:"absolute",top:"4px",right:"4px",width:"32px",height:"32px"}})]):d()(es,{...$,accept:n,placeholder:t,onchange:e=>{if(!e||e.length<1)return void z("");let t=new FileReader;t.onloadend=()=>{"string"==typeof t.result&&z(t.result),d().redraw()},t.readAsDataURL(e[0])},value:W})}case"url":return d()(eo,{placeholder:"http(s)://www.example.com",...$,validate:B,autofocus:a,oninput:z,value:W,onkeydown:M,onkeyup:D,onblur:_});case"text":return d()(er,{...$,maxLength:i.max||void 0,validate:B,autofocus:a,oninput:z,value:W,onkeydown:M,onkeyup:D,onblur:_});default:return}}}})({},{}),ty=()=>{let e=new Map;return{view:({attrs:{i18n:t,form:n,obj:r,onchange:i,disabled:o,readonly:a,context:l,section:s}})=>{let c=e=>i&&i(n.filter(e=>e.required&&(e.id,!0)).reduce((t,n)=>t&&!(n.id&&(void 0===e[n.id]||e[n.id]instanceof Array&&0===e[n.id].length||"string"==typeof e[n.id]&&0===e[n.id].length)),!0),e),u=(t=>{let n;if(e.has(t))return e.get(t);let r=t?(n=!1,({type:e,id:r})=>"section"===e?(n=r===t,!1):n):e=>!0;return e.set(t,r),r})(s),p=l||[],f=[];for(let e of n){if(!u(e)||e.show&&!tt(e.show,r,...p.filter(e=>"object"==typeof e&&null!==e&&!("id"in e&&"label"in e))))continue;e.type||(e.type=tv(e));let n={i18n:t,field:e,obj:r,onchange:c,disabled:o,readonly:a,context:p,section:s,containerId:"body"};void 0===e.repeat||!1===e.repeat?f.push(d()(tb,n)):"geojson"===e.repeat?f.push(d()(tg,n)):f.push(d()(th,n))}return f}}};function tw(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tE(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function tT(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function tk(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function tO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw r}}return o}}(e,t)||tS(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tx(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function tS(e,t){if(e){if("string"==typeof e)return tw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tw(e,t)}}var tI="SG_LANGUAGE",tL="SG_MODEL_SAVED",tA=function(e){return e&&e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e},tC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e);return"".concat(t.getFullYear(),"-").concat(h(t.getMonth()+1),"-").concat(h(t.getDate()))},tN=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"and",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=e.filter(function(e){return e});return 0===i.length?"":n+(1===i.length?i[0]:"".concat(i.slice(0,i.length-1).map(function(e,t){return 0!==t&&void 0!==e&&r?e.toLowerCase():e}).join(", ")," ").concat(t," ").concat(r?i[i.length-1].toLowerCase():i[i.length-1]))},tD=function(e){if(0!==e.length){var t=Math.floor(Math.random()*e.length);return e[t]}},tM=function(e){if(null===e)return e;if(tE(e,Date))return new Date(e.getTime());if(tE(e,Array)){var t=[];return e.forEach(function(e){t.push(e)}),t.map(function(e){return tM(e)})}if((void 0===e?"undefined":tx(e))==="object"){var n=tT({},e);return Object.keys(n).forEach(function(e){n[e]=tM(n[e])}),n}return e},t_=function(e,t){var n,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=r?"spark_collection":((null==(n=e.scenario)?void 0:n.label)||"spark")+"_model";return t&&(i+="_".concat(t)),"".concat(i.replace(/\s/g,"_"),"_v").concat(h(e.version||1,3),"_").concat(tC()).toLowerCase()},tR=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.categories,r=e.components,i=e.inconsistencies,o=0;do{var a=function(){var e=tT({},t),o=!0,a=!1,l=void 0;try{for(var s,c=n[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var d=function(){var t=s.value,n=r.filter(function(e){return t.componentIds&&t.componentIds.includes(e.id)}).map(function(e){var t=e.values?e.values.reduce(function(e,t){return e+(i[t.id]?Object.keys(i[t.id]).length:0)},0):0;return tk(tT({},e),{inc:t})}).sort(function(e,t){return e.inc>t.inc?-1:1}),o=[],a=!0,l=!1,c=void 0;try{for(var d,u=n[Symbol.iterator]();!(a=(d=u.next()).done);a=!0){var p=function(){var t=d.value;if(e.hasOwnProperty(t.id)){var n=e[t.id];if(n&&n.length){if(n.some(function(e){return o.includes(e)}))return{v:!1};n.forEach(function(e){i[e]&&Object.keys(i[e]).forEach(function(t){return i[e][t]&&o.push(t)})})}return"continue"}var r=t.values&&t.values.map(function(e){return e.id}).filter(function(e){return!o.includes(e)});if(!r||0===r.length)return{v:!1};var a=tD(r);if(!a)return{v:!1};i[a]&&Object.keys(i[a]).forEach(function(e){return i[a][e]&&o.push(e)}),e[t.id]=[a]}();if("object"===tx(p))return{v:p.v}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}();if("object"===tx(d))return d.v}}catch(e){a=!0,l=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return e}();if(a)return{id:f(),components:a,included:!1};o++}while(o<100);return!1},tP=function(e,t){t&&t.preventDefault();var n=document.getElementById(e);n?n.scrollIntoView({behavior:"smooth"}):console.log("Element with id ".concat(e," not found."))},tj=function(){window.scrollTo({top:0,behavior:"smooth"})},tH=function(e,t){var n=e.components,r=tT({components:{}},function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,["components"]));return t.filter(function(e){return n.hasOwnProperty(e.id)}).forEach(function(e){r.components[e.id]=n[e.id].filter(function(t){var n;return null==(n=e.values)?void 0:n.find(function(e){return e.id===t})})}),r},tV=function(e){return e.map(function(e){return tk(tT({},e),{group:e.included?s("GROUP","SELECTED"):s("GROUP","UNSELECTED")})}).sort(function(e,t){return e.included&&t.included?(e.label||"").localeCompare(t.label):e.included?-1:1})},t$=["#2c7bb6","#abd9e9","#ffffbf","#fdae61","#d7191c"],tB=function(e){var t=btoa(e);return"data:image/svg+xml;base64,".concat(t)},tU=function(e,t){var n=.1*t;return'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(t,'" height="').concat(t,'">\n    <circle cx="').concat(t/2,'" cy="').concat(t/2,'" r="').concat((t-n)/2,'" fill="').concat(e,'" stroke="black" stroke-width="').concat(n,'" /></svg>')},tz=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=1,r=e.match(/^(.*?)(\d+)$/);r&&(e=r[1].trim(),n=parseInt(r[2])+1);for(var i="".concat(e," ").concat(n);t.includes(i);)n++,i="".concat(e," ").concat(n);return i},tW=function(e){var t="",n="",r={},i=!0,o=!1,a=void 0;try{for(var l,s=e.ops[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c,d,u,p=l.value;if("string"==typeof p.insert){var f=p.insert;if((null==(c=p.attributes)?void 0:c.link)&&(f="[".concat(f.trim(),"](").concat(p.attributes.link,")")),(null==(d=p.attributes)?void 0:d.bold)&&(f="**".concat(f.trim(),"**")),(null==(u=p.attributes)?void 0:u.italic)&&(f="*".concat(f.trim(),"*")),"\n"===f&&p.attributes){!function(e,n){if(!n){t+=e+"\n";return}if(n.header){t+="".concat("#".repeat(n.header)," ").concat(e.trim(),"\n\n");return}if(n.blockquote){var i=e.trim().split("\n").map(function(e){return"> ".concat(e)}).join("\n");t+="".concat(i,"\n\n");return}if(n.list){var o=n.indent||0,a="  ".repeat(o);"bullet"===n.list?t+="".concat(a,"- ").concat(e.trim(),"\n"):"ordered"===n.list?(r[o]=(r[o]||0)+1,t+="".concat(a).concat(r[o],". ").concat(e.trim(),"\n")):"checked"===n.list?t+="".concat(a,"- [x] ").concat(e.trim(),"\n"):"unchecked"===n.list&&(t+="".concat(a,"- [ ] ").concat(e.trim(),"\n"));return}t+=e+"\n\n"}(n,p.attributes),n="";continue}if("\n"===f){t+=n+"\n\n",n="";continue}n+=f}}}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return n&&(t+=n),t.trim()},tF=(r=new Map,function(e){if(r.has(e))return r.get(e);var t=e.replace(/^#/,"").toLowerCase();3===t.length&&(t=t.split("").map(function(e){return e+e}).join(""));var n=parseInt(t.slice(0,2),16)/255,i=parseInt(t.slice(2,4),16)/255,o=parseInt(t.slice(4,6),16)/255,a=function(e){return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)},l=.2126*a(n)+.7152*a(i)+.0722*a(o)>.179?"#000000":"#ffffff";return r.set(e,l),l}),tG=function(e){3===(e=e.replace(/^#/,"")).length&&(e=e.split("").map(function(e){return e+e}).join(""));var t=parseInt(e.slice(0,2),16)/255,n=parseInt(e.slice(2,4),16)/255,r=parseInt(e.slice(4,6),16)/255,i=Math.max(t,n,r),o=Math.min(t,n,r),a=0,l=0,s=(i+o)/2;if(i!==o){var c=i-o;switch(l=s>.5?c/(2-i-o):c/(i+o),i){case t:a=(n-r)/c+6*(n<r);break;case n:a=(r-t)/c+2;break;case r:a=(t-n)/c+4}a/=6}return[360*a,100*l,100*s]},tY=function(e,t,n){var r=function(t){return(t+e/30)%12},i=(t/=100)*Math.min(n/=100,1-n),o=function(e){return n-i*Math.max(-1,Math.min(r(e)-3,Math.min(9-r(e),1)))},a=function(e){return Math.round(255*e).toString(16).padStart(2,"0")};return"#".concat(a(o(0))).concat(a(o(8))).concat(a(o(4)))},tK=(i=new Map,function(e){var t=e.toLowerCase();if(i.has(t))return i.get(t);var n=tO(tG(t),3),r=tY(n[0],n[1],100-n[2]);return i.set(t,r),r}),tZ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t||0===t.length){var n="#ccc";return{OTHER:[n,tF(n)]}}for(var r=((function(e){if(Array.isArray(e))return tw(e)})(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||tS(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).sort(function(e,t){return e.threshold-t.threshold}),i=e.filter(function(e){return e.included}).reduce(function(e,t){return Object.keys(t.components||{}).forEach(function(n){var r=!0,i=!1,o=void 0;try{for(var a,l=t.components[n][Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;e[s]=(e[s]||0)+1}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}),e},{}),o=r[r.length-1].threshold,a=Array(o+1),l=0;l<=o;l++){var s=r[0].color,c=!0,d=!1,u=void 0;try{for(var p,f=r[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var h=p.value;if(h.threshold<=l)s=h.color;else break}}catch(e){d=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw u}}a[l]=s}var g=Object.entries(i).reduce(function(e,t){var n=tO(t,2),i=n[0],o=n[1],l=o<a.length?a[o]:r[r.length-1].color;return e[i]=[l,tF(l)],e},{}),v=a[0]||r[0].color;return g.OTHER=[v,tF(v)],g},tq=function(e){var t=document.createElement("input");t.type="file",t.style.display="none",t.onchange=function(){t.files&&e(t.files),t.remove()},document.body.appendChild(t),t.click(),setTimeout(function(){return t.remove()},1e3)},tX=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.doc",n=new Blob(['<!DOCTYPE html><html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:w="urn:schemas-microsoft-com:office:word" lang="en"><head><meta charset="utf-8"></head><body>'+e+"</body></html>"],{type:"application/msword;charset=utf-8"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)};function tJ(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function tQ(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function t0(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){tQ(o,r,i,a,l,"next",e)}function l(e){tQ(o,r,i,a,l,"throw",e)}a(void 0)})}}function t1(e){return function(e){if(Array.isArray(e))return tJ(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return tJ(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tJ(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t2(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var t4="SG_MODEL",t5="SPARK_FONT_SIZE",t3=function(e){document.title="ScenarioSpark: ".concat(e)},t6=function(e,t){tj(),e.update({page:t})},t8=function(e,t,n,r){ib&&ib.switchTo(t,n,r),e.update({page:t})},t9=function(e,t){var n=Math.max(12,Math.min(28,t));document.documentElement.style.setProperty("--morph-font-size","".concat(n,"px")),localStorage.setItem(t5,String(n)),e.update({fontSize:n})},t7=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t0(function(){return t2(this,function(r){switch(r.label){case 0:var i;if(localStorage.setItem(tL,"false"),t.lastUpdate=Date.now(),t.scenarios||(t.scenarios=[]),!n)return[3,2];if(!((i=t.scenario)&&(i.inconsistencies||(i.inconsistencies={}),i.categories||(i.categories=[]),i.components||(i.components=[]),i.narratives||(i.narratives=[]),i.narratives=i.narratives.map(function(e){return tH(e,i.components)}),void 0===i.hideInconsistentValues&&(i.hideInconsistentValues=!0),i.thresholdColors||(i.thresholdColors=eN),i.narratives.forEach(function(e){e.components||(e.components={}),e.id||(e.id=f()),e.label||(e.label="UNKNOWN")}),i.categories.forEach(function(e){e.componentIds||(e.componentIds=[]),e.id||(e.id=f()),e.label||(e.label="UNKNOWN")}),i.components.forEach(function(e){e.values||(e.values=[]),e.id||(e.id=f()),e.label||(e.label="UNKNOWN")}),1)))return alert(s("JSON_NOT_VALID")),[2];return[4,ez.set(t4,JSON.stringify(t))];case 1:return r.sent(),e.update({model:function(){return t},activeTooltip:"",title:t.scenario.label,curNarrative:function(){},excludedComps:function(){return{}},lockedComps:function(){return{}}}),[3,4];case 2:return[4,ez.set(t4,JSON.stringify(t))];case 3:r.sent(),e.update({model:function(){return t}}),r.label=4;case 4:return localStorage.setItem(tL,"false"),[2]}})})()},ne=function(e,t){return t0(function(){var n;return t2(this,function(r){return n=e.getState().model,t.id||(t.id=f()),n.scenario.narratives?t.saved?n.scenario.narratives=n.scenario.narratives.map(function(e){return e.id!==t.id?e:t}):(t.saved=!0,n.scenario.narratives.push(t)):(t.saved=!0,n.scenario.narratives=[t]),e.update({curNarrative:function(){return t}}),t7(e,n),[2]})})()},nt=function(e,t){return t0(function(){return t2(this,function(n){switch(n.label){case 0:if(!t.saved)return[3,2];return[4,ne(e,t)];case 1:n.sent(),n.label=2;case 2:return e.update({curNarrative:t}),[2]}})})()},nn=function(e,t,n,r){var i=e.state.model,o=i.scenario.components.filter(function(e){return e.id===t}).shift();if(!o)return void console.error("Scenario component not found!");var a=o.values,l=void 0===a?[]:a;o.values="update"===r?l.map(function(e){return e.id===n.id?n:e}):"delete"===r?l.filter(function(e){return e.id!==n.id}):t1(l).concat([n]),"delete"===r&&(i.scenario.narratives=i.scenario.narratives.map(function(e){return tH(e,i.scenario.components)})),t7(e,i)},nr=function(e,t,n,r,i){var o=e.state.model,a=o.scenario.components.filter(function(e){return e.id===t}).shift();if(!a)return void console.error("Scenario component not found!");var l=a.values,s=void 0===l?[]:l,c=s.find(function(e){return e.id===n});!c||s.find(function(e){return e.id===r})&&(a.values=s.filter(function(e){return e.id!==n}).reduce(function(e,t){return t.id===r?i?(e.push(c),e.push(t)):(e.push(t),e.push(c)):e.push(t),e},[]),t7(e,o))},ni=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nv.currentLocale;return t0(function(){return t2(this,function(n){switch(n.label){case 0:return localStorage.setItem(tI,t),[4,nv.loadAndSetLocale(t)];case 1:return n.sent(),e.update({language:t}),[2]}})})()},no={services:[{onchange:function(e){var t,n;return null==(n=e.model)||null==(t=n.scenario)?void 0:t.label},run:function(e){var t,n,r=null==(n=e.state.model)||null==(t=n.scenario)?void 0:t.label;t3(r),e.update({title:r})}}],initial:{title:"",page:u.HOME,model:eD,fontSize:parseInt(localStorage.getItem(t5)||"")||16,language:localStorage.getItem(tI)||"nl"}},na=(0,eV.meiosisSetup)({app:no});o=na().update,t0(function(){var e,t,n,r;return t2(this,function(i){switch(i.label){case 0:return[4,ez.get(t4)];case 1:return t3(r=(null==(e=(n=(t=i.sent())?JSON.parse(t):eD).scenario)?void 0:e.label)||""),o({model:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},n)},title:r}),[2]}})})(),t9(na(),(null==(l=no.initial)?void 0:l.fontSize)||16),na.map(function(){return d().redraw()});var nl=function(e){return e&&"object"==typeof e};function ns(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var n=this.opts,r=n.array;n.array=!0;var i=this.apply(null,e);return n.array=r,i}function nc(e,t){e=e||{},(t=t||{}).resolveAliases&&(e=nc.resolveAliases(e));var n={};function r(e,t,i){return function(e,t,n,r,i,o){i=i||{};var a=r[e],l=nl(a),s=l||null!=t||null!=n;if(s){if(nl(t)){var c=n;n=t,t=c}if(n=n||{},l){var d=null!=t&&a[t]||a["*"];if(null!=d)a=d;else if("number"==typeof t){var u,p,f=i.pluralize;u=a,p=Math.abs(t),a=null!=u[p=f?f(p):p]?u[p]:null!=u.n?u.n:void 0}}}if("string"!=typeof a){if(!1===i.useKeyForMissingTranslation)return;a=e,i.debug&&(null!=t?(a="@@"+e+"."+t+"@@",console.warn('No translation or pluralization form found for "'+t+'" in'+e)):(a="@@"+a+"@@",console.warn('Translation for "'+e+'" not found.')))}if(s){var h=a,g=n,v=t,b=i,y=o[h];if(null==y){var w=h.replace(/\{(\w+)\}/g,"{x}$1{x}").split("{x}");y=w.length>1?w:w[0],o[h]=y}return y.pop?function(e,t,n,r){for(var i=r.array?e.slice():e[0],o=e.length,a=1;a<o;a+=2){var l=e[a],s=t[l];null==s&&("n"===l&&null!=n?s=n:(r.debug&&console.warn('No "'+l+'" in placeholder object:',t),s="{"+l+"}")),r.array?i[a]=s:i+=s+e[a+1]}return i}(y,g,v,b):y}return a}(e,t,i,r.keys,r.opts,n)}return r.arr=ns,r.keys=e||{},r.opts=t,r}nc.resolveAliases=function(e){var t={};return function n(r){if(nl(r)){var i;return i=n,Object.keys(r).reduce(function(e,t){return e[t]=i(r[t],t),e},{})}return r.replace(/{{(.*?)}}/g,function(r,i){if(t[i])throw Error('Circular reference for "'+i+'" detected');t[i]=!0;var o=i,a="",l=i.match(/^(.+)\[(.+)\]$/);l&&(o=l[1],a=l[2]);var s=e[o];if(nl(s))if(a)s=s[a];else throw Error("You can't alias objects");if(null==s)throw Error('No translation for alias "'+i+'"');var c=n(s);return t[i]=!1,c})}(e)};var nd=n(7626);function nu(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function np(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){nu(o,r,i,a,l,"next",e)}function l(e){nu(o,r,i,a,l,"throw",e)}a(void 0)})}}function nm(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var nf={HOME:{TITLE:"home",ROUTE:"/home"},ABOUT:{TITLE:"About the app",ROUTE:"/about"},DEFINE_BOX:{TITLE:"Morphological box",ROUTE:"/define"},SETTINGS:{TITLE:"Settings",ROUTE:"/settings"},CREATE_SCENARIO:{TITLE:"Create scenario",ROUTE:"/create"},SHOW_SCENARIO:{TITLE:"Show scenarios",ROUTE:"/show"},DECISION_SUPPORT:{TITLE:"Decision support",ROUTE:"/decide"},DOWNLOAD:{COLLECTION:"Save collection",MODEL:"Save scenario file"},UPLOAD:{COLLECTION:"Load collection",MODEL:"Load scenario file"},CANCEL:"Cancel",DELETE:"Delete",AND:"and",YES:"Yes",NO:"No",OK:"Ok",NAME:"Name",DESCRIPTION:"Description",NEW_BOX:"New morphological box",CATEGORIES:"Categories",DIMENSION:"Key driver",DIMENSION_SELECTED:"Selected drivers",DIMENSIONS:"Drivers",KEY_VALUE:"Key value",CONTEXT:"Context",NONE:"None",LOCATION:"Location",LOCATION_TYPE:"Location type",COORDINATES:"Coordinates",LOCATION_NAME:"Location name",LATITUDE:"Latitude",LONGITUDE:"Longitude",MANUAL:"Manual mode",Type:"Type",PICK_FROM_LIST:"Pick from list",ENTER_KEY_VALUE:"Enter key value",EDIT_COMPONENT:"Edit component",ADD_COMPONENT:"Add component",GENERATE_NARRATIVE:"Generate",CLEAR_NARRATIVE:"Clear",NAME_NARRATIVE:"Title of current narrative",SAVE_NARRATIVE:"Save",SAVED_NARRATIVES:"Saved scenarios",NARRATIVE:"narrative",INCLUDE_NARRATIVE:"Include scenario",NARRATIVE_INCLUDED:"Scenario is included",SELECT_NARRATIVE:"Select narrative",SELECT_SCENARIO:"Select scenario",KEY:"Key",VALUE:"Value",MODEL:"Model",SELECTION:"Selected value",EDITOR_PLACEHOLDER:"Edit narrative",THRESHOLDS:"Thresholds colors reflecting component options",THRESHOLD:"Threshold value",COLOR:"Color",ORDER:"Order",COMBINATIONS:{POSSIBLE:"Combinations are possible",IMPOSSIBLE:"Combinations are impossible",IMPROBABLE:"Combinations are improbable"},DELETE_ITEM:{title:"Delete {item}",description:"Are you certain you want to delete this {item}. There is no turning back?"},NEW_SCENARIO:"New scenario",NEW_MODEL:{btn:"New collection",title:"Choose a new scenario model and erase everything",description:"Are you sure that you want to delete your existing collection and start one of the available new ones? There is no way back.",choose:"Choose your new collection",remove:"Remove all key values"},DELETE_MODEL:{btn:"Delete scenario",title:"Delete the selected scenario",description:"Are you sure that you want to delete your scenario? There is no way back."},INCONSISTENCIES:{title:"Inconsistencies",SELECT_ROW_CATEGORY:"Select row category",SELECT_COLUMN_CATEGORY:"Select column category",SELECT_CATEGORIES_TO_START:"Select categories to start"},saveButton:{label:"Save",tooltip:"Save unsaved changes"},i18n:{editRepeat:"Edit",createRepeat:"Add",deleteItem:"Delete",agree:"Yes",disagree:"No",pick:"Pick",pickOne:"Pick one",pickOneOrMore:"Pick one or more",cancel:"Cancel",save:"Save"},COMP:{AVAILABLEBUDGET:"Budget",BEHAVIOURDURINGPREPARATION:"Behaviour during preparation",CAPABILITIES:"Capability",COMPARTMENTSPRESENT:"Compartments present",CRIMINALPHASE:"Criminal phase",DURATION:"Duration",EQUIPMENT:"Equipment",EXISTINGINFRA:"Existing infra",IMPACT:"Impact",INTENT:"Bystander intent",LOCATION:"Location",LOCATION2:"Location",MODUSOPERANDIDURINGEXECUTION:"Mode of operation",MOTIVATION:"Motivation",NARRATIVE:"Narrative",NARRATIVE_PLACEHOLDER:"Describe the context in which the incident took place, such as a description of the (geographic) location, the person or building that must be protected, the way an actor obtains information, at what time did the action take place, under what weather circumstances, how many persons were involved in the action, from which organisation, how did they obtain access, or which means/weapons were employed.",OBJECT:"Object",OPENCOMPARTMENTS:"Open compartment",PEOPLEDENSITY:"Person density",PERSONS:"Person",PHYSICALANGLEOFATTACKDURINGEXECUTION:"Physical angle of attack",PHYSICAL_ANGLE:"Physical angle",PRIVACYAWARENESS:"Privacy awareness",RELATIONOWNEROBJECTANDOWNERSECURITYSYSTEM:"Relation owner object and owner security system",RESPONSIBILITY:"Responsibility",SCENARIOS:"Scenario",SECURITYAWARENESS:"Security awareness",TARGETTYPE:"Target type",THREATDIRECTION:"Threat direction",ACTOR:"Actor",ACTION:"Action",ACCESS:"Access",MEANS:"Means",TYPEOFENVIRONMENT:"Environment type",TYPEOFOBJECT:"Type of object",WEAPON:"Weapon",WEATHERBEHAVIOUR:"Weather behaviour",WEATHERTYPE:"Weather condition",PI:"Protected interest (target)",MEANSWEAPON:"Means/weapon",MISSIONCONTEXT:"Mission context",ADVERSARY:"Adversary",C2HEADQUARTERS:"C2-HQ location",TARGET:"Target",DELIBERATEACTION:"Deliberate action",MEANS2:"Means of attack",MEANS3:"Means for action",MEANS4:"Means for access",ACCESS2:"Means of access",MEANS2ACCESS:"Means to access"},MODEL_NAMES:{0:"Empty model",1:"Simple model (in English)"},MODEL_DESC:{0:"An empty scenario model.",1:"A scenario model with a threat and a context category."},JSON_NOT_VALID:"JSON model file not valid! Aborting.",NO_NARRATIVE:"Narrative not generated in 100 tries!",SPEC_CATS:"First specify some categories, where each category contains some key drivers.",EXPORT2WORD:{TITLE:"Export to Word",DESC:"Which scenario do you want to export?",CURRENT:"Current",SELECTED:"Selected",ALL:"All"},HIDE_INCONSISTENT:"Hide inconsistent combinations",GOAL:{TITLE:"Goal",DESC:"ScenarioSpark is a web application that can be used to systematically create and manage a set of scenarios for risk management activities."},USAGE:{TITLE:"Usage",DESC:"ScenarioSpark supports the user in creating and compiling a representative set of scenarios that can be used in the various steps of the risk management process."},SECURITY:{TITLE:"Security",DESC:"All information used and entered is processed and stored exclusively locally."},SUMMARY:"A free tool to support you in creating new scenarios using a morphological box. First, you define the aspects that are of interest in your domain. Next, you specify variations for each aspect. And finally, you either manually create new scenarios, or become inspired by generating possible scenarios automatically.",SET_LANGUAGE:"Set language",SCENARIO_LOADED_MSG:"Scenario successfully loaded",COLLECTION_LOADED_MSG:"The scenario collection is loaded",SCENARIO_NOT_LOADED_MSG:"The scenario is not loaded: most likely cause, scenario is already part of the collection.",SCENARIO_CREATED_MSG:"A new scenario is created",COPY_TO_CLIPBOARD:"Copy table to clipboard",GROUP:{SELECTED:"Selected scenarios",UNSELECTED:"Unselected scenarios"},CLONE_NARRATIVE:"Clone",INCLUDE_DECISION_SUPPORT:"Activate decision support",IS_DECISION_CATEGORY:"For decision support",PROBABILITY:"Probability of occurence",IMPACT:"Impact",RISK:"Risk",RISK_PLACEHOLDER:"Probability x Impact",PROB5:{0:"Very low",1:"Low",2:"Medium",3:"High",4:"Very high"},IMP5:{0:"Very low",1:"Low",2:"Medium",3:"High",4:"Very high"},RISK5:{0:"Very low",1:"Low",2:"Medium",3:"High",4:"Very high"},SUGGESTED_APPROACH:{TITLE:"Suggested approach",DESC:"The suggested approach is a (risk-)weighted combination of the selected counter-measures."},TEMPLATE:{TITLE:"Template string for fluid text",DESC:"Write a paragraph where XXX is replaced by the value for key factor 1, etc. Empty lines are converted to paragraphs."},SELECT_PERSONA:"Select relevant persona for scenario",PERSONA_IMPRESSION:"Impression",PERSONA:{1:"Persona",n:"Personas"},IMAGE:"Image",SAVE:"Save",EDIT:"Edit",LLM:"LLM",SERVICE:"Service",PROVIDER:"Provider",SYSTEM_PROMPT:"System prompt",USER_PROMPT:"Narrative prompt",EFFECT_PROMPT:"Effect prompt",PERSONA_PROMPT:"Persona prompt",COMMUNICATIONS_PROMPT:"Communications prompt",TEMPERATURE:{BTN:"Temperature",DESC:"How creative should the LLM be (max = 1)?"},API_KEY:"API key",URL:"URL",ASK_LLM:"Ask LLM",INCLUDE_LLM:"Include in LLM",OLLAMA_URL:"Hostname (and port, optionally via a [proxy](https://github.com/erikvullings/proxy))",ADV_EDIT:"Code editor",TOGGLE:{SHOW:"Show table",HIDE:"Hide table"},AUTO_CREATE:{BTN:"Auto create",COUNT:"LLM auto create count",COUNT_DESC:"How many scenarios do you want to generate at once?"},AUTO_CREATE_MSG:{1:"Auto create 1 scenario",n:"Auto create {n} scenarios"},COPY_BOX:{LABEL:"Copy box",TITLE:"Copy table to clipboard",TOAST:"Morphological box copied to clipboard."},PROMPT_TYPE:{PROMPTS:"Prompts",LABEL:"Prompt type",NARRATIVE:"Narrative prompt",EFFECT:"Effect prompt",PERSONA:"Persona prompt",COM:"Communications prompt"},RESPONSE_INSTRUCTIONS:"Start your response with a short, descriptive title on its own line, then a blank line, then the main content.",WIZARD_STEP1_TITLE:"Scenario Information",WIZARD_STEP1_SUBTITLE:"Name and describe your scenario",WIZARD_STEP2_TITLE:"Key Drivers",WIZARD_STEP2_SUBTITLE:"Define the morphological category and key drivers",WIZARD_STEP3_TITLE:"Driver Options",WIZARD_STEP3_SUBTITLE:"Optionally add options for each driver",WIZARD_CATEGORY_INFO:"Category details",WIZARD_COMPONENTS_INFO:"Key drivers (dimensions)",WIZARD_VALUES_INFO:"Select a driver to add options:",WIZARD_NO_COMPONENTS:"No drivers defined yet. Go back to step 2.",WIZARD_VALUES_FOR_COMPONENT:"Options for {component}",WIZARD_NEXT:"Next",WIZARD_PREVIOUS:"Back",WIZARD_COMPLETE:"Create Scenario",WIZARD_SKIP:"Skip",LLM_WIZARD_TITLE:"Generate Scenario with LLM",LLM_WIZARD_STEP1_TITLE:"Define Requirements",LLM_WIZARD_STEP1_SUBTITLE:"Specify what you want to generate",LLM_WIZARD_STEP1_DESC:"Fill in the details below to customize your morphological box generation:",LLM_WIZARD_STEP2_TITLE:"Review Prompt",LLM_WIZARD_STEP2_SUBTITLE:"Review and edit the complete prompt",LLM_WIZARD_STEP2_DESC:"Review the combined prompt below. You can edit it if needed:",LLM_WIZARD_STEP3_TITLE:"Configure LLM",LLM_WIZARD_STEP3_SUBTITLE:"Choose LLM service and settings",LLM_WIZARD_STEP3_DESC:"Configure how you want to generate the morphological box:",LLM_WIZARD_STEP4_TITLE:"Generate Scenario",LLM_WIZARD_STEP4_SUBTITLE:"Generate or paste the result",LLM_WIZARD_STEP4_CLIPBOARD_DESC:"The prompt is ready. Copy it and use an external LLM to generate the morphological box:",LLM_PURPOSE:"Purpose",LLM_PURPOSE_HELP:'What do you want to explore or design? E.g., "crisis management scenarios for national emergency planning"',LLM_DOMAIN:"Domain",LLM_DOMAIN_HELP:'Specify the field or context, e.g., "disaster response", "cybersecurity", "military operations"',LLM_OUTPUT_TYPE:"Output Type",LLM_OUTPUT_TYPE_HELP:"One morphological box, multiple boxes, scenario-focused, measure-focused, or both?",LLM_CONSTRAINTS:"Constraints or Focus Areas",LLM_CONSTRAINTS_HELP:'E.g., "Include socio-political, environmental, and technological factors"',LLM_DETAIL_DEPTH:"Detail Depth",LLM_DETAIL_DEPTH_HELP:'E.g., "Include 6-7 detailed options per factor, each with a one-sentence definition"',LLM_LANGUAGE:"Output Language",LLM_LANGUAGE_HELP:'The language for the generated content, e.g., "English", "Dutch"',LLM_FULL_PROMPT:"Complete Prompt",LLM_ENDPOINT:"Generation Method",LLM_CLIPBOARD:"Copy to Clipboard (use external LLM)",LLM_OLLAMA:"Generate with Ollama",LLM_OPENAI:"Generate with OpenAI",LLM_OLLAMA_URL_HELP:"Ollama API URL, e.g., http://localhost:11434/api/chat",LLM_OPENAI_URL_HELP:"OpenAI API URL (leave empty for default)",LLM_OLLAMA_MODEL_HELP:"Model name, e.g., gemma2, llama3, qwen2.5",LLM_OPENAI_MODEL_HELP:"Model name, e.g., gpt-4o-mini, gpt-4o",LLM_COPY_PROMPT:"Copy Prompt to Clipboard",LLM_PROMPT_COPIED:"Prompt copied to clipboard!",LLM_PASTE_OUTPUT:"Paste the LLM output below:",LLM_GENERATE:"Generate with LLM",LLM_GENERATING:"Generating with LLM...",LLM_ERROR:"Error generating",LLM_GENERATED_MARKDOWN:"Generated Markdown"},nh={HOME:{TITLE:"home",ROUTE:"/home"},ABOUT:{TITLE:"over de app",ROUTE:"/over"},DEFINE_BOX:{TITLE:"Morfologische box",ROUTE:"/definieer"},SETTINGS:{TITLE:"Instellingen",ROUTE:"/instellingen"},CREATE_SCENARIO:{TITLE:"Maak scenario",ROUTE:"/maak"},SHOW_SCENARIO:{TITLE:"Toon scenario's",ROUTE:"/toon"},DECISION_SUPPORT:{TITLE:"Beslisondersteuning",ROUTE:"/beslis"},DOWNLOAD:{COLLECTION:"Bewaar collectie",MODEL:"Bewaar scenario bestand"},UPLOAD:{COLLECTION:"Lees collectie",MODEL:"Lees scenario bestand"},CANCEL:"Afbreken",DELETE:"Verwijderen",AND:"en",YES:"Ja",NO:"Nee",OK:"Ok",NAME:"Naam",DESCRIPTION:"Omschrijving",NEW_BOX:"Nieuwe morfologische box",CATEGORIES:"Categorie\xebn",DIMENSION:"Hoofdfactor",DIMENSION_SELECTED:"Geselecteerde stuurfactoren",DIMENSIONS:"Stuurfactoren",KEY_VALUE:"Waarde",CONTEXT:"Context",NONE:"Geen",LOCATION:"Locatie",LOCATION_TYPE:"Locatietype",COORDINATES:"Coordinaten",LOCATION_NAME:"Locatienaam",LATITUDE:"Latitude",LONGITUDE:"Longitude",MANUAL:"Manuele mode",Type:"Type",PICK_FROM_LIST:"Kies uit de lijst",ENTER_KEY_VALUE:"Vul een sleutel en waarde in",EDIT_COMPONENT:"Bewerk optie",ADD_COMPONENT:"Nieuwe optie",GENERATE_NARRATIVE:"Genereer",CLEAR_NARRATIVE:"Wis",NARRATIVE:"verhaallijn",NAME_NARRATIVE:"Titel van huidige verhaallijn",SAVE_NARRATIVE:"Bewaar",SAVED_NARRATIVES:"Bewaarde scenario's",INCLUDE_NARRATIVE:"Selecteer scenario",NARRATIVE_INCLUDED:"GESELECTEERD",SELECT_NARRATIVE:"Selecteer verhaallijn",SELECT_SCENARIO:"Selecteer scenario",KEY:"Sleutel",VALUE:"Waarde",MODEL:"Model",SELECTION:"Geselecteerde waarde",EDITOR_PLACEHOLDER:"Bewerk verhaallijn",THRESHOLDS:"Kleuren voor weergave gebruik van opties",THRESHOLD:"Drempelwaarde",COLOR:"Kleur",ORDER:"Volgorde",COMBINATIONS:{POSSIBLE:"Combinaties zijn mogelijk",IMPOSSIBLE:"Combinaties zijn onmogelijk",IMPROBABLE:"Combinaties zijn onwaarschijnlijk"},DELETE_ITEM:{title:"Verwijder {item}",description:"Weet u zeker dat u de {item} wilt verwijderen? Dit kan niet ongedaan gemaakt worden."},NEW_SCENARIO:"Nieuw scenario",NEW_MODEL:{btn:"Nieuwe collectie",title:"Kies een nieuw scenario en wis alles",description:"Weet u zeker dat u de huidige collectie wilt wissen, en met \xe9\xe9n van onderstaande modellen wilt verdergaan? Er is geen weg terug.",choose:"Kies uw nieuwe scenario",remove:"Verwijder alle reeds ingevulde waarden"},DELETE_MODEL:{btn:"Verwijder scenario",title:"Verwijder het geselecteerde scenario",description:"Weet u zeker dat u uw scenario wilt verwijderen? Er is geen weg terug."},INCONSISTENCIES:{title:"Bewerk inconsistencies",SELECT_ROW_CATEGORY:"Selecteer rij categorie",SELECT_COLUMN_CATEGORY:"Selecteer kolom categorie",SELECT_CATEGORIES_TO_START:"Selecteer categorie\xebn om te beginnen"},saveButton:{label:"Opslaan",tooltip:"Sla aanpassingen op"},i18n:{editRepeat:"Bewerk",createRepeat:"Nieuw",deleteItem:"Verwijder",agree:"Ja",disagree:"Nee",pick:"Kies",pickOne:"Kies \xe9\xe9n",pickOneOrMore:"Kies \xe9\xe9n of meer",cancel:"Afbreken",save:"Opslaan"},COMP:{AVAILABLEBUDGET:"Budget",BEHAVIOURDURINGPREPARATION:"Gedrag tijdens voorbereiding",CAPABILITIES:"Capability",COMPARTMENTSPRESENT:"Aanwezige compartimenten",CRIMINALPHASE:"Criminele fase",DURATION:"Duur",EQUIPMENT:"Materieel",EXISTINGINFRA:"Bestaande infra",IMPACT:"Impact",INTENT:"Intentie publiek",LOCATION:"TBB: locatie",LOCATION2:"Locatie",MODUSOPERANDIDURINGEXECUTION:"Modus operandus",MOTIVATION:"Motivatie",NARRATIVE:"Verhaallijn",NARRATIVE_PLACEHOLDER:"Beschrijf de context waarin het incident plaatsvindt, zoals een nadere beschrijving van de (geografische) locatie, de te beschermen persoon of gebouw, de wijze waarop een actor informatie verzamelt, op welk tijdstip vindt de actie plaats, onder welke weersomstandigheden, hoeveel personen zijn er betrokken bij de actie, van welke organisatie, hoe kregen ze toegang, of welke middelen/wapens werden ingezet.",OBJECT:"Object",OPENCOMPARTMENTS:"Open compartiment",PEOPLEDENSITY:"Personendichtheid",PERSONS:"Persoon",PHYSICALANGLEOFATTACKDURINGEXECUTION:"Fysieke aanvalshoek",PHYSICAL_ANGLE:"Fysieke hoek",PRIVACYAWARENESS:"Privacy-bewustzijn",RELATIONOWNEROBJECTANDOWNERSECURITYSYSTEM:"Relatie eigenaar object en eigenaar beveiligingssysteem",RESPONSIBILITY:"Verantwoordelijkheid",SCENARIOS:"Scenario",SECURITYAWARENESS:"Beveiligingsbewustzijn",TARGETTYPE:"Doeltype",THREATDIRECTION:"Dreigingsrichting",ACTOR:"Actor",ACTION:"Moedwillige actie",ACCESS:"Wijze van toegang",MEANS:"Middel / wapen",TYPEOFENVIRONMENT:"Omgevingstype",TYPEOFOBJECT:"Objecttype",WEAPON:"Wapen",WEATHERBEHAVIOUR:"Weersgedrag",WEATHERTYPE:"Weersconditie",PI:"TBB: Soort doelwit",MEANSWEAPON:"Middel/wapen",MISSIONCONTEXT:"Missiecontext",ADVERSARY:"Tegenstander",C2HEADQUARTERS:"C2-HQ locatie",TARGET:"Doelwit",DELIBERATEACTION:"Moedwillige actie",MEANS2:"Aanslagmiddel",MEANS3:"Middel tbv actie",MEANS4:"Middel tbv toegang",ACCESS2:"Wijze van binnendringen",MEANS2ACCESS:"Middel om binnen te dringen"},MODEL_NAMES:{0:"Leeg model",1:"Simpel model (in Engels)"},MODEL_DESC:{0:"Een leeg scenario model.",1:"Een scenario model met een dreigings- en contextcategorie."},JSON_NOT_VALID:"JSON bestand niet valide! Het inladen wordt afgebroken.",NO_NARRATIVE:"Er kon geen verhaallijn gegenereerd worden na 100 pogingen!",SPEC_CATS:"Definieer eerst 1 of 2 categorie\xebn, met in iedere categorie enkele hoofdfactoren.",EXPORT2WORD:{TITLE:"Exporteer naar Word",DESC:"Welke scenario's wilt u exporteren?",CURRENT:"Huidige",SELECTED:"Selectie",ALL:"Allemaal"},HIDE_INCONSISTENT:"Verberg inconsistente combinaties",GOAL:{TITLE:"Doel",DESC:"ScenarioSpark is een webapplicatie waarmee systematisch een set scenario’s ten behoeve van risicomanagement- activiteiten kan worden gemaakt en beheerd."},USAGE:{TITLE:"Gebruik",DESC:"ScenarioSpark ondersteunt de gebruiker bij het op- en samenstellen van een representatieve set scenario’s die gebruikt kan worden in de diverse stappen van het risicomanagement proces. "},SECURITY:{TITLE:"Security",DESC:"Alle gebruikte en ingevoerde informatie wordt uitsluitend lokaal verwerkt en opgeslagen."},SUMMARY:"Een gratis hulpmiddel om u te ondersteunen bij het cre\xebren van nieuwe scenario's met behulp van een morfologische doos. Eerst definieert u de aspecten die van belang zijn voor uw domein. Vervolgens specificeert u variaties voor elk aspect. En ten slotte cre\xeber je handmatig nieuwe scenario's, of laat u zich inspireren door mogelijke scenario's te genereren.",SET_LANGUAGE:"Kies de taal",SCENARIO_LOADED_MSG:"Het scenario is ingeladen",COLLECTION_LOADED_MSG:"De scenario's zijn ingeladen",SCENARIO_NOT_LOADED_MSG:"Het scenario is niet ingeladen: mogelijk bestaat het al in de collectie.",SCENARIO_CREATED_MSG:"Een nieuw scenario is aangemaakt",COPY_TO_CLIPBOARD:"Kopieer tabel naar het plakbord",GROUP:{SELECTED:"Geselecteerd",UNSELECTED:"Niet geselecteerd"},CLONE_NARRATIVE:"Kopieer",INCLUDE_DECISION_SUPPORT:"Activeer beslisondersteuning",IS_DECISION_CATEGORY:"Voor beslisondersteuning",PROBABILITY:"Kans van optreden",IMPACT:"Impact",RISK:"Risico",RISK_PLACEHOLDER:"Kans x Impact",PROB5:{0:"Zeer laag",1:"Laag",2:"Gemiddeld",3:"Hoog",4:"Zeer hoog"},IMP5:{0:"Zeer laag",1:"Laag",2:"Gemiddeld",3:"Hoog",4:"Zeer hoog"},RISK5:{0:"Zeer laag",1:"Laag",2:"Gemiddeld",3:"Hoog",4:"Zeer hoog"},SUGGESTED_APPROACH:{TITLE:"Aanbevolen aanpak",DESC:"De aanbevolen aanpak is gebaseerd op een risicogewogen combinatie van de gekozen maatregelen."},TEMPLATE:{TITLE:"Template om de stuurfactoren te vertalen naar een lopende tekst.",DESC:"Schrijf een paragraaf waarbij XXX zal vervangen worden door de waarde van factor 1, etc. Lege regels worden omgezet naar paragrafen."},SELECT_PERSONA:"Selecteer relevante persona's",PERSONA_IMPRESSION:"Impressie",PERSONA:{1:"Persona",n:"Personas"},IMAGE:"Afbeelding",EDIT:"Bewerken",SAVE:"Opslaan",LLM:"LLM",SERVICE:"Service",PROVIDER:"Provider",SYSTEM_PROMPT:"Systeem prompt",USER_PROMPT:"Scenario prompt",EFFECT_PROMPT:"Effect prompt",PERSONA_PROMPT:"Persona prompt",COMMUNICATIONS_PROMPT:"Communicatie prompt",TEMPERATURE:{BTN:"Temperatuur",DESC:"Hoe creatief mag de LLM zijn (max = 1)?"},API_KEY:"API sleutel",URL:"URL",ASK_LLM:"Vraag LLM",INCLUDE_LLM:"Stuur naar LLM",OLLAMA_URL:"Domeinnaam (en poort, eventueel via een [proxy](https://github.com/erikvullings/proxy))",ADV_EDIT:"Code editor",TOGGLE:{SHOW:"Toon tabel",HIDE:"Verberg tabel"},AUTO_CREATE:{BTN:"Autom.",COUNT:"LLM auto gen aantal",COUNT_DESC:"Hoeveel verhaallijnen moeten automatisch gemaakt worden?"},AUTO_CREATE_MSG:{1:"Genereer 1 scenario automatisch",n:"Genereer {n} scenario's automatisch"},COPY_BOX:{LABEL:"Kopieer box",TITLE:"Kopieer box naar clipboard",TOAST:"Morphologische box is gekopieerd naar het clipboard."},PROMPT_TYPE:{LABEL:"Prompt type",PROMPTS:"Prompts",NARRATIVE:"Prompt voor narratieve",EFFECT:"Prompt voor effecten",PERSONA:"Prompt voor persona's",COM:"Prompt voor communicatie"},RESPONSE_INSTRUCTIONS:"Start je antwoord met een korte beschrijvende titel op een eigen regel, gevolgd door een lege regel en dan de rest van de inhoud.",WIZARD_STEP1_TITLE:"Scenario Informatie",WIZARD_STEP1_SUBTITLE:"Geef uw scenario een naam en beschrijving",WIZARD_STEP2_TITLE:"Stuurfactoren",WIZARD_STEP2_SUBTITLE:"Definieer de morfologische categorie en stuurfactoren",WIZARD_STEP3_TITLE:"Opties voor Stuurfactoren",WIZARD_STEP3_SUBTITLE:"Voeg optioneel opties toe voor elke stuurfactor",WIZARD_CATEGORY_INFO:"Categorie details",WIZARD_COMPONENTS_INFO:"Stuurfactoren (dimensies)",WIZARD_VALUES_INFO:"Selecteer een stuurfactor om opties toe te voegen:",WIZARD_NO_COMPONENTS:"Nog geen stuurfactoren gedefinieerd. Ga terug naar stap 2.",WIZARD_VALUES_FOR_COMPONENT:"Opties voor {component}",WIZARD_NEXT:"Volgende",WIZARD_PREVIOUS:"Terug",WIZARD_COMPLETE:"Scenario Aanmaken",WIZARD_SKIP:"Overslaan",LLM_WIZARD_TITLE:"Genereer Scenario met LLM",LLM_WIZARD_STEP1_TITLE:"Definieer Vereisten",LLM_WIZARD_STEP1_SUBTITLE:"Specificeer wat u wilt genereren",LLM_WIZARD_STEP1_DESC:"Vul onderstaande details in om uw morfologische box te genereren:",LLM_WIZARD_STEP2_TITLE:"Bekijk Prompt",LLM_WIZARD_STEP2_SUBTITLE:"Bekijk en bewerk de volledige prompt",LLM_WIZARD_STEP2_DESC:"Bekijk de gecombineerde prompt hieronder. U kunt deze indien nodig bewerken:",LLM_WIZARD_STEP3_TITLE:"Configureer LLM",LLM_WIZARD_STEP3_SUBTITLE:"Kies LLM service en instellingen",LLM_WIZARD_STEP3_DESC:"Configureer hoe u de morfologische box wilt genereren:",LLM_WIZARD_STEP4_TITLE:"Genereer Scenario",LLM_WIZARD_STEP4_SUBTITLE:"Genereer of plak het resultaat",LLM_WIZARD_STEP4_CLIPBOARD_DESC:"De prompt is klaar. Kopieer deze en gebruik een externe LLM om de morfologische box te genereren:",LLM_PURPOSE:"Doel",LLM_PURPOSE_HELP:'Wat wilt u onderzoeken of ontwerpen? Bijv. "crisismanagement scenario\'s voor nationale rampenplanning"',LLM_DOMAIN:"Domein",LLM_DOMAIN_HELP:'Specificeer het vakgebied of de context, bijv. "rampenbestrijding", "cyberbeveiliging", "militaire operaties"',LLM_OUTPUT_TYPE:"Output Type",LLM_OUTPUT_TYPE_HELP:"\xc9\xe9n morfologische box, meerdere boxen, scenario-gericht, maatregel-gericht, of beide?",LLM_CONSTRAINTS:"Beperkingen of Focusgebieden",LLM_CONSTRAINTS_HELP:'Bijv. "Inclusief sociaal-politieke, ecologische en technologische factoren"',LLM_DETAIL_DEPTH:"Detailniveau",LLM_DETAIL_DEPTH_HELP:'Bijv. "Inclusief 6-7 gedetailleerde opties per factor, elk met een definitie van \xe9\xe9n zin"',LLM_LANGUAGE:"Output Taal",LLM_LANGUAGE_HELP:'De taal voor de gegenereerde inhoud, bijv. "Nederlands", "Engels"',LLM_FULL_PROMPT:"Volledige Prompt",LLM_ENDPOINT:"Generatie Methode",LLM_CLIPBOARD:"Kopieer naar Klembord (gebruik externe LLM)",LLM_OLLAMA:"Genereer met Ollama",LLM_OPENAI:"Genereer met OpenAI",LLM_OLLAMA_URL_HELP:"Ollama API URL, bijv. http://localhost:11434/api/chat",LLM_OPENAI_URL_HELP:"OpenAI API URL (laat leeg voor standaard)",LLM_OLLAMA_MODEL_HELP:"Modelnaam, bijv. gemma2, llama3, qwen2.5",LLM_OPENAI_MODEL_HELP:"Modelnaam, bijv. gpt-4o-mini, gpt-4o",LLM_COPY_PROMPT:"Kopieer Prompt naar Klembord",LLM_PROMPT_COPIED:"Prompt gekopieerd naar klembord!",LLM_PASTE_OUTPUT:"Plak de LLM output hieronder:",LLM_GENERATE:"Genereer met LLM",LLM_GENERATING:"Genereren met LLM...",LLM_ERROR:"Fout bij genereren",LLM_GENERATED_MARKDOWN:"Gegenereerde Markdown"},ng=[],nv={defaultLocale:"en",currentLocale:"en",locales:{},init:function(e,t){return np(function(){var n;return nm(this,function(r){switch(r.label){case 0:return nv.locales=e,(n=Object.keys(e).filter(function(t){return e[t].default}).shift())&&(nv.defaultLocale=n||t),document.documentElement.setAttribute("lang",t),[4,nb(t)];case 1:return r.sent(),[2]}})})()},addOnChangeListener:function(e){ng.push(e)},loadAndSetLocale:nb,i18n:{}};function nb(e){return np(function(){var t;return nm(this,function(n){var r;return r=e,t=Object.keys(nv.locales).indexOf(r)>=0?e:nv.defaultLocale,nv.currentLocale=t,nv.i18n={editRepeat:(s=nc("nl"===e?nh:nf,{debug:!0,array:!0,resolveAliases:!0,pluralize:nd.plural_EN,useKeyForMissingTranslation:!0}))("i18n","editRepeat"),createRepeat:s("i18n","createRepeat"),deleteItem:s("i18n","deleteItem"),agree:s("i18n","agree"),disagree:s("i18n","disagree"),pickOne:s("i18n","pickOne"),pickOneOrMore:s("i18n","pickOneOrMore"),cancel:s("i18n","cancel"),save:s("i18n","save")},ng.forEach(function(e){return e(nv.currentLocale,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nv.currentLocale;return nv.locales[e].dir||"ltr"}())}),[2]})})()}let ny=n.p+"e8244ad7ec8b2937.png",nw=n.p+"ec3f975a962f44ff.png";function nE(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nT(e){return function(e){if(Array.isArray(e))return nE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nE(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nE(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var nk=function(){return{view:function(e){var t,n,r=e.children,i=e.attrs,o=function(e){return i.state.page===e.id?".active":""},a=ib.getList().filter(function(e){var t,n;return("boolean"==typeof e.visible?e.visible:e.visible(null==(n=i.state)||null==(t=n.model)?void 0:t.scenario))||o(e)}),l=nv.currentLocale;return d()(".main",{style:"overflow-x: hidden"},[d()(".navbar-fixed",d()("nav",d()(".nav-wrapper",[d()("a.brand-logo[href=#].show-on-large",{style:{marginLeft:"20px",height:"60px"}},[d()("img[width=140][height=60][src=".concat(eH,"][alt=TNO]"),{style:"margin-left: -5px;"}),d()(".title.show-on-med-and-up.truncate",null==(n=i.state.model)||null==(t=n.scenario)?void 0:t.label)]),d()(d().route.Link,{className:"sidenav-trigger","data-target":"slide-out",href:d().route.get()},d()(w,{iconName:"menu",className:"hide-on-large-and-up black-text",style:"margin-left: 5px;"})),d()("ul#dropdown_languages.dropdown-content",[d()("li",d()("a",{href:"#!",onclick:function(){return ni(i,"nl")}},[d()("img",{src:ny,alt:"Nederlands",title:"Nederlands",disabled:"nl"===l,class:"nl"===l?"disabled-image":"clickable"}),"Nederlands"])),d()("li",d()("a",{href:"#!",onclick:function(){return ni(i,"en")}},[d()("img",{src:nw,alt:"English",title:"English",disabled:"en"===l,class:"en"===l?"disabled-image":"clickable"}),"English"]))]),d().apply(void 0,["ul#slide-out.sidenav.hide-on-large-and-up"].concat(nT(a.map(function(e){return d()("li.tooltip".concat(o(e),".unselectable"),[d()("a",{href:ib.href(e.id)},d()(w,{className:e.iconClass?" ".concat(e.iconClass):"",iconName:"string"==typeof e.icon?e.icon:e.icon()}),("string"==typeof e.title?e.title:e.title()).toUpperCase())])})),[d()("li",d()(eL))])),d().apply(void 0,["ul.right.hide-on-med-and-down"].concat(nT(a.map(function(e){return d()("li.tooltip".concat(o(e),".unselectable"),[d()(w,{className:"hoverable"+(e.iconClass?" ".concat(e.iconClass):""),style:"font-size: 2.2rem; width: 4rem;",iconName:"string"==typeof e.icon?e.icon:e.icon(),onclick:function(){return t8(i,e.id)}}),d()("span.tooltiptext",("string"==typeof e.title?e.title:e.title()).toUpperCase())])})),[d()("li",d()(eL))]))]))),d()(".container",r)])}}};let nO=n.p+"094cb0b3bbf09476.png",nx=n.p+"c74483ed5cfc0c92.png",nS=n.p+"c4f17dae74c10fe5.png",nI=n.p+"c03c2e1f7852da96.png",nL=n.p+"bb94794d7d411f8a.png",nA=n.p+"7dcc9881475f4790.png";var nC="_ScenarioSpark is ontwikkeld als ondersteunend instrument voor de methode “Risicomanagement Integrale Beveiliging”. Specifiek biedt ScenarioSpark vooral ondersteuning bij de uitvoering van stap 2 van deze methode. Het betreft de stap waarin onder meer de te behandelen dreigingsscenario’s voor de TBB’s worden bepaald._\n\n![De zes stappen van de methode “Risicomanagement Integrale Beveiliging”](".concat(nO,")"),nN="### Het ontwikkelen van creatieve scenario’s\n\nNavigeer in het hoofdmenu naar ‘maak scenario’.\n\n![Menubalk met instellingen](".concat(nx,")\n![Model en inconsistenties](").concat(nL,")\n\nDe pagina bestaat uit een aantal componenten:\n\n1. Drie knoppen: ‘genereer’, ‘wis’ en 'bewaar’;\n2. Een drop down menu waarin eerder gegenereerde scenario’s weer opgeroepen kunnen worden;\n3. De factoren waaruit de morfologische box is opgebouwd;\n4. Een ‘slotje’ achter ieder van de factoren;\n5. Een beschrijvende titel die kan worden toegekend aan het scenario;\n6. Een vinkje dat aangeeft of het scenario is geselecteerd voor evaluatie;\n7. Een tekst vak waarin de scenariostam verder kan worden uitgewerkt, eventueel met opmaak en/of afbeeldingen.\n\nDoor op ‘genereer’ te klikken wordt er aan de hand van de morfologische box een scenario gegeneerd waarbij random een optie wordt toegekend aan elk van de factoren. De gebruiker heeft een aantal mogelijkheden:\n\n1. Het scenario houden zoals is gegenereerd door de morfologische box;\n2. Enkele factoren vastzetten door middel van het slotje en nieuwe opties genereren voor de andere factoren door opnieuw op ‘genereer’ te klikken;\n3. Een scenario wijzigen of aanvullen door zelf een optie te kiezen voor een factor of meerdere opties te selecteren voor een factor;\n4. Een compleet nieuw scenario door de tool laten genereren;\n5. Een eigen scenario te cre\xebren door handmatig optie(s) voor elke factor te selecteren.\n\nIndien de gebruiker tevreden is met het gegenereerde scenario kan ervoor worden gekozen het scenario toe te voegen aan de lijst met de te evalueren dreigingsscenario’s. Het scenario kan worden uitgeschreven tot een verhaal en er kan een titel worden gegeven om het scenario herkenbaar en ondubbelzinnig te maken.\n\n### Het samenstellen van een beperkte, maar toch representatieve set van scenario’s.\n\n#### Modus uitsluiten inconsistenties\n\nSommige combinaties van opties van factoren zijn onmogelijk of onwaarschijnlijk. Denk bijvoorbeeld aan een cybercrimineel (actor) die fysieke informatie steelt (doelwit) door middel van een ramvoertuig (middel/ wapen). Om deze reden is er in ScenarioSpark een kruistabel toegevoegd die weergeeft wanneer combinaties van opties van factoren mogelijk, onmogelijk of onwaarschijnlijk zijn. Wanneer de modus ‘uitsluiten inconsistenties’ is aangevinkt in instellingen, is het niet mogelijk om handmatig een optie voor een factor te kiezen die onmogelijk of onwaarschijnlijk is in combinatie met de reeds geselecteerde opties voor de andere factoren."),nD="### Aanpassen morfologische box\n\nHet aanpassen van de morfologische box kan worden gedaan in ‘instellingen’ onder het kopje ‘model’.\n\n![Menubalk met instellingen](".concat(nS,")\n\n### Aanpassen categorie\xebn\nDoor het instellen van categorie\xebn kan de morfologische box in meerdere delen worden gesplitst (zoals dreigingen, objecten, omstandigheden). Deze mogelijkheid wordt niet gebruikt binnen de context van de Tweede Kamer.\n\n### Selectie getoonde factoren\n\nIn dit drop down menu kan een selectie worden gemaakt van de factoren die meegenomen worden in de morfologische box.\n\n### Aanpassen factoren\n\nNieuwe factoren kunnen worden toegevoegd door op het plusje naast ‘factoren’ te klikken. Er dienen een aantal gegevens te worden ingevuld:\n\n1. Volgorde (de plek in de morfologische box waar de factor komt te staan);\n2. Manuele mode (bij het automatisch genereren van een scenario wordt deze factor overgeslagen, en dient dus manueel gekozen te worden);\n3. Naam;\n4. Omschrijving.\n\nFactoren kunnen worden gewijzigd door naar de desbetreffende factor te navigeren. Factoren kunnen worden verwijderd door aan de rechterkant op het kruisje te klikken.\n\n### Aanpassen opties binnen factoren\n\nHet aanpassen van opties binnen factoren gebeurt op de pagina van de morfologische box zelf.\n\n![Genereren van varianten](").concat(nI,")\n\nEr kunnen nieuwe opties worden toegevoegd en bestaande opties worden gewijzigd of verwijderd. Om een nieuwe optie toe te voegen dient geklikt te worden op het plusje naast de factor, die tevoorschijn komt door met de muis over de factor te hoveren. Een optie kan worden bewerkt of verwijderd door op het pennetje te klikken dat tevoorschijn komt door met de muis over de optie te hoveren.\n\n### Aanpassen consistenties\n\nHet aanpassen van consistenties kan door op de pagina ‘instellingen’ te navigeren naar ‘bewerk inconsitenties’.\n\n![Model en inconsistenties](").concat(nA,")\n\nScenarioSpark beschikt over een kruistabel waarin voor alle combinaties van opties van factoren is aangegeven of het mogelijk, onwaarschijnlijk of onmogelijk is. Dit kruistabel dient handmatig te worden aangepast. Er kan een rij en een kolom worden gekozen, die beiden een factor representeren. Vervolgens kan worden aangegeven per combinatie van de opties van de factoren of de combinatie als mogelijk, onmogelijk of onwaarschijnlijk wordt geacht. Hoe meer factoren er zijn, hoe meer combinaties moeten worden gecheckt. Houd er dus rekening mee dat dit de nodige tijd in beslag neemt. Indien een nieuwe optie wordt toegevoegd aan een factor in de morfologische box, dient voor de nieuwe optie alle combinaties met bestaande opties van andere factoren beoordeeld te worden.\n\nLet op: na het toevoegen van nieuwe opties in de morfologische box wordt geen enkele combinatie met deze nieuwe optie uitgesloten. Indien u wilt voorkomen dat niet-realistische scenario’s worden gegeneerd in de scenariogenerator, dient u handmatig de niet- realistische combinaties hier af te vinken.\n\n### Aanpassen kleurweergave\n\nMet behulp van kleuren kan voor de opties in de morfologische box worden aangegeven hoe vaak deze is gebruikt in een scenario. De keuze van de gebruikte kleuren, het aantal verschillende kleuren en de bandbreedtes waarin dezelfde kleur gegeven wordt, kan naar vrijheid worden ingevuld. Een optie krijgt de kleur van de bandbreedte als het aantal keer dat deze voorkomt groter of gelijk is aan het getal dat wordt ingevoerd als drempelwaarde bij de bandbreedte, zolang er geen hogere drempelwaarde bestaat waar dit ook voor geldt.\n\n### Aanpassen taal\n\nDe taalinstelling van de tool kan worden aangepast door de gewenste vlag op de homepagina te selecteren, of het menu rechtsboven te gebruiken."),nM=function(){return{oninit:function(e){return t6(e.attrs,u.ABOUT)},view:function(){var e=/#([a-zA-Z]*)/.exec(d().route.get());return e&&e.length>0&&setTimeout(function(){return tP(e[1])},0),d()(".markdown",[d()("aside#toc",[d()(".center-align",[d()("ul.list-inline",[d()("li",d()("a",{href:"#goal",onclick:function(e){return tP("goal",e)}},"Doel van ScenarioSpark")),d()("li"," | "),d()("li",d()("a",{href:"#usage",onclick:function(e){return tP("usage",e)}},"Hoe te gebruiken")),d()("li"," | "),d()("li",d()("a",{href:"#settings",onclick:function(e){return tP("settings",e)}},"Beheer")),d()("li"," | "),d()("li",d()("a",{href:"#security",onclick:function(e){return tP("security",e)}},"Security"))])])]),d()("main",[d()("header",[d()("h1","Achtergrond"),d().trust(e4(nC))]),d()("section#goal",[d()("h2","Doel van ScenarioSpark"),d().trust(e4("ScenarioSpark is ontwikkeld om de risicomanager te ondersteunen in twee uitdagingen:\n\n- Het op een creatieve manier ontwikkelen van plausibele scenario’s;\n- Het samenstellen van een beperkte, maar toch representatieve set van scenario’s.\n\n### Het ontwikkelen van creatieve scenario’s\n\nZoals we in het recente verleden hebben gezien, blijven terroristen en andere criminelen voortdurend nieuwe manieren bedenken om onze samenleving aan te vallen. Voor een goede beveiliging is het belangrijk dat we niet alleen bekende dreigingen beoordelen, maar ook creatieve dreigingsscenario's bedenken om buiten de gebaande paden te denken. Dit is makkelijker gezegd dan gedaan, omdat recente ervaringen vaak onze gedachten sturen. ScenarioSpark is ontwikkeld om hierin te ondersteunen door willekeurig (dus niet be\xefnvloed door vooroordelen of ervaringen uit het verleden) potentieel valide scenariostammen te genereren. Op basis van de gegenereerde suggesties kan de gebruiker vervolgens bepalen welke interessant zijn om uit te werken en in de risicoanalyse mee te nemen.\n\n### Het samenstellen van een beperkte, maar toch representatieve set van scenario’s\n\nHet maken van een compleet overzicht van alle risico’s in alle situaties op alle te beschermen belangen is in het algemeen niet realistisch. Er zijn immers zoveel variaties mogelijk dat volledige analyse hiervan niet haalbaar is. In de praktijk wordt daarom getracht een beperkte set scenario’s te kiezen waarmee toch een goed, representatief beeld ontstaat van alle mogelijke risico’s.\n\nScenarioSpark ondersteunt hierin door inzicht te geven in welke mate een set geselecteerde scenario’s de totale risico-ruimte afdekt en welke overlappen er in die set zitten. Hiertoe wordt gebruik gemaakt van een zogenaamde ‘morfologische box’. Dat is een matrix waarin de kolommen worden gevormd door alle relevante factoren die een scenario karakteriseren, en waarin de rijen worden gevormd door de opties voor ieder van die factoren (de mogelijke waarden die de factoren kunnen aannemen). In ScenarioSpark wordt een scenario gekarakteriseerd door de keuze van \xe9\xe9n of meer opties voor iedere factor.\n\nUit alle gegenereerde of gedefinieerde scenario’s kan de gebruiker de scenario’s selecteren die worden toegevoegd aan de set met te evalueren dreigingsscenario’s. In de morfologische box wordt aan de hand van een kleurcodering aangegeven hoe vaak bepaalde opties voorkomen in deze set.\n\nOp deze wijze kan met ScenarioSpark een set scenario’s worden samengesteld waarin de te analyseren factoren van risico’s zo effici\xebnt mogelijk worden behandeld in de (beperkte) set met scenario’s. Bovendien wordt voorkomen dat belangrijke factoren over het hoofd worden gezien."))]),d()("section#usage",[d()("h2","Hoe te gebruiken"),d().trust(e4(nN))]),d()("section#settings",[d()("h2","Beheer"),d().trust(e4(nD))]),d()("section#security",[d()("h2","Security"),d().trust(e4("Omdat de informatie die in ScenarioSpark wordt gezet vertrouwelijk kan zijn, is bij het ontwerp van deze applicatie hiermee rekening gehouden door de volgende uitgangspunten te hanteren:\n\n-	ScenarioSpark wordt geladen vanaf een website. De enige informatie die hierbij over het net gaat, is de werking van het programma. Eenmaal ingeladen in de computer, is een verbinding met internet dus ook niet meer noodzakelijk;\n-	Alle informatie die door ScenarioSpark wordt gebruikt, blijft op de computer van de gebruiker (hetzij in de Browsercache, hetzij in een bewaard bestand). De mate van beveiliging van deze gegevens is hiermee gelijk aan de mate van beveiliging van de betreffende computer en volledig controleerbaar door de beheerder van de betreffende computer. Dit betreft zowel de gebruikersinstellingen, de opzet van de morfologische box, als de scenario’s.\n-	Het programma biedt de mogelijkheid deze informatie op te slaan en in te lezen. De informatie wordt altijd opgeslagen in de download map van de browser (dit is de enige map waarvoor de browser schrijfrechten heeft). Het inlezen van een bestand kan vanaf elke locatie.\n"))])])])}}};let n_=n.p+"eba062b63d668de7.webp";var nR=function(){var e={currentStep:0,scenario:{},category:{},drivers:[],driverValues:{}},t=function(){e={currentStep:0,scenario:{},category:{},drivers:[],driverValues:{}}};return{view:function(n){var r=n.attrs,i=r.isOpen,o=r.onClose,a=r.onComplete;if(!i)return null;var l=[{title:s("WIZARD_STEP1_TITLE"),subtitle:s("WIZARD_STEP1_SUBTITLE"),icon:"description",vnode:function(){return d()(".row",[d()(ty,{form:[{id:"id",autogenerate:"id"},{id:"label",type:"text",label:s("NAME"),required:!0,className:"col s12"},{id:"desc",type:"textarea",label:s("DESCRIPTION"),className:"col s12"}],obj:e.scenario})])},validate:function(){return"string"==typeof e.scenario.label&&e.scenario.label.trim().length>0}},{title:s("WIZARD_STEP2_TITLE"),subtitle:s("WIZARD_STEP2_SUBTITLE"),icon:"category",vnode:function(){return d()(".row",[d()("h6.col.s12",s("WIZARD_CATEGORY_INFO")),d()(ty,{form:[{id:"id",autogenerate:"id"},{id:"label",type:"text",label:s("NAME"),required:!0,className:"col s12 m6"},{id:"desc",type:"text",label:s("DESCRIPTION"),className:"col s12 m6"}],obj:e.category}),d()("h6.col.s12",s("WIZARD_COMPONENTS_INFO")),d()(ty,{form:[{id:"drivers",type:[{id:"id",autogenerate:"id"},{id:"label",type:"text",className:"col s6",label:s("NAME"),required:!0},{id:"desc",type:"text",className:"col s6",label:s("DESCRIPTION")}],repeat:!0,pageSize:0,label:s("DIMENSIONS")}],obj:{drivers:e.drivers},onchange:function(){return d().redraw()}})])},validate:function(){return"string"==typeof e.category.label&&e.category.label.trim().length>0&&e.drivers.length>0&&e.drivers.every(function(e){return"string"==typeof e.label&&e.label.trim().length>0})}},{title:s("WIZARD_STEP3_TITLE"),subtitle:s("WIZARD_STEP3_SUBTITLE"),icon:"tune",optional:!0,vnode:function(){return d()(".row",[d()("p.col.s12",s("WIZARD_VALUES_INFO")),0===e.drivers.length?d()("p.grey-text",s("WIZARD_NO_COMPONENTS")):d()(ew,{label:s("DIMENSION_SELECTED"),options:e.drivers.map(function(e,t){return{id:t,label:e.label||"Component ".concat(t+1)}}),onchange:function(t){e.selectedDriverIndex=t[0]}}),void 0!==e.selectedDriverIndex&&e.drivers[e.selectedDriverIndex]&&d()(ty,{form:[{id:"values",type:[{id:"id",autogenerate:"id"},{id:"label",type:"text",className:"col s6",label:s("NAME"),required:!0},{id:"desc",type:"text",className:"col s6",label:s("DESCRIPTION")}],repeat:!0,pageSize:0,label:s("WIZARD_VALUES_FOR_COMPONENT",{component:e.drivers[e.selectedDriverIndex].label})}],obj:{values:e.driverValues[e.selectedDriverIndex]||[]},onchange:function(t,n){n&&(e.driverValues[e.selectedDriverIndex||0]=n.values)}})])}}];return d()(ep,{id:"new-scenario-wizard",isOpen:i,onClose:o,title:s("NEW_SCENARIO"),fixedFooter:!1,description:d()(eA,{steps:l,currentStep:e.currentStep,onStepChange:function(t){e.currentStep=t},onComplete:function(){var n=f(),r=e.drivers.map(function(t,n){var r=f(),i=(e.driverValues[n]||[]).map(function(e){return{id:f(),label:e.label,desc:e.desc}});return{id:r,label:t.label,desc:t.desc,values:i}}),i=r.map(function(e){return e.id}),o={id:n,label:e.category.label,desc:e.category.desc,componentIds:i},l={id:f(),label:e.scenario.label,desc:e.scenario.desc,hideInconsistentValues:!1,includeDecisionSupport:!1,inconsistencies:{},categories:[o],components:r,narratives:[],thresholdColors:eN};t(),a(l)},showStepNumbers:!0,linear:!0,orientation:"horizontal",allowHeaderNavigation:!1,labels:{next:s("WIZARD_NEXT"),previous:s("WIZARD_PREVIOUS"),complete:s("WIZARD_COMPLETE"),skip:s("WIZARD_SKIP")}})})}}},nP=function(e,t){var n=[],r=e.label,i=e.componentIds;return n.push("# ".concat(r)),n.push(""),(void 0===i?[]:i).map(function(e){return t.find(function(t){return t.id===e})}).filter(Boolean).forEach(function(e,t){var r=e.id,i=e.label,o=e.desc,a=e.values,l="".concat(t+1,". ").concat(i," [").concat(r,"]").concat(o?": ".concat(o):"");n.push(l),(void 0===a?[]:a).forEach(function(e){var t="   - ".concat(e.label," [").concat(e.id,"]").concat(e.desc?": ".concat(e.desc):"");n.push(t)}),n.push("")}),n.join("\n")},nj=function(e){for(var t=void 0,n=void 0,r=[],i=e.split("\n"),o=null,a=0;a<i.length;a++){var l=i[a].replace(/\*{2,3}/g,"").trim();if(console.log(l),""!==l){if(l.startsWith("# ")){var s=l.match(/^#\s+(.+?)(?:\s*:\s*(.+))?$/);s&&(t=s[1],n=s[2])}var c=l.match(/^(\d+)\.\s+(.+?)(?:\s+\[([^\]]+)\])?(?:\s*:\s*(.+))?$/);if(c){o&&r.push(o);var d=c[2].trim();o={id:c[3]||f(),label:d,desc:c[4],values:[]}}else if(l.startsWith("-")&&o){var u=l.match(/^-\s+(.+?)(?:\s+\[([^\]]+)\])?(?:\s*:\s*(.+))?$/);if(u){var p=u[2]||f(),h=u[1].trim(),g=u[3];o.values.push({id:p,label:h,desc:g})}}}}return o&&r.push(o),{label:t,desc:n,keyDrivers:r}};function nH(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nV(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function n$(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){nV(o,r,i,a,l,"next",e)}function l(e){nV(o,r,i,a,l,"throw",e)}a(void 0)})}}function nB(e){return function(e){if(Array.isArray(e))return nH(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nH(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nH(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nU(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var nz=function(){var e={currentStep:0,userInputs:{purpose:"",domain:"",outputType:"",constraints:"",detailDepth:"",language:"English"},fullPrompt:"",llmSettings:{endpoint:"clipboard",url:"https://localhost:3000/api/chat",apiKey:"",model:"gpt-oss:20b"},generatedMarkdown:"",isGenerating:!1},t=function(){e={currentStep:0,userInputs:{purpose:"",domain:"",outputType:"",constraints:"",detailDepth:"",language:"English"},fullPrompt:"",llmSettings:{endpoint:"clipboard",url:"https://localhost:3000/api/chat",apiKey:"",model:"granite4"},generatedMarkdown:"",isGenerating:!1}};return{view:function(n){var r=n.attrs,i=r.isOpen,o=r.onClose,a=r.onComplete;if(!i)return null;var l=[{title:s("LLM_WIZARD_STEP1_TITLE"),subtitle:s("LLM_WIZARD_STEP1_SUBTITLE"),icon:"edit_note",vnode:function(){return d()(".row",[d()("p.col.s12","Fill in the details below in English to customize your morphological box generation. The output language can be specified separately."),d()(et,{id:"purpose",label:"Purpose",isMandatory:!0,helperText:'What do you want to explore or design? E.g., "crisis management scenarios for national emergency planning"',defaultValue:e.userInputs.purpose,rows:3,onchange:function(t){e.userInputs.purpose=t}}),d()(er,{id:"domain",label:"Domain",isMandatory:!0,helperText:'Specify the field or context, e.g., "disaster response", "cybersecurity", "military operations"',defaultValue:e.userInputs.domain,onchange:function(t){e.userInputs.domain=t}}),d()(er,{id:"outputType",label:"Intended Output Type",helperText:"One morphological box, multiple boxes, scenario-focused, measure-focused, or both?",defaultValue:e.userInputs.outputType,onchange:function(t){e.userInputs.outputType=t}}),d()(et,{id:"constraints",label:"Constraints or Focus Areas",helperText:'E.g., "Include socio-political, environmental, and technological factors"',defaultValue:e.userInputs.constraints,rows:2,onchange:function(t){e.userInputs.constraints=t}}),d()(er,{id:"detailDepth",label:"Example of Desired Depth or Detail",helperText:'E.g., "Include 6-7 detailed options per factor, each with a one-sentence definition"',defaultValue:e.userInputs.detailDepth,onchange:function(t){e.userInputs.detailDepth=t}}),d()(er,{id:"language",label:"Output Language",isMandatory:!0,helperText:'The language for the generated morphological box content, e.g., "English", "Dutch", "French"',defaultValue:e.userInputs.language,onchange:function(t){e.userInputs.language=t}})])},validate:function(){return e.userInputs.purpose.trim().length>0&&e.userInputs.domain.trim().length>0&&e.userInputs.language.trim().length>0}},{title:s("LLM_WIZARD_STEP2_TITLE"),subtitle:s("LLM_WIZARD_STEP2_SUBTITLE"),icon:"preview",vnode:function(){return d()(".row",[d()("p.col.s12","Below is the combined prompt consisting of the generic base prompt (in English) and your specific inputs. You can edit it if needed:"),d()(et,{id:"full-prompt",label:"Complete Prompt (English)",defaultValue:e.fullPrompt,rows:25,onchange:function(t){e.fullPrompt=t}})])},validate:function(){return e.fullPrompt.trim().length>0}},{title:s("LLM_WIZARD_STEP3_TITLE"),subtitle:s("LLM_WIZARD_STEP3_SUBTITLE"),icon:"settings",vnode:function(){return d()(".row",[d()("p.col.s12",s("LLM_WIZARD_STEP3_DESC")),d()(".col.s12",[d()(ey,{label:s("LLM_ENDPOINT"),checkedId:e.llmSettings.endpoint,options:[{id:"clipboard",label:s("LLM_CLIPBOARD")},{id:"ollama",label:s("LLM_OLLAMA")},{id:"openai",label:s("LLM_OPENAI")}],onchange:function(t){e.llmSettings.endpoint=t}})]),"clipboard"!==e.llmSettings.endpoint&&[d()(".col.s12",[d()(er,{id:"llm-url",label:s("URL"),helperText:"ollama"===e.llmSettings.endpoint?s("LLM_OLLAMA_URL_HELP"):s("LLM_OPENAI_URL_HELP"),defaultValue:e.llmSettings.url,onchange:function(t){e.llmSettings.url=t}})]),d()(".col.s12",[d()(er,{id:"llm-model",label:s("MODEL"),helperText:"ollama"===e.llmSettings.endpoint?s("LLM_OLLAMA_MODEL_HELP"):s("LLM_OPENAI_MODEL_HELP"),defaultValue:e.llmSettings.model,onchange:function(t){e.llmSettings.model=t}})]),"openai"===e.llmSettings.endpoint&&d()(".col.s12",[d()(er,{id:"llm-apikey",label:s("API_KEY"),type:"password",defaultValue:e.llmSettings.apiKey,onchange:function(t){e.llmSettings.apiKey=t}})])]])},validate:function(){return"clipboard"===e.llmSettings.endpoint||("openai"===e.llmSettings.endpoint?e.llmSettings.url.trim().length>0&&e.llmSettings.model.trim().length>0&&e.llmSettings.apiKey.trim().length>0:e.llmSettings.url.trim().length>0&&e.llmSettings.model.trim().length>0)}},{title:s("LLM_WIZARD_STEP4_TITLE"),subtitle:s("LLM_WIZARD_STEP4_SUBTITLE"),icon:"auto_awesome",vnode:function(){return d()(".row",["clipboard"===e.llmSettings.endpoint?d()(".col.s12",[d()("p",s("LLM_WIZARD_STEP4_CLIPBOARD_DESC")),d()(k,{label:s("LLM_COPY_PROMPT"),iconName:"content_copy",className:"btn",onclick:function(){navigator.clipboard.writeText(e.fullPrompt),alert(s("LLM_PROMPT_COPIED"))}}),d()("p.mt-4",s("LLM_PASTE_OUTPUT"))]):d()(".col.s12",[e.isGenerating?d()(".center",[d()(".preloader-wrapper.active",[d()(".spinner-layer.spinner-blue-only",[d()(".circle-clipper.left",d()(".circle")),d()(".gap-patch",d()(".circle")),d()(".circle-clipper.right",d()(".circle"))])]),d()("p",s("LLM_GENERATING"))]):d()(k,{label:s("LLM_GENERATE"),iconName:"auto_awesome",className:"btn",disabled:e.generatedMarkdown.length>0,onclick:function(){return n$(function(){var t,n;return nU(this,function(r){var i,o,a;switch(r.label){case 0:e.isGenerating=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,(i=e.llmSettings,o=e.fullPrompt,n$(function(){var e,t,n,r,a,l,s,c,d,u,p,f,h,g;return nU(this,function(v){switch(v.label){case 0:if(e=i.endpoint,t=i.url,n=i.apiKey,r=i.model,a={"Content-Type":"application/json"},s=t,"ollama"===e)l={model:r||"gemma2",messages:[{role:"user",content:o}],stream:!1,options:{temperature:.7}};else if("openai"===e){if(!n)throw Error("API key required for OpenAI");a.Authorization="Bearer ".concat(n),s=s||"https://api.openai.com/v1/chat/completions",l={model:r||"gpt-4o-mini",messages:[{role:"system",content:"You are a helpful AI assistant."},{role:"user",content:o}],temperature:.7,stream:!1}}return[4,fetch(s,{method:"POST",headers:a,body:JSON.stringify(l)})];case 1:if((c=v.sent()).ok)return[3,3];return[4,c.text()];case 2:throw d=v.sent(),Error("Error: ".concat(c.status," ").concat(c.statusText," - ").concat(d));case 3:return[4,c.json()];case 4:if(u=v.sent(),"ollama"===e)return[2,(null==u||null==(p=u.message)?void 0:p.content)||""];return[2,(null==(g=u.choices)||null==(h=g[0])||null==(f=h.message)?void 0:f.content)||""]}})})())];case 2:return t=r.sent(),e.generatedMarkdown=((a=(a=(a=(a=(a=(a=(a=(a=(a=t.trim()).replace(/```(?:markdown|md)?\s*/gi,"```")).replace(/^```[\s\S]*?```$/gm,function(e){return e.replace(/```/g,"").trim()})).replace(/^#{2,}\s*/gm,"# ")).replace(/^(\d+)[\)\-]\s+/gm,"$1. ")).replace(/^[\*\+]\s+/gm,"- ")).replace(/^(-\s)/gm,"  $1")).replace(/^>.*$/gm,"").replace(/^#+\s*Example.*$/gim,"").trim()).replace(/\n{3,}/g,"\n\n")).endsWith("\n")||(a+="\n"),a),[3,5];case 3:return n=r.sent(),alert("".concat(s("LLM_ERROR"),": ").concat(n)),[3,5];case 4:return e.isGenerating=!1,d().redraw(),[7];case 5:return[2]}})})()}})]),d()(".col.s12.mt-4",[d()(et,{id:"generated-markdown",label:s("LLM_GENERATED_MARKDOWN"),value:e.generatedMarkdown,rows:25,oninput:function(t){e.generatedMarkdown=t}})])])},validate:function(){return e.generatedMarkdown.trim().length>0}}];return d()(ep,{id:"llm-scenario-wizard",isOpen:i,onClose:function(){t(),o()},title:s("LLM_WIZARD_TITLE"),fixedFooter:!1,description:d()(eA,{steps:l,currentStep:e.currentStep,onStepChange:function(t){if(e.currentStep=t,1===t){var n="## User-Specific Input:\n\nPurpose: ".concat(e.userInputs.purpose,"\n\nDomain: ").concat(e.userInputs.domain,"\n\nIntended Output Type: ").concat(e.userInputs.outputType||"One or multiple morphological boxes as appropriate","\n\nConstraints or Focus Areas: ").concat(e.userInputs.constraints||"None specified","\n\nExample of Desired Depth or Detail: ").concat(e.userInputs.detailDepth||"Include 5-7 detailed options per factor, each with a one-sentence definition.","\n\nAll morphological boxes and their descriptions must be written in fluent, domain-appropriate ").concat(e.userInputs.language,", as if originally composed in ").concat(e.userInputs.language," (not translated).");e.fullPrompt="".concat("You are to create one or more **morphological boxes** to systematically explore possible configurations or scenarios related to a defined goal or domain.\n\nEach morphological box must contain **key drivers or main components** that represent **orthogonal (independent)** concepts.\n\n### Structure and Formatting Rules (strictly required)\n- The **entire output must be a single Markdown code block** — but **do not include** language tags like “```markdown” or “```md”. Use only plain triple backticks (```).\n- Each morphological box must start with a **level-1 Markdown heading** (`# Box Name`).\n- Each key driver must be numbered as an **ordered list item** (`1.`, `2.`, etc.).\n- Each key driver must include a **short description** after a colon (`:`).\n- Each driver’s possible **component values** must be listed as **unordered list items** (`-`) beneath it.\n- Each component value must also have a **short description** after a colon.\n- Do **not** use any additional headings (e.g. `##` or `###`) inside the morphological box.\n- Do **not** include any introductory or concluding text — only the pure markdown content.\n- Write all content in **fluent, domain-appropriate Dutch**, as if originally composed in Dutch.\n\n### Output Example (format only)\n\n```md\n# Name of the Morphological Box\n\n1. Key Driver A: Description of what this factor represents\n   - Option 1: Short description of the option\n   - Option 2: Short description of the option\n   - Option 3: Short description of the option\n\n2. Key Driver B: Description of what this factor represents\n   - Option 1: Short description of the option\n   - Option 2: Short description of the option\n   - Option 3: Short description of the option\n```\n\n### Required elements\n- Include **10 \xb1 2 key drivers**.\n- Each factor and each option must have a short description.\n- If relevant, generate **two boxes**: one for scenario definition and one for possible responses or measures.\n","\n\n").concat(n)}},onComplete:function(){var n=nF(e.generatedMarkdown);t(),a(n)},showStepNumbers:!0,linear:!0,orientation:"horizontal",allowHeaderNavigation:!1,labels:{next:s("WIZARD_NEXT"),previous:s("WIZARD_PREVIOUS"),complete:s("WIZARD_COMPLETE"),skip:s("WIZARD_SKIP")}})})}}},nW=function(e){return e.replace(/\*{1,3}|_{1,2}/g,"").trim()},nF=function(e){var t="Generated Scenario",n="",r=[],i=[],o=e.split(/^#\s+/m).filter(function(e){return e.trim()});if(o.length>0&&o.forEach(function(e,o){var a=e.split("\n")[0].match(/^(.+?)(?:\s*:\s*(.+))?$/);if(a){var l=nW(a[1]),s=a[2]?nW(a[2]):void 0,c=nj("# "+e).keyDrivers.map(function(e){return{id:f(),label:nW(e.label),desc:e.desc?nW(e.desc):void 0,values:e.values.map(function(e){return{id:f(),label:nW(e.label),desc:e.desc?nW(e.desc):void 0}})}});i.push.apply(i,nB(c));var d={id:f(),label:l,desc:s,componentIds:c.map(function(e){return e.id})};r.push(d),0===o&&l&&(t=l,n=s||"")}}),0===r.length){var a=nj(e),l=a.label,s=a.desc,c=a.keyDrivers.map(function(e){return{id:f(),label:nW(e.label),desc:e.desc?nW(e.desc):void 0,values:e.values.map(function(e){return{id:f(),label:nW(e.label),desc:e.desc?nW(e.desc):void 0}})}});i.push.apply(i,nB(c));var d={id:f(),label:l?nW(l):"Default Category",desc:s?nW(s):void 0,componentIds:c.map(function(e){return e.id})};r.push(d),l&&(t=nW(l),n=s?nW(s):"")}return{id:f(),label:t,desc:n,hideInconsistentValues:!1,includeDecisionSupport:!1,inconsistencies:{},categories:r,components:i,narratives:[],thresholdColors:eN}};function nG(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function nY(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function nK(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){nY(o,r,i,a,l,"next",e)}function l(e){nY(o,r,i,a,l,"throw",e)}a(void 0)})}}function nZ(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function nq(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function nX(e){return function(e){if(Array.isArray(e))return nG(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nG(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nG(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nJ(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var nQ=function(){return{view:function(e){var t=e.attrs,n=t.components,r=t.narratives,i=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e.attrs,["components","narratives"]),o=n.reduce(function(e,t){return t.values&&t.values.forEach(function(t){e[t.id]=t.label}),e},{});return d()(".table-container",d()(".table",d()("table.responsive-table.highlight",[d()("thead",d()("tr",d()("th",{style:"text-align: right"},s("NAME")),n.map(function(e){return d()("th",e.label)}))),d()("tbody",(void 0===r?[]:r).map(function(e){return d()("tr",d()("th.bold.truncate",{style:"text-align: left"},d()("a",{href:ib.href(u.SHOW_SCENARIO),title:e.label,onclick:function(){i.update({curNarrative:function(){return e}})}},tA(e.label))),n.map(function(t){var n=e.components[t.id]&&e.components[t.id].length>0&&e.components[t.id].map(function(e){return o[e]||'<span class="red-text">Missing component ID: '.concat(e,"</span>")}).join(", ");return n?d()("td.truncate",{title:n},d().trust(n)):e[t.id]?d()("td",o[e[t.id]]):d()("td.center-align.missing",d()(w,{iconName:"clear",className:"red-text"}))}))}))])))}}},n0=function(){var e=window.File&&window.FileReader&&window.FileList&&window.Blob,t=0,n=!1,r=!1,i=!1,o=!1,a=!1;return{oninit:function(e){t6(e.attrs,u.HOME)},view:function(l){var c=l.attrs,p=c.state,f=p.model,h=p.language,g=void 0===h?"nl":h,v=f.scenarios,b=f.scenario,y=b.id,E=b.label,T=b.narratives,x=b.components,S=b.categories,I=(void 0===T?[]:T).filter(function(e){return e.included}).sort(function(e,t){return(e.label||"").localeCompare(t.label)});return[d()("div",{style:"position: relative;"},[d()(".hero-section",d()(".hero-container",[d()(".hero-image-wrapper",d()("img.hero-image[alt=ScenarioSpark - A scenario generating tool combining morphological analysis with LLM technology]",{src:n_})),d()(".hero-actions",d()(".language-switcher",[d()(".language-option",{className:"nl"===g?"selected":void 0,onclick:function(){return ni(c,"nl")}},[d()("img",{src:ny,alt:"Nederlands",title:"Nederlands"}),d()("span","Nederlands")]),d()(".language-option",{className:"en"===g?"selected":void 0,onclick:function(){return ni(c,"en")}},[d()("img",{src:nw,alt:"English",title:"English"}),d()("span","English")])]))])),I.length>0&&S.length>0&&[d()(".row",d()(".col.s12",[d()("h4",s("SAVED_NARRATIVES"))])),S.length>1?d()(eT,{tabs:S.map(function(e){return{title:e.label,vnode:d()(nQ,nq(nZ({},c),{narratives:I,components:x.filter(function(t){return e.componentIds&&e.componentIds.includes(t.id)})}))}})}):d()(".narratives",d()(nQ,nq(nZ({},c),{narratives:I,components:x.filter(function(e){return S[0].componentIds&&S[0].componentIds.includes(e.id)})})))],d()(".row",d()(".col.s12.m8.l6.offset-m2.offset-l3",d()(".flex-row",d()(ew,{key:y,iconName:"cases",className:"flex-grow",label:s("SELECT_SCENARIO"),checkedId:y,options:[{id:y,label:E}].concat(nX(void 0===v?[]:v)),onchange:function(e){return nK(function(){return nJ(this,function(t){switch(t.label){case 0:var n;return[4,(n=e[0],t0(function(){var e,t,r,i,o;return t2(this,function(a){switch(a.label){case 0:if(t=(e=c.getState().model).scenario,o=(i=void 0===(r=e.scenarios)?[]:r).find(function(e){return e.id===n}),!(t&&o))return[3,2];return e.scenarios=[t].concat(t1(i.filter(function(e){return e.id!==n}))),e.scenario=o,c.update({model:function(){return e},activeTooltip:"",title:o.label,curNarrative:function(){},excludedComps:function(){return{}},lockedComps:function(){return{}}}),[4,ez.set(t4,JSON.stringify(e))];case 1:a.sent(),a.label=2;case 2:return[2]}})})())];case 1:return t.sent(),[2]}})})()}}),d()(".icon-buttons",{key:"icons"},d()(O,{className:"icon-button",iconName:"add",title:s("NEW_SCENARIO"),onclick:function(){o=!0}}),d()(O,{className:"icon-button",iconName:"auto_fix_high",title:s("LLM_WIZARD_TITLE"),onclick:function(){a=!0}}),d()(O,{className:"icon-button",iconName:"download",title:s("DOWNLOAD","MODEL"),onclick:function(){var e=document.getElementById("downloadAnchorElem");if(e){var t=void 0===f.version?1:++f.version,n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(nq(nZ({},f.scenario),{version:t})));e.setAttribute("href",n),e.setAttribute("download","".concat(t_(f,void 0,!1),".json")),e.click(),localStorage.setItem(tL,"true")}}}),e&&d()(O,{className:"icon-button",iconName:"upload",title:s("UPLOAD","MODEL"),onclick:function(){console.log("UPLOAD"),tq(function(e){if(e&&(!e||!(e.length<=0))){var t=e&&e.item(0),n=t&&/json$/i.test(t.name),r=new FileReader;r.onload=function(e){return nK(function(){var t,r;return nJ(this,function(i){return n&&((r=JSON.parse((e&&e.target&&e.target.result).toString()))&&r.id&&r.label&&f.scenario.id!==r.id&&!(null==(t=f.scenarios)?void 0:t.some(function(e){return e.id===r.id}))?(f.scenarios||(f.scenarios=[]),f.scenarios=[f.scenario].concat(nX(f.scenarios)),f.scenario=r,t7(c,f,!0),eO({html:s("SCENARIO_LOADED_MSG")})):eO({html:s("SCENARIO_NOT_LOADED_MSG")})),[2]})})()},t&&(n?r.readAsText(t):r.readAsArrayBuffer(t))}})}}),d()(O,{className:"icon-button",iconName:"delete",title:s("DELETE"),onclick:function(){return r=!0}}))))),d()(".buttons.center",{style:"margin: 10px auto;"},[d()(k,{iconName:"clear",disabled:!1,className:"btn-large",label:s("NEW_MODEL","btn"),onclick:function(){return i=!0}}),d()("a#downloadAnchorElem",{style:"display:none"}),d()(k,{iconName:"download",disabled:!1,className:"btn-large",label:s("DOWNLOAD","COLLECTION"),onclick:function(){var e=document.getElementById("downloadAnchorElem");if(e){var t=void 0===f.version?1:++f.version,n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(nq(nZ({},f),{version:t})));e.setAttribute("href",n),e.setAttribute("download","".concat(t_(f),".json")),e.click(),localStorage.setItem(tL,"true")}}}),e&&d()(k,{iconName:"upload",className:"btn-large",label:s("UPLOAD","COLLECTION"),onclick:function(){tq(function(e){if(e&&(!e||!(e.length<=0))){var t=e&&e.item(0),n=t&&/json$/i.test(t.name),r=new FileReader;r.onload=function(e){return nK(function(){var t;return nJ(this,function(r){if(n&&(t=JSON.parse((e&&e.target&&e.target.result).toString()))){var i;t7(c,t.version?t:Object.keys(i=t).reduce(function(e,t){if("scenarios"===t){var n=i[t].current;e.scenario.id=n.id,e.scenario.label=n.name,e.scenario.desc=n.desc,e.scenario.hideInconsistentValues=!0,e.scenario.inconsistencies=n.inconsistencies.reduce(function(e,t){var n=tO(t.ids,2),r=n[0],i=n[1],o=t.type;e[r]||(e[r]={}),e[i]||(e[i]={});var a="totally"===o;return e[r][i]=a,e[i][r]=a,e},{}),e.scenario.narratives=n.narratives.map(function(e){var t=e.id,n=e.name,r=e.components,i=e.narrative,o=e.included;return{id:t,label:n,components:Object.keys(r).reduce(function(e,t){return e[t]=[r[t]],e},{}),desc:i,included:o,saved:!0,personaEffects:{}}}),e.scenario.categories=Object.keys(n.categories).map(function(e){return{id:e,label:e,componentIds:n.categories[e]}})}else{e.scenario.components||(e.scenario.components=[]);var r=i[t].list,o=r.reduce(function(e,t){return t.context&&t.context.type&&("LOCATION"===t.context.type&&0>=e.indexOf("location")?e.push("location"):"LOCATIONTYPE"===t.context.type&&0>=e.indexOf("locationType")&&e.push("locationType")),e},[]);if(e.scenario.components.push({id:t,label:s("COMP",t.toUpperCase()),contexts:o,values:r.map(function(e){var t=e.name,n=e.id,r=e.desc,i=e.context,o=i?"LOCATION"===i.type?"location":"LOCATIONTYPE"===i.type?"locationType":"none":void 0,a=i&&"LOCATION"===i.type?i.data.NAME?"name":i.data.COORDINATES?"coords":void 0:void 0,l=tO("coords"===a&&i.data.COORDINATES?i.data.COORDINATES.split(/,/).map(function(e){return+e}):[void 0,void 0],2),s=l[0],c=l[1],d=i&&"LOCATIONTYPE"===i.type?eP.indexOf(Object.keys(i.data).shift())>=0?"list":"keyValue":void 0,u="list"===d?Object.keys(i.data).shift():void 0,p=tO(("keyValue"===d?Object.entries(i.data).shift():void 0)||[void 0,void 0],2),f=p[0],h=p[1];return{id:n,label:t,desc:r,context:o,location:i&&"LOCATION"===i.type?i.data.NAME:void 0,locationType:a,locationTypeType:d,lat:s,lon:c,osmTypeId:u,key:f,value:h}})}),e.scenario.thresholdColors=eN,e.scenario.categories){var a=1,l=e.scenario.categories.filter(function(e){return e.componentIds}).reduce(function(e,t){var n;return null==(n=t.componentIds)||n.forEach(function(t){return e[t]=a++}),e},{});e.scenario.components=e.scenario.components.map(function(e){return tk(tT({},e),{order:l[e.id]})}),e.scenario.components.sort(function(e,t){return e.order>t.order?1:-1})}}return e},{scenario:{},version:1,lastUpdata:Date.now(),scenarios:[]}),!0),eO({html:s("COLLECTION_LOADED_MSG")})}return[2]})})()},t&&(n?r.readAsText(t):r.readAsArrayBuffer(t))}})}})]),d()(".section",d()(".row.container.center",[d()(".row",d()(".col.s12.align-center",[d()("h5","ScenarioSpark")])),d()(".row",[d()(".col.s12.m4",d()(".icon-block",[d()(".center",d()(w,{iconName:"ads_click"})),d()("h5.center",d()(d().route.Link,{href:s("ABOUT","ROUTE")+"#goal"},s("GOAL","TITLE"))),d()("p",s("GOAL","DESC"))])),d()(".col.s12.m4",d()(".icon-block",[d()(".center",d()(w,{iconName:"settings"})),d()("h5.center",d()(d().route.Link,{href:s("ABOUT","ROUTE")+"#usage"},s("USAGE","TITLE"))),d()("p",s("USAGE","DESC"))])),d()(".col.s12.m4",d()(".icon-block",[d()(".center",d()(w,{iconName:"lock"})),d()("h5.center",d()(d().route.Link,{href:s("ABOUT","ROUTE")+"#security"},s("SECURITY","TITLE"))),d()("p",s("SECURITY","DESC"))]))])])),d()(ep,{id:"delete_model",isOpen:r,onClose:function(){return r=!1},title:s("DELETE_MODEL","title"),description:d()(".row",[d()(".col.s12",[s("DELETE_MODEL","description")])]),buttons:[{label:s("CANCEL"),iconName:"cancel"},{label:s("OK"),iconName:"delete",onclick:function(){return nK(function(){return nJ(this,function(e){switch(e.label){case 0:return f.scenario=f.scenarios&&f.scenarios.length>0?f.scenarios[0]:eM(),f.scenarios=f.scenarios.filter(function(e){return e.id!==f.scenario.id}),[4,t7(c,f,!0)];case 1:return e.sent(),[2]}})})()}}]}),d()(ep,{id:"clearAll",isOpen:i,onClose:function(){return i=!1},title:s("NEW_MODEL","title"),description:d()(".row",[d()(".col.s12",[s("NEW_MODEL","description")]),d()(".col.s12",[d()(".row",d()(ey,{label:s("NEW_MODEL","choose"),checkedId:1,options:eR.map(function(e,t){return{id:t+1,label:"<strong>".concat(s("MODEL_NAMES",t),": </strong>").concat(s("MODEL_DESC",t))}}),onchange:function(e){return t=e-1}})),d()(".row",d()(ec,{label:s("NEW_MODEL","remove"),checked:n,onchange:function(e){return n=e}}))])]),buttons:[{label:s("CANCEL"),iconName:"cancel"},{label:s("OK"),iconName:"delete",onclick:function(){return nK(function(){return nJ(this,function(e){switch(e.label){case 0:return[4,t7(c,eR[t],!0)];case 1:return e.sent(),ib.switchTo(0===t?u.SETTINGS:u.DEFINE_BOX),[2]}})})()}}]}),d()(nR,nq(nZ({},c),{isOpen:o,onClose:function(){o=!1},onComplete:function(e){return nK(function(){return nJ(this,function(t){switch(t.label){case 0:return f.scenarios||(f.scenarios=[]),f.scenarios=[f.scenario].concat(nX(f.scenarios)),f.scenario=e,[4,t7(c,f,!0)];case 1:return t.sent(),eO({html:s("SCENARIO_CREATED_MSG")}),o=!1,t8(c,u.DEFINE_BOX),[2]}})})()}})),d()(nz,nq(nZ({},c),{isOpen:a,onClose:function(){a=!1},onComplete:function(e){return nK(function(){return nJ(this,function(t){switch(t.label){case 0:return f.scenarios||(f.scenarios=[]),f.scenarios=[f.scenario].concat(nX(f.scenarios)),f.scenario=e,[4,t7(c,f,!0)];case 1:return t.sent(),eO({html:s("SCENARIO_CREATED_MSG")}),a=!1,t8(c,u.DEFINE_BOX),[2]}})})()}}))])]}}},n1=function(){return{view:function(e){var t=e.attrs;return d()(".col.s12.center-align",t,d()(".preloader-wrapper.big.active",d()(".spinner-layer.spinner-blue-only",[d()(".circle-clipper.left",d()(".circle")),d()(".gap.patch",d()(".circle")),d()(".circle-clipper.right",d()(".circle"))])))}}},n2=function(e){var t=e.replace("#","");return(299*parseInt(t.substring(0,2),16)+587*parseInt(t.substring(2,4),16)+114*parseInt(t.substring(4,6),16))/1e3>125?"black":"white"},n4={view:function(e){var t=e.attrs.items;return d()(".legend",{style:{display:"fixed"}},d()(".legend-items",{style:{top:0,right:0,display:"flex",alignItems:"center",gap:"8px"}},t.map(function(e,n){return d()("div",{key:n,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"40px",height:"40px",backgroundColor:e.color,color:n2(e.color),borderRadius:"8px"}},n===t.length-1?"".concat(e.threshold,"+"):"".concat(e.threshold,"x"))})))}};function n5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function n3(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function n6(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){n3(o,r,i,a,l,"next",e)}function l(e){n3(o,r,i,a,l,"throw",e)}a(void 0)})}}function n8(e){return function(e){if(Array.isArray(e))return n5(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n5(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return n5(e,void 0)}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n9(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var n7=function(){return{view:function(e){var t=e.attrs,n=t.rowComponent,r=t.rowValue,i=t.colComponent,o=t.colValue;return d()(".tooltip-content",[d()("strong","Combination:"),d()("div","".concat(n,": ").concat(r)),d()("div","".concat(i,": ").concat(o))])}}},re=function(){var e=!1;return{view:function(t){var n=t.attrs,r=n.rowId,i=n.colId,o=n.inconsistencies,a=n.callback,l=n.disabled,s=n.rowComponent,c=n.rowValue,u=n.colComponent,p=n.colValue,f=o[r],h=void 0!==f?f[i]:void 0;return d()(".cell-with-tooltip",{style:"position: relative;",onmouseover:function(){e=!0},onmouseout:function(){e=!1}},[d()(w,{className:l?"disabled-cell":"clickable ".concat(void 0===h?"inconsistency-cell-possible":h?"inconsistency-cell-impossible":"inconsistency-cell-improbable"),style:l?"opacity: 0.3; cursor: not-allowed; font-size: 1.2rem;":"font-size: 1.2rem;",iconName:void 0===h?"check_circle_outline":h?"radio_button_unchecked":"blur_circular",onclick:function(e){return n6(function(){return n9(this,function(t){switch(t.label){case 0:if(e.stopPropagation(),l)return[2];switch(h){case!0:o[r][i]=o[i][r]=!1;break;case!1:delete o[r][i],delete o[i][r];break;default:o[r]||(o[r]={}),o[i]||(o[i]={}),o[r][i]=o[i][r]=!0}return[4,a()];case 1:return t.sent(),[2]}})})()}}),e&&d()(".inconsistency-tooltip",{},d()(n7,{rowComponent:s,rowValue:c,colComponent:u,colValue:p}))])}}},rt=function(){return{view:function(){return d()(".card.legend-card",{style:"padding: 4px; margin: 0;"},[d()("ul.legend-list",{style:"list-style-type: none; padding-left: 0; margin: 0;"},[d()("li",[d()(w,{className:"inconsistency-cell-possible",style:"vertical-align: middle;",iconName:"check_circle_outline"})," "+s("COMBINATIONS","POSSIBLE")]),d()("li",[d()(w,{className:"inconsistency-cell-impossible",style:"vertical-align: middle;",iconName:"radio_button_unchecked"})," "+s("COMBINATIONS","IMPOSSIBLE")]),d()("li",[d()(w,{className:"inconsistency-cell-improbable",style:"vertical-align: middle;",iconName:"blur_circular"})," "+s("COMBINATIONS","IMPROBABLE")])])])}}},rn=function(e,t){var n={};return t.forEach(function(e){var t,r;n[e.id]=(t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},e),r=r={components:[]},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t)}),e.forEach(function(e){if(e.values&&0!==e.values.length){var r=t.filter(function(t){var n;return null==(n=t.componentIds)?void 0:n.includes(e.id)}).map(function(e){return e.id});r.length?r.forEach(function(t){n[t]&&n[t].components.push(e)}):(n.uncategorized||(n.uncategorized={id:"uncategorized",label:"Uncategorized",components:[]}),n.uncategorized.components.push(e))}}),Object.values(n).filter(function(e){return e.components.length>0})},rr=function(){var e="",t="";return{oninit:function(n){var r=n.attrs.state.model,i=(void 0===r?{scenario:{}}:r).scenario,o=(void 0===i?{categories:[]}:i).categories;o&&o.length&&(e=t=o[0].id)},view:function(n){var r=n.attrs,i=r.state.model,o=i.scenario.inconsistencies,a=rn(i.scenario.components.filter(function(e){return e.id&&e.label}),i.scenario.categories||[]),l=a.find(function(t){return t.id===e}),c=a.find(function(e){return e.id===t}),u=e===t,p=function(e){var t=[],n=0,r=!0,i=!1,o=void 0;try{for(var a,l=e.components[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;if(s.values&&0!==s.values.length){var c=n;n+=s.values.length,t.push({component:s,startIndex:c,endIndex:n-1})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return{indexes:t,totalValues:n}},f=l?p(l):null,h=c?p(c):null,g=u&&c?c.components:(null==c?void 0:c.components)||[];return d()(".inconsistencies-editor",[d()(".category-selectors.row",[d()(ew,{checkedId:e,iconName:"view_stream",className:"col s12 m4",placeholder:s("i18n","pickOne"),label:s("INCONSISTENCIES","SELECT_ROW_CATEGORY"),options:a.map(function(e){return{id:e.id,label:e.label}}),onchange:function(t){return e=t[0]}}),d()(ew,{checkedId:t,iconName:"view_column",className:"col s12 m4",placeholder:s("i18n","pickOne"),label:s("INCONSISTENCIES","SELECT_COLUMN_CATEGORY"),options:a.map(function(e){return{id:e.id,label:e.label}}),onchange:function(e){return t=e[0]}}),d()(".col.s12.m4",d()(rt))]),l&&c&&f&&h&&d()(".matrix-container.row",[d()(".col.s12",[d()(".inconsistency-matrix.card",[d()("table.matrix-table.highlight.matrix-table-themed",{style:"border-collapse: collapse; position: relative;",oncreate:function(e){var t=e.dom;if(t){var n=t.querySelector(".component-name"),r=t.querySelectorAll(".value-name"),i=n.offsetWidth;r.forEach(function(e){e.style.left="".concat(i,"px")})}}},[d()("thead",{style:"position: sticky; top: 0; z-index: 20;"},[d()("tr",[d()("th.corner-cell",{rowspan:2,colspan:2})].concat(n8(g.map(function(e,t){return d()("th.component-header",{colspan:e.values.length,className:t%2==0?"matrix-cell-alt-bg":""},e.label)}).filter(Boolean)))),d()("tr.value-header-row",n8(g.flatMap(function(e,t){return e.values&&0!==e.values.length?e.values.map(function(e,n){return d()("th.value-header",{className:t%2==0?"matrix-cell-alt-bg":"",style:0===n?"border-left: 2px solid var(--mm-border-color);":""},d()("div",e.label))}):[]})))]),d()("tbody",n8(l.components.flatMap(function(e,t){return e.values&&0!==e.values.length?e.values.map(function(n,a){var l;return d()("tr",{className:t%2==0?"matrix-cell-alt-bg":"",style:0===a?"border-top: 2px solid var(--mm-border-color);":""},[0===a?d()("th.component-name",{rowspan:null==(l=e.values)?void 0:l.length,className:t%2==0?"matrix-cell-alt-bg":""},e.label):null,d()("th.value-name",{className:t%2==0?"matrix-cell-alt-bg":"",style:"left: ".concat(120,"px;")},n.label)].concat(n8(g.flatMap(function(l,s){return l.values&&0!==l.values.length?l.values.map(function(c,p){var f=e.id===l.id||u&&(t<s||t===s&&a<p);return d()("td.matrix-cell",{className:f?"matrix-disabled-cell":s%2==0&&t%2==0||s%2==1&&t%2==1?"matrix-cell-alt-bg":"",style:0===p?"border-left: 2px solid var(--mm-border-color);":""},!f&&d()(re,{rowId:n.id,colId:c.id,inconsistencies:o,callback:function(){return n6(function(){return n9(this,function(e){switch(e.label){case 0:return[4,t7(r,i)];case 1:return[2,e.sent()]}})})()},rowComponent:e.label,rowValue:n.label,colComponent:l.label,colValue:c.label,disabled:f}))}):[]}))))}):[]})))])])])]),(!l||!c)&&d()(".col.s12.center-align",d()("p.flow-text",s("INCONSISTENCIES","SELECT_CATEGORIES_TO_START")))])}}};function ri(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function ro(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){ri(o,r,i,a,l,"next",e)}function l(e){ri(o,r,i,a,l,"throw",e)}a(void 0)})}}function ra(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var rl=function(){return{view:function(e){var t,n=e.attrs,r=n.state.model,i=(r.scenario||{}).categories;return d()(ty,{i18n:nv.i18n,form:(t=void 0===i?[]:i,[{id:"llm",label:s("LLM"),type:[{id:"id",label:"Service",type:"select",className:"col s12 m3",options:[{id:"ollama",label:"Ollama"},{id:"openai",label:"OpenAI"},{id:"clipboard",label:"Clipboard"}]},{id:"model",label:s("MODEL"),value:"gemma3",className:"col s12 m3",type:"text"},{id:"temperature",label:s("TEMPERATURE","BTN"),description:s("TEMPERATURE","DESC"),className:"col s12 m3",type:"number",value:"0.7",min:0,max:1,step:.1},{id:"apiKey",show:"id=openai",label:s("API_KEY"),type:"text",className:"col s12 m3"},{id:"url",label:s("URL"),description:s("OLLAMA_URL"),type:"url",className:"col s12 m6",show:"id!=clipboard"},{id:"prompts",label:s("PROMPT_TYPE","PROMPTS"),repeat:!0,pageSize:4,max:4,type:[{id:"type",label:s("PROMPT_TYPE","LABEL"),type:"select",options:[{id:"narrative",label:s("PROMPT_TYPE","NARRATIVE")}],className:"col s12 m4"},{id:"categories",label:"Included categories",type:"select",multiple:!0,options:t,className:"col s12 m8"},{id:"prompt",label:"PROMPT",type:"textare8"},{id:"prompt",label:"PROMPT",type:"textarea"}]}]}]),obj:r.scenario,onchange:function(){return ro(function(){return ra(this,function(e){switch(e.label){case 0:return[4,t7(n,r)];case 1:return e.sent(),[2]}})})()}})}}},rs=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"narrative";return ro(function(){var o,a,l,c,d,u,p,f,h,g,v,b,y;return ra(this,function(w){switch(w.label){case 0:if(o=e.id,a=e.apiKey,!(c=(void 0===(l=e.prompts)?[]:l).filter(function(e){return e.type===i}).shift())||!c.prompt||!c.categories||0===c.categories.length)return[2,""];switch(d=c.prompt,p=void 0===(u=c.categories)?[]:u,console.log("Generating story with:",e,t,r),f=e.url||"",h=e.model||"",o){case"clipboard":case"ollama":break;case"openai":f=f||"https://api.openai.com/v1/chat/completions",h=h||"gpt-4o-mini";break;default:throw Error("Unknown service: ".concat(o))}if(g=n.filter(function(e){return p.includes(e.id)}).reduce(function(e,t){var n;return null==(n=t.componentIds)||n.forEach(function(t){return e.add(t)}),e},new Set),v=r&&r.filter(function(e){return g.has(e.id)}).reduce(function(e,t){return t.values&&t.values.forEach(function(n){e.set(t.id+n.id,"".concat(n.label).concat(n.desc?" (".concat(n.desc,")"):""))}),e},new Map),console.log(b=r.filter(function(e){return g.has(e.id)&&t.components[e.id]}).map(function(e){var n=t.components[e.id].map(function(t){return v.get(e.id+t)}).join(", ");return"- ".concat(e.label).concat(e.desc?" (".concat(e.desc,")"):"",": ").concat(n)}).join("\n")),y=(null!=d?d:"")+"\n\n"+b,"clipboard"===o)return[2,y];return[4,function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.7,a=arguments.length>6?arguments[6]:void 0;return ro(function(){var l,c,d,u,p,f,h,g,v,b,y,w,E;return ra(this,function(T){switch(T.label){case 0:switch(c={"Content-Type":"application/json"},e){case"ollama":l={model:n,messages:[{role:"user",content:"".concat(s("RESPONSE_INSTRUCTIONS"),"\n\n").concat(i)}],stream:!1,options:{temperature:o}};break;case"openai":if(!a)throw Error("API key required for OpenAI");c.Authorization="Bearer ".concat(a),l={model:n,messages:[{role:"system",content:r},{role:"user",content:i}],temperature:o,stream:!1};break;default:throw Error("Unsupported provider: ".concat(e))}console.log("Request to ".concat(e,":"),JSON.stringify({url:t,headers:c,body:l},null,2)),d=3,u=0,T.label=1;case 1:if(!(u<d))return[3,9];T.label=2;case 2:return T.trys.push([2,7,,8]),[4,fetch(t,{method:"POST",headers:c,body:JSON.stringify(l)})];case 3:if((p=T.sent()).ok)return[3,5];return[4,p.text()];case 4:throw f=T.sent(),Error("Error: ".concat(p.status," ").concat(p.statusText," - ").concat(f));case 5:return[4,p.json()];case 6:switch(h=T.sent(),e){case"ollama":try{return(v=(null==h||null==(g=h.message)?void 0:g.content)?function(e){var t,n=e.trim().split("\n"),r=n.find(function(e){return e.trim()})||"",i=n.findIndex(function(e,t){return t>0&&""===e.trim()});if(-1!==i)t=n.slice(i+1).join("\n").trim();else{var o=n.indexOf(r);t=n.slice(o+1).join("\n").trim()}return{title:r,content:t}}(h.message.content):void 0)||console.warn(JSON.stringify(h,null,2)),[2,v]}catch(e){return console.error(e),[2,""]}case"openai":return[2,null==(w=h.choices)||null==(y=w[0])||null==(b=y.message)?void 0:b.content];default:return[2,void 0]}case 7:return E=T.sent(),console.error("Attempt ".concat(u+1," failed:"),E),u++,[3,8];case 8:return[3,1];case 9:return[2,void 0]}})})()}(o,f,h,"You are a helpfull AI storywriter.",y,.7,a)];case 1:return[2,w.sent()]}})})()};function rc(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function rd(e){return function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){rc(o,r,i,a,l,"next",e)}function l(e){rc(o,r,i,a,l,"throw",e)}a(void 0)})}}function ru(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function rp(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}var rm=function(){var e=[{id:"id",autogenerate:"id"},{id:"label",type:"text",className:"col s12 m6",label:s("NAME")},{id:"hideInconsistentValues",type:"checkbox",className:"col s6 m3 mt25",label:s("HIDE_INCONSISTENT")},{id:"includeDecisionSupport",type:"checkbox",className:"col s6 m3 mt25",label:s("INCLUDE_DECISION_SUPPORT")},{id:"desc",type:"textarea",label:s("DESCRIPTION")},{id:"template",type:"textarea",label:s("TEMPLATE","TITLE"),description:s("TEMPLATE","DESC").replace("XXX","{1}")},{id:"personas",type:"select",show:["includeDecisionSupport=true"],multiple:!0,options:"personas",label:s("SELECT_PERSONA")},{id:"categories",label:s("CATEGORIES"),type:[{id:"id",autogenerate:"id"},{id:"label",className:"col s4 m3 l3",type:"text",label:s("NAME")},{id:"desc",className:"col s4 m9 l6",type:"text",label:s("DESCRIPTION")},{id:"decisionSupport",type:"checkbox",className:"col s6 m3 l3 mt25",label:s("IS_DECISION_CATEGORY")},{id:"componentIds",type:"select",multiple:!0,label:s("DIMENSION_SELECTED"),options:"components"}],repeat:!0,pageSize:1,max:4},{id:"components",type:[{id:"id",autogenerate:"id"},{id:"order",type:"number",className:"col s3 m2",label:s("ORDER")},{id:"manual",type:"switch",className:"col s3 m2",label:s("MANUAL")},{id:"label",type:"text",className:"col s6 m8",label:s("NAME")},{id:"desc",type:"text",className:"col s12",label:s("DESCRIPTION")}],repeat:!0,pageSize:1,sortProperty:"order",label:s("DIMENSIONS")},{id:"thresholdColors",label:s("THRESHOLDS"),repeat:!0,sortProperty:"threshold",pageSize:1,type:[{id:"threshold",label:s("THRESHOLD"),type:"number",min:0,className:"col s6"},{id:"color",label:s("COLOR"),type:"color",className:"col s6"}]}],t=!1,n=!1,r=!1;return{oninit:function(e){return t6(e.attrs,u.SETTINGS)},view:function(i){var o=i.attrs,a=o.state.model,l=a.personas,c=void 0===l?[]:l;return[d()(".settings-page.row",{key:a.version},[d()(eT,{tabs:[{title:s("MODEL"),vnode:d()(".model-settings",[d()(".row",d()(O,{className:"right",iconName:"delete",label:s("DELETE"),onclick:function(){return n=!0}}),d()(O,{iconName:"auto_fix_high",className:"right",label:s("ADV_EDIT"),onclick:function(){return r=!0}})),d()(".row",d()(ty,{obj:a.scenario,form:e,i18n:nv.i18n,context:[{personas:c}],onchange:function(){return rd(function(){return rp(this,function(e){switch(e.label){case 0:return[4,t7(o,a)];case 1:return e.sent(),[2]}})})()}}))])},{title:s("INCONSISTENCIES","title"),vnode:d()(rr,ru({},o))},{title:"LLM",vnode:d()(".llm-settings",d()(rl,ru({},o)))},{title:s("PERSONA",2),vnode:d()(".persona-settings",[d()(".row",d()(O,{label:t?s("SAVE"):s("EDIT"),iconName:t?"save":"edit",className:"right",onclick:function(){return t=!t}})),t?d()(".row",d()(ty,{obj:a,i18n:nv.i18n,context:[{images:ej.reduce(function(e,t){return e[t.id]=t.img,e},{})}],form:[{id:"personas",label:s("PERSONA",2),repeat:!0,pageSize:100,type:[{id:"id",autogenerate:"id"},{id:"label",type:"text",className:"col s12 m6",label:s("NAME")},{id:"url",type:"select",className:"col s12 m6",options:ej,label:s("IMAGE")},{id:"desc",type:"textarea",className:"col s12",label:s("DESCRIPTION")}]}],onchange:function(){return rd(function(){return rp(this,function(e){switch(e.label){case 0:return[4,t7(o,a)];case 1:return e.sent(),[2]}})})()}})):d()(".row",c.map(function(e){var t;return d()(".col.s12.m6.l4",d()(".card large",[d()(".card-image",[d()("img",{src:null==(t=ej.find(function(t){return t.id===e.url}))?void 0:t.img,style:"width: 100%"}),d()(".span.card-title",e.label)]),d()(".card-content",d()("p",e.desc))]))}))])}]}),n&&d()(ep,{id:"deleteModel",title:s("DELETE_ITEM","title",{item:s("MODEL")}),description:s("DELETE_ITEM","description",{item:s("MODEL")}),isOpen:!0,onClose:function(){return n=!1},buttons:[{label:s("CANCEL")},{label:s("OK"),onclick:function(){t7(o,e_())}}]}),r&&d()(ep,{id:"mdEditor",title:s("ADV_EDIT"),isOpen:!0,onClose:function(){return r=!1},description:d()(rf,o),bottomSheet:!0,fixedFooter:!0,buttons:[{label:s("CANCEL")}]})])]}}},rf=function(){var e,t,n;return{oninit:function(){t=void 0,n=void 0},view:function(r){var i=r.attrs,o=i.state.model;if(o.scenario){var a=o.scenario,l=a.categories,c=void 0===l?[]:l,u=a.components,p=void 0===u?[]:u;return!e&&c.length>0&&(e=c[0]),console.log(e),!t&&e&&(t=n=nP(e,o.scenario.components)),d()(".md-editor.row",[d()(ew,{label:s("CATEGORIES"),className:"col s6",placeholder:s("i18n","pickOne"),checkedId:null==e?void 0:e.id,options:c,onchange:function(n){t=void 0,e=c.find(function(e){return e.id===n[0]}),d().redraw()}}),d()(O,{iconName:"add",className:"col s1",onclick:function(){var n={id:f(),label:s("NEW_BOX"),componentIds:[]};e=n,o.scenario.categories?o.scenario.categories.push(n):o.scenario.categories=[n],t=void 0,t7(i,o)}}),d()(O,{label:s("SAVE"),className:"col offset-s2 s3",iconName:"save",disabled:n===t,onclick:function(){if(n){var t=nj(n),r=t.label,a=t.desc,l=t.keyDrivers,s=void 0===l?[]:l;if(e){r&&(e.label=r),a&&(e.desc=a);var d=new Set(e.componentIds);e.componentIds=s.map(function(e){return e.id}),e.componentIds.forEach(function(e){return d.delete(e)}),o.scenario.categories=c.map(function(t){return t.id===(null==e?void 0:e.id)?e:t});var u=s.reduce(function(e,t){return e.set(t.id,t),e},new Map);o.scenario.components=p.filter(function(e){return!d.has(e.id)}).map(function(e){var t=u.get(e.id);return t?(e.label=t.label,e.desc=t.desc,e.values=t.values,u.delete(e.id),t):e}),s.filter(function(e){return u.has(e.id)}).forEach(function(e){return o.scenario.components.push(e)})}t7(i,o)}}}),d()(et,{value:n,disabled:!e,oninput:function(e){n=e}})])}}}};function rh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function rg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}function rv(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}function rb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw r}}return o}}(e,t)||rw(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ry(e){return function(e){if(Array.isArray(e))return rh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rw(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(e,t){if(e){if("string"==typeof e)return rh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rh(e,t)}}var rE=function(){var e,t,n=!1;return{oninit:function(n){var r=n.attrs,i=r.item,o=r.form,a=r.contexts,l=a&&a.length>0&&"none"!==a[0];t=o.filter(function(e){return"context"!==e.id||l}).map(function(e){var t,n;return"context"===e.id&&l&&e.options&&(t=e.options,null!=(n=Array)&&"undefined"!=typeof Symbol&&n[Symbol.hasInstance]?!!n[Symbol.hasInstance](t):t instanceof n)?rv(rg({},e),{options:e.options.filter(function(e){return"none"===e.id||a.indexOf(e.id)>=0})}):e}),e=rg({},i)},view:function(r){var i=r.attrs,o=i.item,a=i.id,l=i.color;return d()("li.kanban-item.card.widget[draggable=true]",{key:a,id:"ki_".concat(o.id),ondragstart:function(e){var t;null==(t=e.dataTransfer)||t.setData(a,JSON.stringify([a,o.id]))},ondragover:function(e){var t;(null==(t=e.dataTransfer)?void 0:t.types.includes(a.toLowerCase()))&&e.preventDefault()},ondrop:function(e){e.preventDefault();var t,n=null==(t=e.dataTransfer)?void 0:t.getData(a);if(n){var r=rb(JSON.parse(n),2),l=(r[0],r[1]),s=e.currentTarget;if(l&&s&&l!==o.id&&s){var c=e.clientY-s.getBoundingClientRect().top,d=s.clientHeight;nr(i,a,l,o.id,c<=d/2)}}}},[d()(".card-content",{style:{backgroundColor:l[0]},onmouseenter:function(){var e="".concat(o.label||"").concat(o.desc?": ".concat(o.desc):"");i.update({activeTooltip:e})},onmouseleave:function(){i.update({activeTooltip:void 0})}},[d()("span.card-title.morph-cell",{style:{color:l[1]}},tA(o.label)),d()(O,{className:"top-right widget-link",iconName:"edit",iconClass:"no-gutter",onclick:function(){n=!0}})]),d()(ep,{id:"modal_".concat(o.id),title:s("EDIT_COMPONENT"),isOpen:n,fixedFooter:!0,onClose:function(){return n=!1},description:d()(".row",d()(ty,{form:t,obj:e,i18n:nv.i18n})),buttons:[{label:s("CANCEL")},{label:s("DELETE"),onclick:function(){nn(i,a,e,"delete")}},{label:s("OK"),onclick:function(){nn(i,a,e,"update")}}]})])}}},rT=function(){var e={},t=!1;return{view:function(n){var r=n.attrs,i=r.sc,o=r.form,a=i.id;return d()("li.kanban-header.widget",{key:"header"},[d()(".span.title.truncate.left.ml10",{onmouseenter:i.desc?function(){r.update({activeTooltip:"".concat(i.label||"",": ").concat(i.desc)})}:void 0,onmouseleave:i.desc?function(){r.update({activeTooltip:void 0})}:void 0},i.label),d()(O,{className:"widget-link",iconName:"add",iconClass:"right",i18n:nv.i18n,onclick:function(){return t=!0}}),d()(ep,{id:i.id,title:s("ADD_COMPONENT"),fixedFooter:!0,isOpen:t,onClose:function(){return t=!1},description:d()(".row",d()(ty,{form:o,obj:e,i18n:nv.i18n})),buttons:[{label:s("CANCEL")},{label:s("OK"),onclick:function(){var t=rg({},e);e={},nn(r,a,t,"create")}}]})])}}},rk=function(){return{view:function(e){var t,n=e.attrs,r=n.sc,i=n.form,o=n.compColor;return d()("li",{key:r.id},[d()("ul.kanban-row",d()(rT,rv(rg({},n),{sc:r,form:i})),null==(t=r.values)?void 0:t.map(function(e){return d()(rE,rv(rg({key:e.id},n),{id:r.id,contexts:r.contexts,item:e,form:i,color:o[e.id]||o.OTHER}))}))])}}},rO=function(){return{view:function(e){var t=e.attrs,n=t.form,r=t.categoryId,i=t.compColor,o=t.state.model.scenario,a=o.categories,l=o.components,s=a[r],c=l.filter(function(e){return s.componentIds&&s.componentIds.indexOf(e.id)>=0});return d()("ul.kanban",[c.map(function(e){return d()(rk,rv(rg({},t),{sc:e,form:n,compColor:i}))})])}}},rx=function(){var e,t=function(t){i!==t&&r!==t&&(i=t,o=!0,d().redraw(),clearTimeout(e),e=window.setTimeout(function(){r=t,o=!1,d().redraw()},200))},n=function(){clearTimeout(e),e=window.setTimeout(function(){r="",i="",o=!1,d().redraw()},200)},r="",i="",o=!1,a=[{id:"id",autogenerate:"id"},{id:"label",type:"text",label:s("NAME")},{id:"desc",type:"textarea",label:s("DESCRIPTION")}],l=0,c={},p=[],f=function(e){e&&(p="light"===eI.getEffectiveTheme()?ry(e):e.map(function(e){return{threshold:e.threshold,color:tK(e.color)}}))},h=function(e,t){var n=[],r=e.narratives.filter(function(e){return e.included}),i=!0,o=!1,a=void 0;try{for(var l,s=t[Symbol.iterator]();!(i=(l=s.next()).done);i=!0)!function(){var t=l.value,i=e.components.filter(function(e){var n;return null==(n=t.componentIds)?void 0:n.includes(e.id)}),o=rS({components:i,narratives:r,compColor:c,includeDescriptions:!1});n.push(o)}()}catch(e){o=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}var d=n.join("\n\n"),u=e4(d,!0);navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([u],{type:"text/html"}),"text/plain":new Blob([d],{type:"text/plain"})})])};return{oninit:function(e){t6(e.attrs,u.DEFINE_BOX)},view:function(e){var i=e.attrs,u=i.state,g=u.activeTooltip,v=u.fontSize,b=u.model.scenario;g?t(g):n();var y=b.categories,w=b.thresholdColors,E=b.narratives,T=void 0===E?[]:E;return f(void 0===w?[]:w),(0===Object.keys(c).length||l!==T.length)&&(l=T.length,c=tZ(T,p)),[d()(".create-box-page",[d()(O,{style:{marginTop:"20px",marginBottom:"-40px"},className:"right",label:s("COPY_BOX","LABEL"),iconName:"content_copy",title:s("COPY_BOX","TITLE"),onclick:function(){h(b,y),eO({html:s("COPY_BOX","TOAST")})}}),d()(x,{style:{marginTop:"20px",marginBottom:"-40px"},className:"right",iconName:"text_increase",onclick:function(){t9(i,v+1)}}),d()(x,{style:{marginTop:"20px",marginBottom:"-40px"},className:"right",iconName:"text_decrease",onclick:function(){t9(i,v-1)}}),d()(n4,{items:p}),y.length>1&&y[0].componentIds&&y[1].componentIds?d()(eT,{tabs:y.map(function(e,t){return{id:e.id,title:e.label,vnode:d()(rO,rv(rg({},i),{compColor:c,categoryId:t,form:a}))}})}):1===y.length&&y[0].componentIds?d()(rO,rv(rg({},i),{compColor:c,categoryId:0,form:a})):d()(".row.mt10",d()(".col.s12",s("SPEC_CATS"))),r&&d()(".popupContainer",{className:"show"},d()(".popupContent.center",{class:o?"fade-out":void 0},d()(tp,{md:r,removeParagraphs:!0})))])]}}},rS=function(e){var t=function(e){var t=F.map(function(t){var n;return null!=(n=t[e])?n:""});Z.push("| ".concat(t.join(" | ")," |"))},n=e.components,r=void 0===n?[]:n,i=e.narratives,o=void 0===i?[]:i,a=e.compColor,l=void 0===a?{}:a,s=e.includeDescriptions,c=void 0!==s&&s,d=e.resolveIds,u=new Map,p=new Set,f=o.length>0,h=!0,g=!1,v=void 0;try{for(var b,y,w=r[Symbol.iterator]();!(h=(y=w.next()).done);h=!0){var E=y.value,T=!0,k=!1,O=void 0;try{for(var x,S=(E.values||[])[Symbol.iterator]();!(T=(x=S.next()).done);T=!0){var I=x.value;u.set(I.id,I),p.add(I.id)}}catch(e){k=!0,O=e}finally{try{T||null==S.return||S.return()}finally{if(k)throw O}}}}catch(e){g=!0,v=e}finally{try{h||null==w.return||w.return()}finally{if(g)throw v}}var L=null!=d?d:function(e,t){var n=[],r=function(e){"string"==typeof e&&t.has(e)?n.push(e):Array.isArray(e)&&e.forEach(r)};return e&&(void 0===e?"undefined":e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e)=="object"&&("components"in e&&Object.values(e.components||{}).forEach(r),"selections"in e&&Object.values(e.selections||{}).forEach(r),"items"in e&&r(e.items)),n},A={},C=!0,N=!1,D=void 0;try{for(var M,_=(o||[])[Symbol.iterator]();!(C=(M=_.next()).done);C=!0){var R=M.value,P=L(R,p),j=!0,H=!1,V=void 0;try{for(var $,B=P[Symbol.iterator]();!(j=($=B.next()).done);j=!0){var U=$.value;A[U]=(A[U]||0)+1}}catch(e){H=!0,V=e}finally{try{j||null==B.return||B.return()}finally{if(H)throw V}}}}catch(e){N=!0,D=e}finally{try{C||null==_.return||_.return()}finally{if(N)throw D}}for(var z=function(e){var t=rb(l[e]||["#999999","#ffffff"],1)[0];return'<span style="color:'.concat(t,'">■</span>')},W=r.map(function(e){return e.label}),F=r.map(function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,a=(e.values||[])[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l,s=o.value,d=f&&null!=(l=A[s.id])?l:0,u=tA(s.label),p=c&&s.desc?" — ".concat(s.desc):"";t.push(f?"".concat(z(s.id)," ").concat(u," (").concat(d,"x)").concat(p):"".concat(u).concat(p))}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}),G=(b=Math).max.apply(b,[0].concat(ry(F.map(function(e){return e.length})))),Y="| ".concat(W.join(" | ")," |"),K="| ".concat(W.map(function(){return"---"}).join(" | ")," |"),Z=[],q=0;q<G;q++)t(q);return[Y,K].concat(ry(Z)).join("\n")},rI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.reduce(function(e,t,n){return e[t.id]=n,e},{});return(e.match(/({[^}]+})|([^{}]+)/g)||[]).map(function(e){if(!(e.startsWith("{")&&e.endsWith("}")))return e;var i=e.substring(1,e.length-1),o=t[r[i]];if(!o)return i;var a=o.values&&n[o.id]?"".concat(tN(o.values.filter(function(e){return n[o.id].includes(e.id)}).map(function(e){return e.label}),s("AND"),"",!1)):" ... ";return d()("strong",a)})},rL=function(){return{view:function(e){var t=e.attrs,n=t.template,r=t.state,i=r.model,o=r.curNarrative,a=t.className,l=i.scenario.components,s=void 0===l?[]:l,c=(void 0===o?{}:o).components,u=void 0===c?{}:c;return n.split(/\{(\d+)\}/g).map(function(e){return e.replace(/^\d+$/,function(e){return+e<=s.length?"{".concat(s[e-1].id,"}"):"??? ".concat(e," ???")})}).join("").split(/\n/g).map(function(e){return e.trim()}).filter(Boolean).map(function(e){return d()(".scenario-paragraph",{className:a},[rI(e,s,u)])})}}};let rA='<svg viewBox="0 0 24 28" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4V20 M18 4V20 M6 12H18"/><text x="20" y="10" font-size="10" stroke-width="1" fill="currentColor">1</text></svg>',rC='<svg viewBox="0 0 24 28" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4V20 M18 4V20 M6 12H18"/><text x="20" y="10" font-size="10" stroke-width="1" fill="currentColor">2</text></svg>',rN='<svg viewBox="0 0 24 28" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4V20 M18 4V20 M6 12H18"/><text x="20" y="10" font-size="10" stroke-width="1" fill="currentColor">3</text></svg>',rD='<svg viewBox="0 0 24 28" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4V20 M18 4V20 M6 12H18"/><text x="20" y="10" font-size="10" stroke-width="1" fill="currentColor">4</text></svg>',rM='<svg viewBox="0 0 24 28" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4V20 M18 4V20 M6 12H18"/><text x="20" y="10" font-size="10" stroke-width="1" fill="currentColor">5</text></svg>',r_='<svg viewBox="0 0 24 28" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4V20 M18 4V20 M6 12H18"/><text x="20" y="10" font-size="10" stroke-width="1" fill="currentColor">6</text></svg>',rR='<svg viewBox="0 0 100 100" stroke="currentColor" stroke-width="2"><path d="M74 21H44c-10 0-17 8-17 18s7 17 17 17h5v23h6V27h8v52h6V27h5z"/></svg>',rP=[{name:"paragraph",icon:rR,title:"Paragraph",action:"paragraph",shortcut:"Ctrl+0"},{name:"heading-1",icon:rA,title:"Heading 1",action:"heading-1",shortcut:"Ctrl+1"},{name:"heading-2",icon:rC,title:"Heading 2",action:"heading-2",shortcut:"Ctrl+2"},{name:"heading-3",icon:rN,title:"Heading 3",action:"heading-3",shortcut:"Ctrl+3"},{name:"heading-4",icon:rD,title:"Heading 4",action:"heading-4",shortcut:"Ctrl+4"},{name:"heading-5",icon:rM,title:"Heading 5",action:"heading-5",shortcut:"Ctrl+5"},{name:"heading-6",icon:r_,title:"Heading 6",action:"heading-6",shortcut:"Ctrl+6"}],rj=e=>({start:e.selectionStart,end:e.selectionEnd,text:e.value.substring(e.selectionStart,e.selectionEnd)}),rH=(e,t,n=0,r=0)=>{let{start:i,end:o}=rj(e),a=e.value,l=a.slice(0,i)+t+a.slice(o);return e.value=l,e.setSelectionRange(i+n,i+t.length+r),e.focus(),l},rV=(e,t,n,r)=>{let i=rj(e);return rH(e,t+(i.text||r||"")+n,i.text?0:t.length,i.text?0:-n.length)},r$=(e,t)=>{let n=rj(e);if(n.text)return n.text.split("\n").every(e=>e.startsWith(t));let{value:r,selectionStart:i}=e,o=r.lastIndexOf("\n",i-1)+1,a=r.indexOf("\n",i);return r.slice(o,-1===a?void 0:a).startsWith(t)},rB=e=>{let{value:t,selectionStart:n}=e,r=t.lastIndexOf("\n",n-1)+1,i=t.indexOf("\n",n),o=-1===i?t.length:i;return{line:t.slice(r,o),start:r,end:o}},rU=(e,t)=>{let{start:n,end:r}=rB(e),i=e.value,o=i.slice(0,n)+t+i.slice(r);return e.value=o,e.setSelectionRange(n+t.length,n+t.length),e.focus(),o},rz=e=>t=>{let{line:n}=rB(t),r=/^-\s/.test(n),i=/^\d+\.\s/.test(n);if("unordered"===e)if(r)return rU(t,n.slice(2));else if(i)return rU(t,n.replace(/^\d+\.\s/,"- "));else return rU(t,n?`- ${n}`:"- List item");return i?rU(t,n.replace(/^\d+\.\s/,"")):r?rU(t,n.replace(/^-\s/,"1. ")):rU(t,n?`1. ${n}`:"1. List item")},rW=(e,t,n)=>{rj(e);let{value:r,selectionStart:i,selectionEnd:o}=e,a=r.slice(Math.max(0,i-t.length),i),l=r.slice(o,o+n.length);return a===t&&l===n},rF=(e,t,n)=>{e.focus();let r=document.getSelection();return r&&r.rangeCount>0&&r.getRangeAt(0),document.execCommand(t,!1,n),e.innerHTML},rG=()=>{let e=document.getSelection();if(!e||0===e.rangeCount)return null;let t=e.getRangeAt(0).commonAncestorContainer;for(;t&&t!==document.body;){if(t.nodeType===Node.ELEMENT_NODE){let e=t;if("TABLE"===e.tagName)return e;if("TD"===e.tagName||"TH"===e.tagName)return e.closest("table")}t=t.parentNode}return null},rY=()=>{let e=document.getSelection();if(!e||0===e.rangeCount)return null;let t=e.getRangeAt(0).commonAncestorContainer;for(;t&&t!==document.body;){if(t.nodeType===Node.ELEMENT_NODE){let e=t;if("TD"===e.tagName||"TH"===e.tagName)return e}t=t.parentNode}return null},rK=e=>{let t=e.closest("tr");return{row:Array.from(e.closest("table").rows).indexOf(t),col:Array.from(t.cells).indexOf(e)}},rZ=[{key:"b",ctrl:!0,action:"bold",description:"Bold text"},{key:"i",ctrl:!0,action:"italic",description:"Italic text"},{key:"u",ctrl:!0,action:"strikethrough",description:"Strikethrough text"},{key:"`",ctrl:!0,action:"inlineCode",description:"Inline code"},{key:"1",ctrl:!0,action:"heading-1",description:"Heading 1"},{key:"2",ctrl:!0,action:"heading-2",description:"Heading 2"},{key:"3",ctrl:!0,action:"heading-3",description:"Heading 3"},{key:"4",ctrl:!0,action:"heading-4",description:"Heading 4"},{key:"5",ctrl:!0,action:"heading-5",description:"Heading 5"},{key:"6",ctrl:!0,action:"heading-6",description:"Heading 6"},{key:"0",ctrl:!0,action:"paragraph",description:"Paragraph"},{key:"l",ctrl:!0,action:"unorderedList",description:"Unordered list"},{key:"l",ctrl:!0,shift:!0,action:"orderedList",description:"Ordered list"},{key:"Tab",action:"indent",description:"Indent"},{key:"Tab",shift:!0,action:"outdent",description:"Outdent"},{key:"]",ctrl:!0,action:"indent",description:"Indent"},{key:"[",ctrl:!0,action:"outdent",description:"Outdent"},{key:"q",ctrl:!0,action:"blockquote",description:"Blockquote"},{key:"k",ctrl:!0,action:"link",description:"Insert link"},{key:"g",ctrl:!0,action:"image",description:"Insert image"},{key:"t",ctrl:!0,action:"table",description:"Insert table"},{key:"r",ctrl:!0,action:"horizontalRule",description:"Horizontal rule"},{key:"`",ctrl:!0,shift:!0,action:"codeBlock",description:"Code block"},{key:"z",ctrl:!0,action:"undo",description:"Undo"},{key:"z",ctrl:!0,shift:!0,action:"redo",description:"Redo"},{key:"y",ctrl:!0,action:"redo",description:"Redo"},{key:"a",ctrl:!0,action:"selectAll",description:"Select all"},{key:"m",ctrl:!0,action:"toggleMode",description:"Toggle mode"},{key:"p",ctrl:!0,action:"togglePreview",description:"Toggle preview"}],rq=rZ.map(e=>({...e,ctrl:!1,meta:e.ctrl}));class rX{constructor(e){this.mode="wysiwyg",this.textarea=null,this.contentEditable=null,this.onContentChange=e}setOnContentChange(e){this.onContentChange=e}setTextarea(e){this.textarea=e,this.setupKeyboardHandlers(e)}getTextarea(){return this.textarea}setContentEditable(e){this.contentEditable=e,this.setupKeyboardHandlers(e)}setMode(e){this.mode=e}executeAndNotify(e){var t;try{let n=e();null==(t=this.onContentChange)||t.call(this,n)}catch(e){console.error("Editor action failed:",e)}}setupKeyboardHandlers(e){let t=t=>{var n,r;if(!((e,t,n=rZ)=>{let r=((e,t=rZ)=>t.find(t=>((e,t)=>{var n,r,i,o;if(e.key.toLowerCase()!==t.key.toLowerCase())return!1;let a=(null!=(n=t.ctrl)&&n)===e.ctrlKey,l=(null!=(r=t.alt)&&r)===e.altKey,s=(null!=(i=t.shift)&&i)===e.shiftKey,c=(null!=(o=t.meta)&&o)===e.metaKey;return a&&l&&s&&c})(e,t))||null)(e,n);return!!r&&(e.preventDefault(),e.stopPropagation(),t(r.action),!0)})(t,e=>this.executeAction(e),"undefined"!=typeof navigator&&/Mac|iPhone|iPad|iPod/.test(navigator.platform)?rq:rZ)&&"markdown"===this.mode&&e instanceof HTMLTextAreaElement){if("Tab"===t.key){((e,t,n=!1)=>{if(t instanceof HTMLTextAreaElement){let{value:r,selectionStart:i}=t,o=r.lastIndexOf("\n",i-1)+1,a=r.indexOf("\n",i),l=r.slice(o,-1===a?void 0:a),s=/^\s*[-*+]\s/.test(l)||/^\s*\d+\.\s/.test(l),c=(r.slice(0,i).match(/```/g)||[]).length%2==1;if(s||c){if(e.preventDefault(),n){let e=l.match(/^(\s+)/);if(e){let n=e[1],s=(n.length>=2?n.slice(2):"")+l.slice(n.length);t.value=r.slice(0,o)+s+r.slice(-1===a?void 0:a),t.setSelectionRange(i-Math.min(2,n.length),i-Math.min(2,n.length))}}else{let e=l.replace(/^(\s*)/,"$1  ");t.value=r.slice(0,o)+e+r.slice(-1===a?void 0:a),t.setSelectionRange(i+2,i+2)}return!0}}return!1})(t,e,t.shiftKey)&&(null==(n=this.onContentChange)||n.call(this,e.value));return}if("Enter"===t.key){((e,t)=>{let{value:n,selectionStart:r}=t,i=n.lastIndexOf("\n",r-1)+1,o=n.indexOf("\n",r),a=n.slice(i,-1===o?void 0:o),l=a.match(/^(\s*)([-*+])\s(.*)$/),s=a.match(/^(\s*)(\d+)\.\s(.*)$/);if(l){let[,r,a,s]=l;if(""===s.trim())return e.preventDefault(),t.value=n.slice(0,i)+r+n.slice(-1===o?void 0:o),t.setSelectionRange(i+r.length,i+r.length),!0;{e.preventDefault();let i=`
${r}${a} `,l=-1===o?n.length:o;return t.value=n.slice(0,l)+i+n.slice(l),t.setSelectionRange(l+i.length,l+i.length),!0}}if(s){let[,r,a,l]=s;if(""===l.trim())return e.preventDefault(),t.value=n.slice(0,i)+r+n.slice(-1===o?void 0:o),t.setSelectionRange(i+r.length,i+r.length),!0;{e.preventDefault();let i=parseInt(a)+1,l=`
${r}${i}. `,s=-1===o?n.length:o;return t.value=n.slice(0,s)+l+n.slice(s),t.setSelectionRange(s+l.length,s+l.length),!0}}return!1})(t,e)&&(null==(r=this.onContentChange)||r.call(this,e.value));return}}},n=t=>{var n,r;if("markdown"===this.mode&&e instanceof HTMLTextAreaElement){let i=null==(n=t.clipboardData)?void 0:n.getData("text/plain");if(i){let n=i.replace(/\\n/g,"\n").replace(/\\t/g,"	").replace(/\\r/g,"\r");if(n!==i){t.preventDefault();let i=e.selectionStart,o=e.selectionEnd,a=e.value;e.value=a.substring(0,i)+n+a.substring(o);let l=i+n.length;e.setSelectionRange(l,l),null==(r=this.onContentChange)||r.call(this,e.value)}}}};e.addEventListener("keydown",t),e.addEventListener("paste",n)}executeAction(e){switch(e){case"bold":this.bold();break;case"italic":this.italic();break;case"strikethrough":this.strikethrough();break;case"inlineCode":this.inlineCode();break;case"codeBlock":this.codeBlock();break;case"heading":case"toggleHeading":this.toggleHeading();break;case"heading-1":this.heading(1);break;case"heading-2":this.heading(2);break;case"heading-3":this.heading(3);break;case"heading-4":this.heading(4);break;case"heading-5":this.heading(5);break;case"heading-6":this.heading(6);break;case"paragraph":this.paragraph();break;case"unorderedList":this.unorderedList();break;case"orderedList":this.orderedList();break;case"indent":this.indent();break;case"outdent":this.outdent();break;case"blockquote":this.blockquote();break;case"horizontalRule":this.horizontalRule();break;case"link":this.link();break;case"image":this.image();break;case"table":this.table();break;case"undo":this.undo();break;case"redo":this.redo();break;case"selectAll":this.selectAll();break;case"removeFormat":this.removeFormat();break;default:console.warn(`Unknown action: ${e}`)}}bold(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"bold")):this.textarea&&this.executeAndNotify(()=>rV(this.textarea,"**","**","bold text"))}italic(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"italic")):this.textarea&&this.executeAndNotify(()=>rV(this.textarea,"*","*","italic text"))}strikethrough(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"strikeThrough")):this.textarea&&this.executeAndNotify(()=>rV(this.textarea,"~~","~~","strikethrough text"))}inlineCode(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>{var e;let t,n;return e=this.contentEditable,n=(null==(t=document.getSelection())?void 0:t.toString())||"code",rF(e,"insertHTML",`<code>${n}</code>`)}):this.textarea&&this.executeAndNotify(()=>rV(this.textarea,"`","`","code"))}codeBlock(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>{var e;let t,n;return e=this.contentEditable,n=(null==(t=document.getSelection())?void 0:t.toString())||"code block",rF(e,"insertHTML",`<pre><code>${n}</code></pre>`)}):this.textarea&&this.executeAndNotify(()=>{var e;let t,n;return n=(t=rj(e=this.textarea)).text||"code block",rH(e,`\`\`\`
${n}
\`\`\``,4*!t.text,0)})}toggleHeading(){this.textarea&&this.executeAndNotify(()=>(e=>{let{line:t}=rB(e),n=t.match(/^(#{1,6})\s/);if(!n)return rU(e,t.trim()?`# ${t}`:"# Heading");{let r=n[1].length;return r<6?rU(e,"#".repeat(r+1)+t.slice(r)):rU(e,t.slice(7))}})(this.textarea))}heading(e){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>(t=>e<1||e>6?t.innerHTML:rF(t,"formatBlock",`h${e}`))(this.contentEditable)):this.textarea&&this.executeAndNotify(()=>(t=>{if(e<1||e>6)return t.value;let{line:n}=rB(t),r="#".repeat(e)+" ",i=n.replace(/^#{1,6}\s*/,"");return rU(t,i?`${r}${i}`:`${r}Heading ${e}`)})(this.textarea))}paragraph(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>rF(this.contentEditable,"formatBlock","p"))}unorderedList(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"insertUnorderedList")):this.textarea&&this.executeAndNotify(()=>rz("unordered")(this.textarea))}orderedList(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"insertOrderedList")):this.textarea&&this.executeAndNotify(()=>rz("ordered")(this.textarea))}indent(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"indent")):this.textarea&&this.executeAndNotify(()=>((e,t="  ")=>{var n;let r;return((r=rj(e).text)||!n||(r=n),r)?rH(e,r.split("\n").map(e=>t+e).join("\n"),0,0):rH(e,t,t.length,0)})(this.textarea))}outdent(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"outdent")):this.textarea&&this.executeAndNotify(()=>((e,t="  ")=>{let n=rj(e).text;if(!n){let{line:n}=rB(e);return n.startsWith(t)?rU(e,n.slice(t.length)):e.value}return rH(e,n.split("\n").map(e=>e.startsWith(t)?e.slice(t.length):e).join("\n"),0,0)})(this.textarea))}blockquote(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"formatBlock","blockquote")):this.textarea&&this.executeAndNotify(()=>((e,t,n)=>{let r=rj(e).text;if(!r&&n&&(r=n),!r)return rH(e,t,t.length,0);let i=r.split("\n");return rH(e,i.every(e=>e.startsWith(t))?i.map(e=>e.slice(t.length)).join("\n"):i.map(e=>t+e).join("\n"),0,0)})(this.textarea,"> ","Quote"))}horizontalRule(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"insertHTML","<hr>")):this.textarea&&this.executeAndNotify(()=>rH(this.textarea,"\n---\n",0,0))}link(e,t){e&&t?"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>(n=>{let r=document.getSelection(),i=t||(null==r?void 0:r.toString())||"link text";return rF(n,"insertHTML",`<a href="${e}">${i}</a>`)})(this.contentEditable)):this.textarea&&this.executeAndNotify(()=>{let n=`[${t}](${e})`;return rH(this.textarea,n,0,0)}):this.textarea&&this.executeAndNotify(()=>{var e;let t;return t=rj(e=this.textarea).text||"link text",rH(e,`[${t}](url)`,t.length+2,-4)})}image(e,t,n){if(e){let r=t||"";"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>((e,t="",n)=>r=>{let i=n?` title="${n}"`:"";return rF(r,"insertHTML",`<img src="${e}" alt="${t}"${i}>`)})(e,r,n)(this.contentEditable)):this.textarea&&this.executeAndNotify(()=>{let t=n?` "${n}"`:"",i=`![${r}](${e}${t})`;return rH(this.textarea,i,0,0)})}else this.textarea&&this.executeAndNotify(()=>{var e;let t;return t=rj(e=this.textarea).text||"alt text",rH(e,`![${t}](image-url)`,t.length+3,-11)})}table(e=3,t=3){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>((e=3,t=3)=>n=>{let r=Array(t).fill(null).map((e,t)=>`<th>Header ${t+1}</th>`).join(""),i=`<tr>${r}</tr>`,o=Array(e-1).fill(null).map((e,n)=>{let r=Array(t).fill(null).map((e,t)=>`<td>Cell ${n+1}-${t+1}</td>`).join("");return`<tr>${r}</tr>`}).join("");return rF(n,"insertHTML",`<table><thead>${i}</thead><tbody>${o}</tbody></table>`)})(e,t)(this.contentEditable)):this.textarea&&this.executeAndNotify(()=>((e=3,t=3)=>n=>{let r=Array(t).fill("Header").map((e,t)=>`${e} ${t+1}`),i=[`| ${r.join(" | ")} |`,`| ${Array(t).fill("-------").join(" | ")} |`,...Array(e-1).fill(null).map((e,n)=>{let r=Array(t).fill("Cell").map((e,t)=>`${e} ${n+1}-${t+1}`);return`| ${r.join(" | ")} |`})].join("\n");return rH(n,`
${i}
`,0,0)})(e,t)(this.textarea))}undo(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>rF(this.contentEditable,"undo"))}redo(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>rF(this.contentEditable,"redo"))}selectAll(){"wysiwyg"===this.mode&&this.contentEditable?this.executeAndNotify(()=>rF(this.contentEditable,"selectAll")):"markdown"===this.mode&&this.textarea&&this.textarea.select()}removeFormat(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>rF(this.contentEditable,"removeFormat"))}getFormattingState(){return"wysiwyg"===this.mode&&this.contentEditable?(this.contentEditable,{bold:document.queryCommandState("bold"),italic:document.queryCommandState("italic"),strikethrough:document.queryCommandState("strikeThrough"),underline:document.queryCommandState("underline"),unorderedList:document.queryCommandState("insertUnorderedList"),orderedList:document.queryCommandState("insertOrderedList"),blockquote:(()=>{let e=document.getSelection();if(e&&e.rangeCount>0){let t=e.getRangeAt(0).commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentElement:t;return(null==n?void 0:n.closest("blockquote"))!==null}return!1})(),heading:(()=>{let e=document.getSelection();if(e&&e.rangeCount>0){let t=e.getRangeAt(0).commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentElement:t,r=null==n?void 0:n.closest("h1, h2, h3, h4, h5, h6");if(r)return{isHeading:!0,level:parseInt(r.tagName.charAt(1))}}return{isHeading:!1,level:0}})()}):this.textarea?(e=>{let t,{line:n}=rB(e);return{bold:rW(e,"**","**"),italic:rW(e,"*","*"),strikethrough:rW(e,"~~","~~"),inlineCode:rW(e,"`","`"),heading:/^#{1,6}\s/.test(n),headingLevel:(t=n.match(/^(#{1,6})\s/))?t[1].length:0,unorderedList:r$(e,"- "),orderedList:/^\d+\.\s/.test(n),blockquote:r$(e,"> ")}})(this.textarea):{}}canUndo(){return"wysiwyg"===this.mode&&!!this.contentEditable&&(this.contentEditable,document.queryCommandEnabled("undo"))}canRedo(){return"wysiwyg"===this.mode&&!!this.contentEditable&&(this.contentEditable,document.queryCommandEnabled("redo"))}code(){this.inlineCode()}quote(){this.blockquote()}insertRowAbove(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>(e=>{let t=rG(),n=rY();if(!t||!n)return e.innerHTML;let{row:r}=rK(n),i=t.rows[r].cells.length,o=t.insertRow(r);for(let e=0;e<i;e++)o.insertCell().innerHTML="&nbsp;";return e.innerHTML})(this.contentEditable))}insertRowBelow(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>(e=>{let t=rG(),n=rY();if(!t||!n)return e.innerHTML;let{row:r}=rK(n),i=t.rows[r].cells.length,o=t.insertRow(r+1);for(let e=0;e<i;e++)o.insertCell().innerHTML="&nbsp;";return e.innerHTML})(this.contentEditable))}insertColumnLeft(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>(e=>{var t;let n=rG(),r=rY();if(!n||!r)return e.innerHTML;let{col:i}=rK(r);for(let e=0;e<n.rows.length;e++){let r=n.rows[e],o=r.insertCell(i);if(0===e&&r.querySelector("th")){let e=document.createElement("th");e.innerHTML="&nbsp;",null==(t=o.parentNode)||t.replaceChild(e,o)}else o.innerHTML="&nbsp;"}return e.innerHTML})(this.contentEditable))}insertColumnRight(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>(e=>{var t;let n=rG(),r=rY();if(!n||!r)return e.innerHTML;let{col:i}=rK(r);for(let e=0;e<n.rows.length;e++){let r=n.rows[e],o=r.insertCell(i+1);if(0===e&&r.querySelector("th")){let e=document.createElement("th");e.innerHTML="&nbsp;",null==(t=o.parentNode)||t.replaceChild(e,o)}else o.innerHTML="&nbsp;"}return e.innerHTML})(this.contentEditable))}deleteCurrentRow(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>(e=>{let t=rG(),n=rY();if(!t||!n)return e.innerHTML;let{row:r}=rK(n);return t.rows.length<=1||t.deleteRow(r),e.innerHTML})(this.contentEditable))}deleteCurrentColumn(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>(e=>{let t=rG(),n=rY();if(!t||!n)return e.innerHTML;let{col:r}=rK(n);if(t.rows.length>0&&t.rows[0].cells.length<=1)return e.innerHTML;for(let e=0;e<t.rows.length;e++){let n=t.rows[e];n.cells[r]&&n.deleteCell(r)}return e.innerHTML})(this.contentEditable))}deleteCurrentTable(){"wysiwyg"===this.mode&&this.contentEditable&&this.executeAndNotify(()=>{var e;let t;return e=this.contentEditable,(t=rG())&&t.remove(),e.innerHTML})}}let rJ={view:({attrs:e,children:t})=>{let{isOpen:n,title:r,onClose:i,onConfirm:o,confirmText:a="OK",cancelText:l="Cancel",size:s="medium"}=e;return n?c(".md-modal-overlay",{onclick:e=>{e.target===e.currentTarget&&i()},onkeydown:e=>{"Escape"===e.key?i():"Enter"===e.key&&o&&o()},tabindex:-1,style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3}},[c(`.md-modal.md-modal--${s}`,{onclick:e=>e.stopPropagation(),style:{backgroundColor:"var(--bg-color, white)",color:"var(--text-color, black)",borderRadius:"8px",padding:"20px",minWidth:"small"===s?"300px":"large"===s?"600px":"450px",maxWidth:"90vw",maxHeight:"90vh",overflow:"auto",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.2)",border:"1px solid var(--border-color, #e0e0e0)"}},[c(".md-modal-header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid var(--border-color, #e0e0e0)"}},[c("h3.md-modal-title",{style:{margin:0,fontSize:"18px",fontWeight:"600"}},r),c("button.md-modal-close",{onclick:i,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",color:"var(--text-color, #666)"}},"\xd7")]),c(".md-modal-content",{style:{marginBottom:o?"20px":"0"}},t),o&&c(".md-modal-footer",{style:{display:"flex",justifyContent:"flex-end",gap:"10px",paddingTop:"15px",borderTop:"1px solid var(--border-color, #e0e0e0)"}},[c("button.md-modal-cancel",{onclick:i,style:{padding:"8px 16px",border:"1px solid var(--border-color, #ddd)",backgroundColor:"var(--button-bg, #f5f5f5)",color:"var(--text-color, #333)",borderRadius:"4px",cursor:"pointer"}},l),c("button.md-modal-confirm",{onclick:o,style:{padding:"8px 16px",border:"none",backgroundColor:"var(--primary-color, #007bff)",color:"white",borderRadius:"4px",cursor:"pointer"}},a)])])]):null}},rQ=()=>{let e={src:"",alt:"",title:""};return{oninit:({attrs:t})=>{var n,r,i;e.src=(null==(n=t.initialValues)?void 0:n.src)||"",e.alt=(null==(r=t.initialValues)?void 0:r.alt)||"",e.title=(null==(i=t.initialValues)?void 0:i.title)||""},view:({attrs:t})=>{let{isOpen:n,onClose:r,onInsert:i}=t,o={width:"100%",padding:"8px 12px",border:"1px solid var(--border-color, #ddd)",borderRadius:"4px",fontSize:"14px",backgroundColor:"var(--input-bg, white)",color:"var(--text-color, black)"},a={display:"block",marginBottom:"5px",fontWeight:"500",fontSize:"14px"},l={marginBottom:"15px"};return c(rJ,{isOpen:n,title:"Insert Image",onClose:r,onConfirm:()=>{e.src.trim()&&(i(e.src.trim(),e.alt.trim(),e.title.trim()||void 0),r(),e.src="",e.alt="",e.title="")},confirmText:"Insert",size:"medium"},[c(".md-image-form",[c(".md-field",{style:l},[c("label",{style:a},"Image URL *"),c("input[type=url]",{style:o,placeholder:"https://example.com/image.jpg",value:e.src,oninput:t=>{e.src=t.target.value},oncreate:({dom:e})=>{setTimeout(()=>e.focus(),100)}})]),c(".md-field",{style:l},[c("label",{style:a},"Alt Text"),c("input[type=text]",{style:o,placeholder:"Describe the image",value:e.alt,oninput:t=>{e.alt=t.target.value}})]),c(".md-field",{style:l},[c("label",{style:a},"Title (optional)"),c("input[type=text]",{style:o,placeholder:"Image title for tooltip",value:e.title,oninput:t=>{e.title=t.target.value}})]),e.src&&c(".md-image-preview",{style:{marginTop:"15px",padding:"10px",border:"1px dashed var(--border-color, #ddd)",borderRadius:"4px",backgroundColor:"var(--preview-bg, #f9f9f9)"}},[c("div",{style:{marginBottom:"8px",fontSize:"12px",color:"var(--text-muted, #666)"}},"Preview:"),c("img",{src:e.src,alt:e.alt,title:e.title,style:{maxWidth:"100%",maxHeight:"200px",objectFit:"contain"},onerror:e=>{e.target.style.display="none"},onload:e=>{e.target.style.display="block"}})])])])}}},r0=()=>{let e={url:"",text:"",title:""};return{oninit:({attrs:t})=>{var n,r,i;e.url=(null==(n=t.initialValues)?void 0:n.url)||"",e.text=(null==(r=t.initialValues)?void 0:r.text)||"",e.title=(null==(i=t.initialValues)?void 0:i.title)||""},view:({attrs:t})=>{let{isOpen:n,onClose:r,onInsert:i}=t,o={width:"100%",padding:"8px 12px",border:"1px solid var(--border-color, #ddd)",borderRadius:"4px",fontSize:"14px",backgroundColor:"var(--input-bg, white)",color:"var(--text-color, black)"},a={display:"block",marginBottom:"5px",fontWeight:"500",fontSize:"14px"},l={marginBottom:"15px"};return c(rJ,{isOpen:n,title:"Insert Link",onClose:r,onConfirm:()=>{e.url.trim()&&e.text.trim()&&(i(e.url.trim(),e.text.trim(),e.title.trim()||void 0),r(),e.url="",e.text="",e.title="")},confirmText:"Insert",size:"medium"},[c(".md-link-form",[c(".md-field",{style:l},[c("label",{style:a},"Link Text *"),c("input[type=text]",{style:o,placeholder:"Text to display",value:e.text,oninput:t=>{e.text=t.target.value},oncreate:({dom:e})=>{setTimeout(()=>e.focus(),100)}})]),c(".md-field",{style:l},[c("label",{style:a},"URL *"),c("input[type=url]",{style:o,placeholder:"https://example.com",value:e.url,oninput:t=>{e.url=t.target.value}})]),c(".md-field",{style:l},[c("label",{style:a},"Title (optional)"),c("input[type=text]",{style:o,placeholder:"Link title for tooltip",value:e.title,oninput:t=>{e.title=t.target.value}})]),e.url&&e.text&&c(".md-link-preview",{style:{marginTop:"15px",padding:"10px",border:"1px dashed var(--border-color, #ddd)",borderRadius:"4px",backgroundColor:"var(--preview-bg, #f9f9f9)"}},[c("div",{style:{marginBottom:"8px",fontSize:"12px",color:"var(--text-muted, #666)"}},"Preview:"),c("a",{href:e.url,title:e.title,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--link-color, #007bff)",textDecoration:"underline"},onclick:e=>e.preventDefault()},e.text)])])])}}},r1={oninit:({state:e})=>{e.hoverRows=0,e.hoverCols=0},view:({state:e,attrs:t})=>{let{isOpen:n,onClose:r,onSelect:i,maxRows:o=8,maxCols:a=8,position:l,t:s}=t;return n?c(".md-table-selector-overlay",{onclick:e=>{e.target===e.currentTarget&&r()},style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999,backgroundColor:"rgba(0, 0, 0, 0.1)"}},[c(".md-table-selector",{style:{position:"absolute",backgroundColor:"var(--bg-color, white)",border:"1px solid var(--border-color, #ddd)",borderRadius:"6px",padding:"15px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.15)",zIndex:1e3,...l?{left:`${l.x}px`,top:`${l.y+10}px`,transform:"translateX(-50%)"}:{top:"50px",left:"50%",transform:"translateX(-50%)"}},onclick:e=>e.stopPropagation()},[c(".md-table-selector-header",{style:{marginBottom:"10px",fontSize:"14px",fontWeight:"500",color:"var(--text-color, #333)",textAlign:"center"}},[e.hoverRows>0&&e.hoverCols>0?s("tableSelectSize").replace("{rows}",e.hoverRows.toString()).replace("{cols}",e.hoverCols.toString()):s("tableSelectSizeDefault")]),c(".md-table-grid",{style:{display:"grid",gridTemplateRows:`repeat(${o}, 20px)`,gridTemplateColumns:`repeat(${a}, 20px)`,gap:"2px",marginBottom:"10px"}},Array.from({length:o},(t,n)=>Array.from({length:a},(t,o)=>{let a,l;return c(".md-table-cell",{style:(a=n+1,l=o+1,{width:"20px",height:"20px",border:"1px solid var(--border-color, #ddd)",backgroundColor:a<=e.hoverRows&&l<=e.hoverCols?"var(--primary-color, #007bff)":"var(--cell-bg, white)",cursor:"pointer",transition:"background-color 0.1s ease"}),onmouseover:()=>{var t,r;return t=n+1,r=o+1,void(e.hoverRows=t,e.hoverCols=r)},onclick:()=>{i(n+1,o+1),r()},key:`${n}-${o}`})})).flat()),c(".md-table-selector-footer",{style:{borderTop:"1px solid var(--border-color, #e0e0e0)",paddingTop:"10px",fontSize:"12px",color:"var(--text-muted, #666)",textAlign:"center"}},[c("div",s("tableClickToInsert")),c("button",{style:{marginTop:"5px",padding:"4px 8px",fontSize:"11px",border:"1px solid var(--border-color, #ddd)",backgroundColor:"var(--button-bg, #f5f5f5)",color:"var(--text-color, #333)",borderRadius:"3px",cursor:"pointer"},onclick:()=>{let e=prompt(s("tableCustomRowsPrompt"),"3"),t=prompt(s("tableCustomColsPrompt"),"3");if(e&&t){let n=parseInt(e),o=parseInt(t);n>0&&o>0&&n<=20&&o<=20&&(i(n,o),r())}}},s("tableCustomSize"))])])]):null}},r2={view:({attrs:e})=>{if(!e.isVisible)return c("");let t=[{label:e.t("insertRowAbove"),action:e.onInsertRowAbove,icon:'<svg viewBox="0 0 24 24" fill="none"><g fill="#4a90e2"><rect x="3" y="10" width="5" height="3" rx=".5"/><rect x="9" y="10" width="5" height="3" rx=".5"/><rect x="15" y="10" width="5" height="3" rx=".5"/></g><g fill="#999"><rect x="3" y="15" width="5" height="3" rx=".5"/><rect x="9" y="15" width="5" height="3" rx=".5"/><rect x="15" y="15" width="5" height="3" rx=".5"/></g><path stroke="#4a90e2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 8V4M10 5l2-2 2 2"/></svg>'},{label:e.t("insertRowBelow"),action:e.onInsertRowBelow,icon:'<svg viewBox="0 0 24 24" fill="none"><g fill="#999"><rect x="3" y="6" width="5" height="3" rx=".5"/><rect x="9" y="6" width="5" height="3" rx=".5"/><rect x="15" y="6" width="5" height="3" rx=".5"/></g><g fill="#4a90e2"><rect x="3" y="11" width="5" height="3" rx=".5"/><rect x="9" y="11" width="5" height="3" rx=".5"/><rect x="15" y="11" width="5" height="3" rx=".5"/></g><path stroke="#4a90e2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12 16v4M10 19l2 2 2-2"/></svg>'},{type:"separator"},{label:e.t("insertColumnLeft"),action:e.onInsertColumnLeft,icon:'<svg viewBox="0 0 24 24" fill="none"><g fill="#4a90e2"><rect x="9" y="6" width="3" height="4" rx=".5"/><rect x="9" y="11" width="3" height="4" rx=".5"/><rect x="9" y="16" width="3" height="4" rx=".5"/></g><g fill="#999"><rect x="14" y="6" width="3" height="4" rx=".5"/><rect x="14" y="11" width="3" height="4" rx=".5"/><rect x="14" y="16" width="3" height="4" rx=".5"/></g><path stroke="#4a90e2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M7 12H3M4 10l-2 2 2 2"/></svg>'},{label:e.t("insertColumnRight"),action:e.onInsertColumnRight,icon:'<svg viewBox="0 0 24 24" fill="none"><g fill="#999"><rect x="7" y="6" width="3" height="4" rx=".5"/><rect x="7" y="11" width="3" height="4" rx=".5"/><rect x="7" y="16" width="3" height="4" rx=".5"/></g><g fill="#4a90e2"><rect x="12" y="6" width="3" height="4" rx=".5"/><rect x="12" y="11" width="3" height="4" rx=".5"/><rect x="12" y="16" width="3" height="4" rx=".5"/></g><path stroke="#4a90e2" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M17 12h4M20 10l2 2-2 2"/></svg>'},{type:"separator"},{label:e.t("deleteRow"),action:e.onDeleteRow,icon:"✕",danger:!0},{label:e.t("deleteColumn"),action:e.onDeleteColumn,icon:"✕",danger:!0},{type:"separator"},{label:e.t("deleteTable"),action:e.onDeleteTable,icon:"\uD83D\uDDD1",danger:!0}];return c(".table-context-menu",{style:{left:`${e.position.x}px`,top:`${e.position.y}px`}},[c(".table-menu-backdrop",{onclick:e.onClose,oncontextmenu:t=>{t.preventDefault(),e.onClose()}},c(".table-menu-content",t.map(t=>"separator"===t.type?c(".table-menu-separator"):c(".table-menu-item",{class:t.danger?"danger":"",onclick:n=>{console.log("Clicked .table-menu-item"),n.preventDefault(),n.stopPropagation(),t.action&&t.action(),e.onClose()},onkeydown:n=>{("Enter"===n.key||" "===n.key)&&(n.preventDefault(),t.action&&t.action(),e.onClose())},tabindex:0},[t.icon&&c(".table-menu-icon",c.trust(t.icon)),c(".table-menu-label",t.label)]))))])}},r4={oninit:({state:e})=>{e.selectedIndex=-1},oncreate:({attrs:e,state:t,dom:n})=>{if(e.isVisible){let r=n=>{if(e.isVisible)switch(n.key){case"ArrowDown":n.preventDefault(),t.selectedIndex=Math.min(t.selectedIndex+1,e.options.length-1),c.redraw();break;case"ArrowUp":n.preventDefault(),t.selectedIndex=Math.max(t.selectedIndex-1,0),c.redraw();break;case"Enter":case" ":n.preventDefault(),t.selectedIndex>=0&&t.selectedIndex<e.options.length&&e.onSelect(e.options[t.selectedIndex]);break;case"Escape":n.preventDefault(),e.onClose()}};document.addEventListener("keydown",r),n._keydownHandler=r}},onremove:({dom:e})=>{let t=e._keydownHandler;t&&document.removeEventListener("keydown",t)},view:({attrs:e,state:t})=>{if(!e.isVisible||0===e.options.length)return c("");let n=e.position;if(e.triggerElement){let t=e.triggerElement.getBoundingClientRect();n={x:t.left,y:t.bottom+4}}return c(".dropdown-menu-container",{style:{position:"fixed",left:`${n.x}px`,top:`${n.y}px`,zIndex:1e3},onclick:e=>{e.stopPropagation()}},[c(".dropdown-backdrop",{onclick:t=>{e.onClose()},oncontextmenu:t=>{t.preventDefault(),e.onClose()}}),c(".dropdown-menu-content",e.options.map((n,r)=>{let i=r===t.selectedIndex;return c(".dropdown-menu-item",{key:n.name,class:i?"selected":"",onclick:t=>{t.preventDefault(),t.stopPropagation(),e.onSelect(n)},onmouseenter:()=>{t.selectedIndex=r,c.redraw()},onkeydown:t=>{("Enter"===t.key||" "===t.key)&&(t.preventDefault(),e.onSelect(n))},tabindex:i?0:-1},[c(".dropdown-menu-icon",{innerHTML:n.icon}),c(".dropdown-menu-label",n.title),n.shortcut&&c(".dropdown-menu-shortcut",n.shortcut)])}))])}},r5=new class{htmlToMarkdown(e){let t;"string"==typeof e?(t=document.createElement("div")).innerHTML=e:t=e.cloneNode(!0),t.innerHTML=t.innerHTML.replace(/\u200B/g,"");let n="";return this._normalizeNodes(t),Array.from(t.childNodes).forEach(e=>{n+=this._nodeToMarkdownRecursive(e)}),(n=(n=n.replace(/\n\s*\n\s*\n+/g,"\n\n")).replace(/ +\n/g,"\n")).trim()}_normalizeNodes(e){let t=e.firstChild;for(;t;){let n=t.nextSibling;if(t.nodeType===Node.TEXT_NODE&&n&&n.nodeType===Node.TEXT_NODE)t.textContent=(t.textContent||"")+(n.textContent||""),e.removeChild(n),n=t.nextSibling;else if("BR"===t.nodeName){if(!n||"BR"===n.nodeName||this._isBlockElement(n)){let n=document.createTextNode("\n");e.insertBefore(n,t)}else if(n.nodeType!==Node.TEXT_NODE||n.textContent.startsWith("\n")){if(n.nodeType===Node.ELEMENT_NODE&&!this._isBlockElement(n)){let t=document.createTextNode("\n");e.insertBefore(t,n)}}else n.textContent="\n"+n.textContent;e.removeChild(t),t=n;continue}t&&t.childNodes&&t.childNodes.length>0&&t.nodeType===Node.ELEMENT_NODE&&this._normalizeNodes(t),t=n}}_isBlockElement(e){return!!e&&e.nodeType===Node.ELEMENT_NODE&&["P","H1","H2","H3","H4","H5","H6","UL","OL","LI","BLOCKQUOTE","PRE","HR","TABLE","THEAD","TBODY","TR","DIV","IMG"].includes(e.nodeName)}_findParentElement(e,t){let n=Array.isArray(t)?t:[t],r=e.parentNode;for(;r;){if(r.nodeType===Node.ELEMENT_NODE&&n.includes(r.nodeName))return r;r=r.parentNode}return null}_nodeToMarkdownRecursive(e,t={}){switch(e.nodeName){case"#text":let n=e.textContent||"";return t.inTableCell?(n=n.replace(/\|/g,"\\|"),this._findParentElement(e,"PRE")||this._findParentElement(e,"CODE")||(n=n.replace(/\n/g,"<br>"))):this._findParentElement(e,"PRE")||this._findParentElement(e,"CODE")||(n=n.replace(/  +/g," ")),n;case"BR":return t.inTableCell?"<br>":"\n";case"IMG":if(t.inTableCell)return e.outerHTML;let r=e.getAttribute("src")||"",i=e.getAttribute("alt")||"";return`![${i}](${r})

`;case"B":case"STRONG":return`**${this._processInlineContainerRecursive(e,t).trim()}**`;case"I":case"EM":return`*${this._processInlineContainerRecursive(e,t).trim()}*`;case"S":case"DEL":case"STRIKE":return`~~${this._processInlineContainerRecursive(e,t).trim()}~~`;case"A":let o=e.getAttribute("href")||"",a=this._processInlineContainerRecursive(e,t).trim();return`[${a}](${o})`;case"CODE":if(!this._findParentElement(e,"PRE")){let n=e.textContent||"";return t.inTableCell&&(n=n.replace(/\|/g,"\\|")),`\`${n.trim()}\``}return"";case"P":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);let l=e.parentNode,s=l&&("LI"===l.nodeName||"BLOCKQUOTE"===l.nodeName),c=this._processInlineContainerRecursive(e,t).trim();if(s)return c.replace(/\n\s*\n/g,"\n").trim()+(c?"\n":"");return c?`${c}

`:"";case"UL":case"OL":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);let d=this._listToMarkdownRecursive(e,"",e.nodeName,1,t);return d.trim().length>0&&!d.endsWith("\n\n")&&(d.endsWith("\n")||(d+="\n"),d+="\n"),d;case"BLOCKQUOTE":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);let u=this._processInlineContainerRecursive(e,t).split("\n").map(e=>e.trim()).filter(e=>e.length>0);return u.map(e=>`> ${e}`).join("\n")+(u.length>0?"\n\n":"");case"PRE":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);if(e.firstChild&&"CODE"===e.firstChild.nodeName){let t=e.firstChild,n=t.className.match(/language-(\S+)/),r=n?n[1]:"",i=t.textContent||"";return i.length>0&&!i.endsWith("\n")&&(i+="\n"),`\`\`\`${r}
${i}\`\`\`

`}let p=e.textContent||"";return p.length>0&&!p.endsWith("\n")&&(p+="\n"),`\`\`\`
${p}\`\`\`

`;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);let f=parseInt(e.nodeName[1]);return`${"#".repeat(f)} ${this._processInlineContainerRecursive(e,t).trim()}

`;case"HR":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);return"\n---\n\n";case"DIV":if(t.inTableCell)return this._nodeToHtmlForTableCell(e);let h=this._processInlineContainerRecursive(e,t).trim();if(e.classList.contains("md-editable-area"))return h;return h?`${h}

`:"";case"TABLE":return this._tableToMarkdown(e,t);case"LI":return this._processInlineContainerRecursive(e,t).trim();default:if(e.childNodes&&e.childNodes.length>0)return this._processInlineContainerRecursive(e,t);let g=e.textContent||"";return t.inTableCell||this._findParentElement(e,"PRE")||this._findParentElement(e,"CODE")||(g=g.replace(/  +/g," ")),t.inTableCell&&(g=g.replace(/\|/g,"\\|"),this._findParentElement(e,"PRE")||this._findParentElement(e,"CODE")||(g=g.replace(/\n/g,"<br>"))),g}}_processInlineContainerRecursive(e,t={}){let n="";return Array.from(e.childNodes).forEach(e=>{n+=this._nodeToMarkdownRecursive(e,t)}),n}_listToMarkdownRecursive(e,t,n,r,i={}){let o="",a=1;return Array.from(e.children).forEach(e=>{if("LI"===e.nodeName){let l="OL"===n?`${a}. `:"- ",s=this._processInlineContainerRecursive(e,i).trim();s&&s.split("\n").forEach((e,n)=>{0===n?o+=`${t}${l}${e}
`:o+=`${t}  ${e}
`}),e.querySelectorAll("ul, ol").forEach(n=>{n.parentNode===e&&(o+=this._listToMarkdownRecursive(n,t+"  ",n.nodeName,r+1,i))}),"OL"===n&&a++}}),o}_tableToMarkdown(e,t={}){let n="",r=e.querySelector("thead"),i=e.querySelector("tbody")||e,o=0,a="",l="";r&&Array.from(r.querySelectorAll("tr")).forEach(e=>{let t=Array.from(e.querySelectorAll("th, td")).map(e=>this._cellContentToMarkdown(e));t.length>0&&(a+=`| ${t.join(" | ")} |
`,0===o&&(o=t.length))});let s=!1;if(0===o&&i){let e=i.querySelector("tr");if(e&&(Array.from(e.children).some(e=>"TH"===e.nodeName)||Array.from(e.children).every(e=>{var t;return 1===e.children.length&&["STRONG","B","EM","I"].includes(null==(t=e.firstElementChild)?void 0:t.nodeName)}))){let t=Array.from(e.querySelectorAll("th, td")).map(e=>this._cellContentToMarkdown(e));t.length>0&&(a+=`| ${t.join(" | ")} |
`,o=t.length,s=!0)}}if(0===o&&i){let e=i.querySelector("tr");e&&(o=e.querySelectorAll("td, th").length)}if(0===o&&""===a.trim()){let n="";return Array.from(e.querySelectorAll("tr")).forEach(e=>{Array.from(e.querySelectorAll("th, td")).forEach(e=>{n+=this._nodeToMarkdownRecursive(e,{...t,inTableCell:!1})})}),n.trim()?n.trim()+"\n\n":""}return n=a,(""!==a.trim()||o>0)&&(n+=`|${" --- |".repeat(o)}
`),Array.from(i.querySelectorAll("tr")).forEach((e,t)=>{if(s&&0===t)return;let n=Array.from(e.querySelectorAll("td, th")).map(e=>this._cellContentToMarkdown(e)),r=[];for(let e=0;e<o;e++)r.push(n[e]||"");l+=`| ${r.join(" | ")} |
`}),(n+=l).trim()?n.trim()+"\n\n":""}_cellContentToMarkdown(e){return this._processInlineContainerRecursive(e,{inTableCell:!0}).replace(/\n/g," ").trim()}_nodeToHtmlForTableCell(e){return e.outerHTML}},r3={bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",inlineCode:"Inline Code",codeBlock:"Code Block",link:"Insert Link",image:"Insert Image",table:"Insert Table",unorderedList:"Unordered List",orderedList:"Ordered List",blockquote:"Blockquote",horizontalRule:"Horizontal Rule",undo:"Undo",redo:"Redo",heading:"Heading",indent:"Increase Indent",outdent:"Decrease Indent",insertRowAbove:"Insert Row Above",insertRowBelow:"Insert Row Below",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteRow:"Delete Row",deleteColumn:"Delete Column",deleteTable:"Delete Table",wysiwyg:"WYSIWYG",markdown:"Markdown",preview:"Preview",insertLinkTitle:"Insert Link",insertImageTitle:"Insert Image",insertTableTitle:"Insert Table",linkText:"Link Text",linkUrl:"URL",imageAlt:"Alt Text",imageUrl:"Image URL",imageTitle:"Title (optional)",tableRows:"Rows",tableCols:"Columns",cancel:"Cancel",insert:"Insert",linkTextPlaceholder:"Enter link text",linkUrlPlaceholder:"https://example.com",imageAltPlaceholder:"Alt text",imageUrlPlaceholder:"https://example.com/image.jpg",imageTitlePlaceholder:"Image title",tableSelectSize:"{rows} \xd7 {cols} Table",tableSelectSizeDefault:"Select table size",tableClickToInsert:"Click to insert table",tableCustomSize:"Custom size...",tableCustomRowsPrompt:"Number of rows:",tableCustomColsPrompt:"Number of columns:"},r6={savedSelection:null,savedRange:null,savedRangeInfo:null,savedScrollPosition:null},r8=()=>{let e="",t="",n=!1,r=null,i=null,o=(e,t)=>e&&""!==e.trim()?t?t(e):e:"",a=!1,l=!1,s=!1,d=!1,u={x:0,y:0},p={x:0,y:0},f=!1,h=[],g={x:0,y:0},v=null,b=null,y=null;return{view:({attrs:w})=>{let E,{mode:T="wysiwyg",theme:k="light",toolbar:O=!0,showTabs:x=!0,placeholder:S="Start writing...",content:I="",isPreview:L=!1,markdownToHtml:A,htmlToMarkdown:C,onContentChange:N,onModeChange:D,i18n:M}=w;if(!n){let r,a;if(D||(i=T),"html"==(r=I.trim(),(a=new DOMParser().parseFromString(r,"text/html")).body.children.length>0||null!==a.body.querySelector("*")?"html":/(^#{1,6}\s)|(\*\*[^*]+\*\*)|(\*[^*]+\*)|(\[[^\]]+\]\([^)]+\))|(^\s*[-*+]\s+)/m.test(r)?"markdown":"plain"))e=I,t=C?C(I):r5.htmlToMarkdown(I);else t=I,e=o(I,A);n=!0}let _=D?T:i||T,R=((e={})=>{let t={...r3,...e};return e=>t[e]||e})(M),P=(E=[{name:"paragraph",icon:rR,title:"Paragraph",action:"paragraph",shortcut:"Ctrl+0"},{name:"heading-1",icon:rA,title:R("heading")+" 1",action:"heading-1",shortcut:"Ctrl+1"},{name:"heading-2",icon:rC,title:R("heading")+" 2",action:"heading-2",shortcut:"Ctrl+2"},{name:"heading-3",icon:rN,title:R("heading")+" 3",action:"heading-3",shortcut:"Ctrl+3"},{name:"heading-4",icon:rD,title:R("heading")+" 4",action:"heading-4",shortcut:"Ctrl+4"},{name:"heading-5",icon:rM,title:R("heading")+" 5",action:"heading-5",shortcut:"Ctrl+5"},{name:"heading-6",icon:r_,title:R("heading")+" 6",action:"heading-6",shortcut:"Ctrl+6"}],{groups:[[{name:"heading-dropdown",icon:'<svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5" fill="none"><path d="M6 4V20 M18 4V20 M6 12H18"/></svg>',title:R("heading"),action:"toggleHeading",dropdown:E,shortcut:"Ctrl+H"}],[{name:"bold",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 4h8a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/><path d="M6 12h9a4 4 0 0 1 4 4 4 4 0 0 1-4 4H6z"/></svg>',title:R("bold"),action:"bold",shortcut:"Ctrl+B",toggle:!0},{name:"italic",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="19" y1="4" x2="10" y2="4"/><line x1="14" y1="20" x2="5" y2="20"/><line x1="15" y1="4" x2="9" y2="20"/></svg>',title:R("italic"),action:"italic",shortcut:"Ctrl+I",toggle:!0},{name:"strikethrough",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 4H9a3 3 0 0 0-2.83 4"/><path d="M14 12a4 4 0 0 1 0 8H6"/><line x1="4" y1="12" x2="20" y2="12"/></svg>',title:R("strikethrough"),action:"strikethrough",shortcut:"Ctrl+U",toggle:!0}],[{name:"link",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/></svg>',title:R("link"),action:"link",shortcut:"Ctrl+K",modal:!0},{name:"inline-code",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M10.75 4.75L9 19.25"/><path d="M15.25 4.75L13.5 19.25"/><path d="M19.25 7.5L22 10.5L19.25 13.5"/><path d="M4.75 7.5L2 10.5L4.75 13.5"/></svg>',title:R("inlineCode"),action:"inlineCode",shortcut:"Ctrl+`",toggle:!0},{name:"code-block",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16,18 22,12 16,6"/><polyline points="8,6 2,12 8,18"/></svg>',title:R("codeBlock"),action:"codeBlock",shortcut:"Ctrl+Shift+`"}],[{name:"unordered-list",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="8" y1="6" x2="21" y2="6"/><line x1="8" y1="12" x2="21" y2="12"/><line x1="8" y1="18" x2="21" y2="18"/><circle cx="4" cy="6" r="1" fill="currentColor"/><circle cx="4" cy="12" r="1" fill="currentColor"/><circle cx="4" cy="18" r="1" fill="currentColor"/></svg>',title:R("unorderedList"),action:"unorderedList",shortcut:"Ctrl+L",toggle:!0},{name:"ordered-list",icon:'<svg viewBox="0 0 24 24" fill="none"><g stroke="currentColor" stroke-width="2" stroke-linecap="round"><line x1="10" y1="6" x2="22" y2="6"/><line x1="10" y1="12" x2="22" y2="12"/><line x1="10" y1="18" x2="22" y2="18"/></g><g fill="currentColor" font-family="sans-serif" font-size="6" text-anchor="middle" dominant-baseline="middle"><text x="5" y="6.5">1</text><text x="5" y="12.5">2</text><text x="5" y="18.5">3</text></g></svg>',title:R("orderedList"),action:"orderedList",shortcut:"Ctrl+Shift+L",toggle:!0},{name:"outdent",icon:'<svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="7 8 3 12 7 16"></polyline><line x1="21" y1="12" x2="3" y2="12"></line><line x1="21" y1="5" x2="9" y2="5"></line><line x1="21" y1="19" x2="9" y2="19"></line></svg>',title:R("outdent"),action:"outdent",shortcut:"Shift+Tab"},{name:"indent",icon:'<svg viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><polyline points="17 8 21 12 17 16"></polyline><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="5" x2="15" y2="5"></line><line x1="3" y1="19" x2="15" y2="19"></line></svg>',title:R("indent"),action:"indent",shortcut:"Tab"}],[{name:"blockquote",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1zM15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg>',title:R("blockquote"),action:"blockquote",shortcut:"Ctrl+Q",toggle:!0},{name:"horizontal-rule",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="4" y1="12" x2="20" y2="12"/></svg>',title:R("horizontalRule"),action:"horizontalRule",shortcut:"Ctrl+R"}],[{name:"image",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>',title:R("image"),action:"image",shortcut:"Ctrl+G",modal:!0},{name:"table",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="9" y1="3" x2="9" y2="21"/><line x1="15" y1="3" x2="15" y2="21"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="3" y1="15" x2="21" y2="15"/></svg>',title:R("table"),action:"table",shortcut:"Ctrl+T",modal:!0}],[{name:"undo",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="1 4 1 10 7 10"/><path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/></svg>',title:R("undo"),action:"undo",shortcut:"Ctrl+Z"},{name:"redo",icon:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"/><path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10"/></svg>',title:R("redo"),action:"redo",shortcut:"Ctrl+Y"}]],compact:!1}).groups,j=(n,r)=>{if("wysiwyg"===r)e=n,t=C?C(n):r5.htmlToMarkdown(n),null==N||N(t);else t=n,e=o(n,A),null==N||N(t)};r||(r=new rX(e=>{j(e,_)})),r.setMode(_);let H=n=>{if(n!==_){if("markdown"===n&&"wysiwyg"===_){let n;t=C?C(e):(n=e,r5.htmlToMarkdown(n))}else"wysiwyg"===n&&"markdown"===_&&(e=o(t,A));D||(i=n),null==r||r.setMode(n),null==D||D(n)}},V=async(e,t,n)=>{r&&(await z(),r.image(e,t,n))},$=async(e,t,n)=>{r&&(await z(),r.link(e,t))},B=async(e,t)=>{r&&(await z(),r.table(e,t))},U=()=>{let e=null==r?void 0:r.contentEditable,t=null==r?void 0:r.getTextarea(),n="wysiwyg"===_?e:t;if(n?(r6.savedScrollPosition={top:n.scrollTop,left:n.scrollLeft},console.log("\uD83D\uDD04 Saved scroll position:",{mode:_,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft,elementType:n.tagName})):console.log("❌ No scroll element found for mode:",_),"markdown"===_&&document.activeElement instanceof HTMLTextAreaElement){let e=document.activeElement;r6.savedSelection={start:e.selectionStart,end:e.selectionEnd}}else if("wysiwyg"===_){let e=document.getSelection();if(e&&e.rangeCount>0){let t=e.getRangeAt(0);r6.savedRange=t.cloneRange(),r6.savedRangeInfo={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}}},z=()=>new Promise(e=>{if("markdown"===_&&r6.savedSelection){let t=null==r?void 0:r.getTextarea();t?setTimeout(()=>{t.setSelectionRange(r6.savedSelection.start,r6.savedSelection.end),t.focus(),e()},0):e()}else"wysiwyg"===_&&r6.savedRange&&setTimeout(()=>{var t,n;if(r){let e=r.contentEditable;if(e){e.focus();let r=document.getSelection();if(r&&r6.savedRange)try{r.removeAllRanges();let i=document.createRange();r6.savedRangeInfo&&r6.savedRangeInfo.startContainer.parentNode&&e.contains(r6.savedRangeInfo.startContainer)?(i.setStart(r6.savedRangeInfo.startContainer,Math.min(r6.savedRangeInfo.startOffset,(null==(t=r6.savedRangeInfo.startContainer.textContent)?void 0:t.length)||0)),r6.savedRangeInfo.endContainer.parentNode&&e.contains(r6.savedRangeInfo.endContainer)?i.setEnd(r6.savedRangeInfo.endContainer,Math.min(r6.savedRangeInfo.endOffset,(null==(n=r6.savedRangeInfo.endContainer.textContent)?void 0:n.length)||0)):i.collapse(!0)):(i.selectNodeContents(e),i.collapse(!1)),r.addRange(i)}catch(n){console.warn("❌ Failed to restore cursor position:",n);let t=document.createRange();t.selectNodeContents(e),t.collapse(!1),r.removeAllRanges(),r.addRange(t)}}}if(r6.savedScrollPosition){let e=null==r?void 0:r.contentEditable;e?(console.log("\uD83D\uDD04 Restoring scroll position (WYSIWYG):",{savedTop:r6.savedScrollPosition.top,savedLeft:r6.savedScrollPosition.left,currentTop:e.scrollTop,currentLeft:e.scrollLeft}),e.scrollTop=r6.savedScrollPosition.top,e.scrollLeft=r6.savedScrollPosition.left,console.log("\uD83D\uDD04 After restore:",{newTop:e.scrollTop,newLeft:e.scrollLeft})):console.log("❌ No contentEditable found for scroll restore")}else console.log("❌ No saved scroll position to restore");r6.savedSelection=null,r6.savedRange=null,r6.savedRangeInfo=null,r6.savedScrollPosition=null,e()},10);if("wysiwyg"!==_||!r6.savedRange){if(r6.savedScrollPosition){let e=null==r?void 0:r.getTextarea();e?(console.log("\uD83D\uDD04 Restoring scroll position (Markdown):",{savedTop:r6.savedScrollPosition.top,savedLeft:r6.savedScrollPosition.left,currentTop:e.scrollTop,currentLeft:e.scrollLeft}),e.scrollTop=r6.savedScrollPosition.top,e.scrollLeft=r6.savedScrollPosition.left,console.log("\uD83D\uDD04 After restore (Markdown):",{newTop:e.scrollTop,newLeft:e.scrollLeft})):console.log("❌ No textarea found for scroll restore")}else console.log("❌ No saved scroll position to restore (Markdown)");r6.savedSelection=null,r6.savedRange=null,r6.savedRangeInfo=null,r6.savedScrollPosition=null,e()}}),W=e=>{var t,n,i;if(!y||!r)return;let o=r.contentEditable;if(!o)return;let a=y,l=a.closest("table");if(!l)return;let s=o.scrollTop,c=o.scrollLeft;try{switch(e){case"insertRowAbove":{let e=a.closest("tr"),n=Array.from(l.rows).indexOf(e),r=e.cells.length,i=l.insertRow(n);for(let o=0;o<r;o++){let r=i.insertCell(o);if(r.innerHTML="&nbsp;",0===n&&e.querySelector("th")){let e=document.createElement("th");e.innerHTML="&nbsp;",null==(t=r.parentNode)||t.replaceChild(e,r)}}break}case"insertRowBelow":{let e=a.closest("tr"),t=Array.from(l.rows).indexOf(e),n=e.cells.length,r=l.insertRow(t+1);for(let e=0;e<n;e++)r.insertCell(e).innerHTML="&nbsp;";break}case"insertColumnLeft":{let e=a.closest("tr"),t=Array.from(e.cells).indexOf(a);for(let e=0;e<l.rows.length;e++){let r=l.rows[e],i=r.insertCell(t);if(i.innerHTML="&nbsp;",0===e&&r.querySelector("th")){let e=document.createElement("th");e.innerHTML="&nbsp;",null==(n=i.parentNode)||n.replaceChild(e,i)}}break}case"insertColumnRight":{let e=a.closest("tr"),t=Array.from(e.cells).indexOf(a);for(let e=0;e<l.rows.length;e++){let n=l.rows[e],r=n.insertCell(t+1);if(r.innerHTML="&nbsp;",0===e&&n.querySelector("th")){let e=document.createElement("th");e.innerHTML="&nbsp;",null==(i=r.parentNode)||i.replaceChild(e,r)}}break}case"deleteRow":{let e=a.closest("tr");l.rows.length>1&&e.remove();break}case"deleteColumn":{let e=a.closest("tr"),t=Array.from(e.cells).indexOf(a);if(l.rows.length>0&&l.rows[0].cells.length>1)for(let e=0;e<l.rows.length;e++)l.rows[e].cells[t]&&l.rows[e].deleteCell(t);break}case"deleteTable":l.remove()}null==N||N(o.innerHTML),setTimeout(()=>{o.scrollTop=s,o.scrollLeft=c},10)}catch(e){console.error("Table operation failed:",e)}},F=async e=>{f=!1,b=null,r&&(await z(),r.executeAction(e.action)),c.redraw()};return c(".md-wysiwyg-editor-wrapper",{"data-theme":k},[O&&c(".md-toolbar",[P.map((e,t)=>[...e.map(e=>{let t=!1;return"undo"===e.action?t=!(null==r?void 0:r.canUndo()):"redo"===e.action&&(t=!(null==r?void 0:r.canRedo())),c("button",{type:"button",class:["md-toolbar-button",e.dropdown?"has-dropdown":"",e.dropdown&&f&&b===e.name?"dropdown-open":"",t?"disabled":""].join(" ").trim(),disabled:t,title:`${e.title}${e.shortcut?` (${e.shortcut})`:""}`,onclick:n=>{n.preventDefault(),t||((e,t,n)=>{if(t&&t.dropdown&&"toggleHeading"===e){U();let e=null==n?void 0:n.target;if(e){let n=e.getBoundingClientRect();h=P[0][0].dropdown||rP,g={x:n.left,y:n.bottom+4},v=e,b=t.name,f=!0,c.redraw();return}}switch(e){case"image":U(),a=!0,c.redraw();break;case"link":U(),l=!0,c.redraw();break;case"table":U();let i=null==n?void 0:n.target;if(i){let e=i.getBoundingClientRect();p={x:e.left+e.width/2,y:e.bottom}}s=!0,c.redraw();break;default:null==r||r.executeAction(e)}})(e.action,e,n)},innerHTML:e.icon})}),t<P.length-1&&c(".md-toolbar-separator")]).flat().filter(Boolean)]),c(".md-editor-content-area",["markdown"===_?c(".md-markdown-editor-container",{key:"markdown-editor",style:{display:"flex"}},c("textarea.md-markdown-area[name=markdown-area]",{placeholder:S,value:t,oninput:e=>{j(e.target.value,"markdown")},oncreate:e=>{null==r||r.setTextarea(e.dom)}})):c("div.md-editable-area",{key:"wysiwyg-editor",contenteditable:!0,"data-placeholder":S,oninput:e=>{j(e.target.innerHTML,"wysiwyg")},oncontextmenu:e=>{let t=e.target;if(t.closest("table")&&"wysiwyg"===_){if(e.preventDefault(),e.stopPropagation(),y=t.closest("td, th")||t,r){let e=r.contentEditable;e&&(e.scrollTop,e.scrollLeft)}return U(),f=!1,b=null,d=!0,u={x:e.clientX,y:e.clientY},c.redraw(),!1}},onclick:e=>{e.stopPropagation();let t=!1;d&&(d=!1,t=!0),f&&(f=!1,b=null,t=!0),t&&c.redraw()},oncreate:t=>{let n=t.dom;n.innerHTML=e,null==r||r.setContentEditable(n)},onupdate:t=>{var n;let r=t.dom;r.innerHTML===e||(null==(n=document.getSelection())?void 0:n.rangeCount)||(r.innerHTML=e)}})]),x&&c(".md-tabs",[c("button.md-tab-button",{type:"button",class:"wysiwyg"===_?"active":"",onclick:()=>H("wysiwyg")},R("wysiwyg")),c("button.md-tab-button",{type:"button",class:"markdown"===_?"active":"",onclick:()=>H("markdown")},R("markdown"))]),L&&c(".editor-preview",{innerHTML:"markdown"===_?o(t,A):e}),c(rQ,{isOpen:a,onClose:()=>{a=!1,c.redraw()},onInsert:V}),c(r0,{isOpen:l,onClose:()=>{l=!1,c.redraw()},onInsert:$}),c(r1,{isOpen:s,position:p,t:R,onClose:()=>{s=!1,c.redraw()},onSelect:B}),c(r2,{isVisible:d,position:u,t:R,onClose:()=>{d=!1,y=null,c.redraw()},onInsertRowAbove:()=>{W("insertRowAbove"),d=!1,y=null,c.redraw()},onInsertRowBelow:()=>{W("insertRowBelow"),d=!1,y=null,c.redraw()},onInsertColumnLeft:()=>{W("insertColumnLeft"),d=!1,y=null,c.redraw()},onInsertColumnRight:()=>{W("insertColumnRight"),d=!1,y=null,c.redraw()},onDeleteRow:()=>{W("deleteRow"),d=!1,y=null,c.redraw()},onDeleteColumn:()=>{W("deleteColumn"),d=!1,y=null,c.redraw()},onDeleteTable:()=>{W("deleteTable"),d=!1,y=null,c.redraw()}}),c(r4,{isVisible:f,position:g,options:h,triggerElement:v,onClose:()=>{f=!1,b=null,c.redraw()},onSelect:F})])}}};function r9(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}function r7(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){r7(e,t,n[t])})}return e}function it(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}),e}var ir=function(){return{view:function(e){var t=e.attrs,n=t.on,r=t.off,i=t.value,o=t.disabled,a=t.callback;return d()(w,{className:"clickable".concat(o?" grey-text":""),iconName:i?n:r,disabled:o,onclick:o?{}:function(){return a(!i)}})}}},ii=function(e){var t=e.probability,n=e.impact;if("string"==typeof t&&"string"==typeof n){var r=+t.replace(/[a-zA-Z_]/g,""),i=+n.replace(/[a-zA-Z_]/g,"");e.risk="risk_"+[[0,0,1,2,3],[0,1,2,3,4],[1,2,3,4,4],[2,3,4,4,4],[3,4,4,4,4]][r][i]}},io=function(){var e=!1;return{view:function(t){var n=t.attrs,r=n.catId,i=n.excluded,o=n.state,a=o.model,l=o.excludedComps,c=void 0===l?{}:l,u=o.lockedComps,p=void 0===u?{}:u,f=o.curNarrative,h=void 0===f?{}:f,g=a.scenario,v=g.categories,b=void 0===v?[]:v,y=g.components,w=b.length>1,E=b.filter(function(e){return e.id===r}).shift(),T=null==E?void 0:E.componentIds,k=T&&(void 0===y?[]:y).filter(function(e){return T.indexOf(e.id)>=0}),O=h.components,x=void 0===O?{}:O;return E&&k&&d()(".scenario-table.row",[d()(".col.s10.m11",w&&d()("h5.truncate",E.label)),d()(".col.s2.m1.icons",[d()(ir,{on:"lock_open",off:"lock",value:e,callback:function(t){e=t,n.update({lockedComps:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null==E||null==(t=E.componentIds)||t.forEach(function(t){return n[t]=e}),n}})}})]),k.map(function(e){var t;return[d()(ew,{label:e.label,className:"col s11",multiple:!0,disabled:void 0!==c[e.id]&&c[e.id],checkedId:x[e.id],options:null==(t=e.values)?void 0:t.filter(function(e){return!i.has(e.id)}),placeholder:s("i18n","pick"),onchange:function(t){h.components||(h.components={}),h.components[e.id]=t,nt(n,h)}}),,d()(".col.s1.icons",[d()(ir,{on:"lock_open",off:"lock",disabled:e.manual,value:!e.manual&&!p[e.id],callback:function(t){n.update({lockedComps:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return n[e.id]=!t,n}})}})])]})])}}},ia=function(){var e=0,t=!0,n=!0,r=!1,i=!1;return{oninit:function(e){return t6(e.attrs,u.CREATE_SCENARIO)},view:function(o){var a,l=o.attrs,c=l.state,u=c.model,p=c.curNarrative,h=void 0===p?{}:p,g=c.lockedComps,v=void 0===g?{}:g,b=u.personas,y=u.scenario,w=y.template,E=y.categories,T=void 0===E?[]:E,k=y.inconsistencies,x=void 0===k?{}:k,S=y.hideInconsistentValues,I=y.llm,L=y.personas,A=void 0===L?[]:L,C=y.includeDecisionSupport,N=h.components&&Object.keys(h.components).length>0;i=null!=(a=N&&I&&I.prompts&&I.prompts.some(function(e){return"narrative"===e.type}))&&a;var D=C&&A.length>0?(void 0===b?[]:b).filter(function(e){return A.includes(e.id)}):[],M=u.scenario&&u.scenario.narratives,_=h.components&&void 0!==S&&S?Object.keys(h.components).filter(function(e){return h.components[e]}).reduce(function(e,t){return h.components[t].forEach(function(t){return x[t]&&Object.keys(x[t]).forEach(function(n){return x[t][n]&&e.add(n)})}),e},new Set):new Set,R=tV(u.scenario.narratives),P=h&&h.desc?h.desc.startsWith("{")?tW(JSON.parse(h.desc)):h.desc:"";return d()(".create-scenario.row",[d()(".col.s12",[d()(O,{label:s("GENERATE_NARRATIVE"),iconName:"refresh",onclick:function(){console.log("GENERATE_NARRATIVE");var t=h.components,n=void 0===t?{}:t,r=n?Object.keys(v).reduce(function(e,t){return v[t]&&(e[t]=n[t]),e},{}):{};u.scenario.components.filter(function(e){return e.manual}).forEach(function(e){r[e.id]=n[e.id]});var i=tR(u.scenario,r);i?(e++,l.update({curNarrative:function(){return i}})):alert(s("NO_NARRATIVE"))}}),d()(O,{label:s("CLEAR_NARRATIVE"),iconName:"clear",style:"margin-left: 10px;",onclick:function(){e=+(0===e),l.update({lockedComps:function(){return{}},curNarrative:function(){return{id:f(),included:!1,components:{},saved:!1,label:"",desc:""}}})}}),i&&[d()(O,{label:s("ASK_LLM"),iconName:"auto_awesome",style:"margin-left: 10px;",disabled:!h.components||!t,onclick:function(){var e;return(e=function(){var e,n,r;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){switch(i.label){case 0:return t=!1,[4,rs(u.scenario.llm,h,u.scenario.categories,u.scenario.components).catch(function(e){console.error(e),eO({html:e}),t=!0,d().redraw()})];case 1:if(console.log(n=i.sent()),t=!0,(null==(e=u.scenario.llm)?void 0:e.id)==="clipboard")return n&&navigator.clipboard&&(r="string"==typeof n?n:n.content,navigator.clipboard.writeText(r)),eO({html:s("COPY_BOX","TOAST")}),[2];return n&&(h.label="",h.desc="string"==typeof n?n:n.content,"string"!=typeof n&&n.title&&(h.label=n.title.replace(/\*|_/g,""))),d().redraw(),[2]}})},function(){var t=this,n=arguments;return new Promise(function(r,i){var o=e.apply(t,n);function a(e){r9(o,r,i,a,l,"next",e)}function l(e){r9(o,r,i,a,l,"throw",e)}a(void 0)})})()}})],h.saved?[d()(O,{label:s("CLONE_NARRATIVE"),iconName:"content_copy",style:"margin-left: 10px;",onclick:function(){var e,t=tM(h);t.id=f(),t.saved=!1,t.label=tz(h.label,null==(e=u.scenario.narratives)?void 0:e.map(function(e){return e.label})),ne(l,t)}}),d()(O,{label:s("DELETE"),iconName:"delete",onclick:function(){return r=!0}}),d()(ep,{id:"deleteSavedNarrative",title:s("DELETE_ITEM","title",{item:s("NARRATIVE")}),onClose:function(){return r=!1},description:s("DELETE_ITEM","description",{item:s("NARRATIVE")}),isOpen:r,buttons:[{label:s("CANCEL")},{label:s("OK"),onclick:function(){e=0,u.scenario.narratives=u.scenario.narratives.filter(function(e){return e.id!==h.id}),l.update({curNarrative:function(){return{included:!1,components:{}}},lockedComps:function(){}}),t7(l,u)}}]})]:[d()(O,{label:s("SAVE_NARRATIVE"),iconName:"save",disabled:!h.label||!h.components||0===Object.keys(h.components).length,onclick:function(){ne(l,h)}})],M&&[d()(ew,{key:"narrative-select-".concat(e,"-").concat(h.id||"new"),className:"right mb0 w30",label:s("SELECT_NARRATIVE"),checkedId:h.saved?h.id:void 0,placeholder:s("i18n","pickOne"),options:R,onchange:function(t){if(t&&t.length>0){e++;var n=M.filter(function(e){return e.id===t[0]}).shift();l.update({curNarrative:function(){return n},lockedComps:function(){return u.scenario.components.reduce(function(e,t){return e[t.id]=!0,e},{})}})}}})]]),w&&N?d()(rL,it(ie({},l),{template:w,className:"col s12"})):"",!1===t&&d()(n1),n&&T.map(function(t,n){return d()(".col.s12",{className:"m".concat(Math.round(12/T.length)),key:1e4*e+n},d()(io,it(ie({},l),{catId:t.id,excluded:_})))}),d()(".col.s12",d()("i.right.material-icons.small.clickable",{title:s("TOGGLE",n?"HIDE":"SHOW"),className:"right",onclick:function(){n=!n}},n?"visibility_off":"visibility")),d()(".col.s12",[d()(".row",[d()(er,{className:"col s6 m4",value:h.label,label:s("NAME_NARRATIVE"),required:!0,oninput:function(e){h.label=e,nt(l,h)}}),d()(ec,{className:"col s6 m2 mt25",checked:h.included,label:s("INCLUDE_NARRATIVE"),onchange:function(e){h.included=e,nt(l,h)}}),C&&[d()(ew,{key:"prob".concat(h.id),placeholder:s("i18n","pick"),className:"col s6 m2",label:s("PROBABILITY"),checkedId:h.probability,options:td(0,4).map(function(e){return{id:"probability_".concat(e),label:s("PROB5",e)}}),onchange:function(e){h.probability=e[0],ii(h),nt(l,h)}}),d()(ew,{key:"imp".concat(h.id),placeholder:s("i18n","pick"),className:"col s6 m2",label:s("IMPACT"),checkedId:h.impact,options:td(0,4).map(function(e){return{id:"impact_".concat(e),label:s("IMP5",e)}}),onchange:function(e){h.impact=e[0],ii(h),nt(l,h)}}),d()(ew,{key:"".concat(h.id,"-").concat(h.probability,"-").concat(h.impact),placeholder:s("RISK_PLACEHOLDER"),className:"col s6 m2",label:s("RISK"),checkedId:h.risk,options:td(0,4).map(function(e){return{id:"risk_".concat(e),label:s("RISK5",e)}}),disabled:!0})]]),[d()("#markdown-editor",d()(r8,{key:h&&h.desc?h.id:"markdown-editor",content:P,onContentChange:function(e){var t=l.getState().curNarrative;t&&(t.desc=e,nt(l,t))},theme:"dark"===eI.getTheme()?"dark":"light",toolbar:!0,showTabs:!0,markdownToHtml:e4}))],[D.map(function(e){var t,n;return d()(".row.persona",[d()(".col.s12",d()("h5",e.label)),d()(".col.s6",[d()("img.reponsive-image",{style:{height:"200px"},src:null==(t=ej.find(function(t){return t.id===e.url}))?void 0:t.img,alt:e.label}),d()("p",e.desc)]),d()(".col.s6",d()(et,{label:s("PERSONA_IMPRESSION"),value:h.personaEffects?null==(n=h.personaEffects[e.id])?void 0:n.story:void 0,onchange:function(t){var n=h.personaEffects&&h.personaEffects[e.id];n?n.story=t:h.personaEffects?h.personaEffects[e.id]={scale:0,story:t}:h.personaEffects=r7({},e.id,{scale:0,story:t}),nt(l,h)}}))])})]])])}}},il=function(e){var t=e.body,n=e.lang,r=e.css;return'\n<!doctype html>\n<html lang="'.concat(n,'">\n<head>\n  ').concat(void 0===r?is:r,"\n</head>\n\n<body>\n  ").concat(t,"\n</body>\n</html>\n")},is="<style>\ntd, th {\n  text-align: left;\n  border: 1px solid black;\n  padding: 0.5rem;\n}\nth {\n  background-color:#999;\n}\ntable {\n  font-family: Calibri;\n  font-size: 11pt;\n  width: 100%;\n  border-collapse: collapse;\n  border-spacing: 0.5rem;\n}\n</style>";function ic(e,t,n,r,i,o,a){try{var l=e[o](a),s=l.value}catch(e){n(e);return}l.done?t(s):Promise.resolve(s).then(r,i)}var id=function(){var e;return{oninit:function(){return e=f()},view:function(t){var n=t.attrs,r=n.curNarrative,i=n.comps,o=(void 0===r?{}:r).components,a=i&&i.reduce(function(e,t){return t.values&&t.values.forEach(function(n){e[t.id+n.id]=n.label}),e},{});return[d()("table.highlight",{id:e},[d()("thead",d()("tr",[d()("th",s("DIMENSION")),d()("th",s("KEY_VALUE"))])),d()("tbody",o&&i&&a&&i.filter(function(e){return o[e.id]}).map(function(e){return d()("tr",[d()("th",e.label),d()("td",o[e.id].map(function(t){return a[e.id+t]}).join(", "))])}))]),d()(O,{label:s("COPY_TO_CLIPBOARD"),className:"right",iconName:"content_copy",onclick:function(){var t=function(t){if(t.clipboardData){var n=document.getElementById(e);n&&(t.clipboardData.setData("text/html",il({body:n.outerHTML,lang:nv.currentLocale})),t.preventDefault())}};document.addEventListener("copy",t),document.execCommand("copy"),document.removeEventListener("copy",t)}})]}}},iu=function(){var e=!1,t=function(e,t){var n;return(n=function(){var n,r;return function(e,t){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=l(0),a.throw=l(1),a.return=l(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function l(l){return function(s){var c=[l,s];if(n)throw TypeError("Generator is already executing.");for(;a&&(a=0,c[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===c[0]||2===c[0])){o=0;continue}if(3===c[0]&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(6===c[0]&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}}(this,function(i){return(r=[]).push("# ".concat((null==e||null==(n=e.scenario)?void 0:n.label)||"","\n")),t.forEach(function(e){if(r.push("## ".concat(e.label,"\n")),e.desc)try{var t=e.desc.startsWith("{")||e.desc.startsWith("[")?tW(JSON.parse(e.desc)):e.desc;r.push(t)}catch(e){console.error(e)}}),tX(e4(r.join("\n"),!1,!0),"".concat(t_(e,1===t.length?t[0].label:void 0),".doc")),[2]})},function(){var e=this,t=arguments;return new Promise(function(r,i){var o=n.apply(e,t);function a(e){ic(o,r,i,a,l,"next",e)}function l(e){ic(o,r,i,a,l,"throw",e)}a(void 0)})})()},n=function(e,t,n){e&&t.update({curNarrative:function(){return ts(e)},lockedComps:function(){return n.scenario.components.reduce(function(e,t){return e[t.id]=!0,e},{})}})};return{oninit:function(e){return t6(e.attrs,u.SHOW_SCENARIO)},view:function(r){var i,o,a=r.attrs,l=a.state,c=l.model,u=l.curNarrative,p=c.scenario,f=p.template,h=p.categories,g=void 0===h?[]:h,v=p.components,b=void 0===v?[]:v,y=p.narratives,w=void 0===y?[]:y,E=g.length>1;if((!u||!u.saved)&&w.length>0){var T=w[0];a.update({curNarrative:function(){return ts(T)}});return}var k=tV(c.scenario.narratives),x=u?w.findIndex(function(e){return e.id===u.id}):-1,S=(u&&u.desc?u.desc.startsWith("{")?tW(JSON.parse(u.desc)):u.desc:"").replace(/</g,"&lt;");return d()(".show-scenario.row",[d()("a#downloadAnchorElem",{style:"display:none"}),u&&d()(".col.s12",[u.risk&&d()("img[title=risk-status].right",{src:tB(tU(t$[+u.risk.replace("risk_","")],48))}),d()(O,{label:s("EXPORT2WORD","TITLE"),iconName:"download",className:"right",disabled:!u.desc,onclick:function(){e=!0}}),d()(ec,{checked:u.included,label:s("NARRATIVE_INCLUDED"),disabled:!0,className:"right mt3"}),d()(ep,{id:"exportToWord",title:s("EXPORT2WORD","TITLE"),isOpen:e,onToggle:function(t){e=t},fixedFooter:!0,description:d()(".export-modal",d()(".row",d()(".col.s12",s("EXPORT2WORD","DESC")))),options:{opacity:.7},buttons:[{label:s("EXPORT2WORD","CURRENT"),onclick:function(){return t(c,[u])}},{label:s("EXPORT2WORD","SELECTED"),disabled:0===w.filter(function(e){return e.included}).length,onclick:function(){return t(c,w.filter(function(e){return e.included}))}},{label:s("EXPORT2WORD","ALL"),onclick:function(){return t(c,w)}},{label:s("CANCEL")}]})])],c.scenario&&c.scenario.narratives&&c.scenario.narratives.length>0&&[d()(".col.s12",d()(".row",d()(ew,{className:"col s7 m8 l10 mb0 mw30",label:s("SELECT_NARRATIVE"),checkedId:u&&u.saved?u.id:void 0,placeholder:s("i18n","pickOne"),options:k,onchange:function(e){e&&e.length>0&&n(c.scenario.narratives.find(function(t){return t.id===e[0]}),a,c)}}),d()(".right.mb0",d()("i.material-icons.medium",{className:x<w.length-1?"blue-text clickable":"grey-text",onclick:function(){x<w.length-1&&n(w[x+1],a,c)}},"arrow_right")),d()(".right.mb0",d()("i.material-icons.medium",{className:x>0?"blue-text clickable":"grey-text",onclick:function(){x>0&&n(w[x-1],a,c)}},"arrow_left")))),S&&[d()(".col.s12",d()("#editor.row.md-editable-area",d()(tp,{md:S}))),f?d()(".col.s12",d()(rL,(i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},a),o=o={template:f},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}),i))):"",d()(".col.s12",d()(".row",[g.map(function(e){var t=e&&e.componentIds,n=t&&b.filter(function(e){return t.indexOf(e.id)>=0});return d()(".col",{className:"s".concat(12/g.length)},E&&d()("h5",e.label),d()(id,{curNarrative:u,comps:n}))})]))]])}}};function ip(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function im(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n,r,i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o=[],a=!0,l=!1;try{for(i=i.call(e);!(a=(n=i.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(e){l=!0,r=e}finally{try{a||null==i.return||i.return()}finally{if(l)throw r}}return o}}(e,t)||ig(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ih(e){return function(e){if(Array.isArray(e))return ip(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ig(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ig(e,t){if(e){if("string"==typeof e)return ip(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ip(e,t)}}var iv=function(){var e,t=function(e,t,n){return{id:e,label:t,values:n}},n=["probability","impact","risk"],r=function(n){var r=n.scenario,i=r.components;e=r.categories.filter(function(e){return e.decisionSupport}).reduce(function(e,t){return e.push.apply(e,ih(i.filter(function(e){return t.componentIds&&t.componentIds.includes(e.id)}))),e},[t("probability",s("PROBABILITY"),td(0,4).map(function(e){return{id:"probability_".concat(e),label:s("PROB5",e)}})),t("impact",s("IMPACT"),td(0,4).map(function(e){return{id:"impact_".concat(e),label:s("IMP5",e)}})),t("risk",s("RISK"),td(0,4).map(function(e){return{id:"risk_".concat(e),label:s("RISK5",e)}}))])};return{oninit:function(e){t6(e.attrs,u.DECISION_SUPPORT)},view:function(t){var i,o,a=t.attrs,l=a.state.model,c=l.scenario.narratives;r(l);var u=(void 0===c?[]:c).filter(function(e){return e.included}).sort(function(e,t){return(e.label||"").localeCompare(t.label)}),p=u.map(function(e){return e.risk||"0"}).map(function(e){return+e.replace("risk_","")+1}),f={id:"suggested_approach",included:!0,saved:!1,label:s("SUGGESTED_APPROACH","TITLE"),desc:s("SUGGESTED_APPROACH","DESC"),personaEffects:{},components:e.filter(function(e){return!n.includes(e.id)}).reduce(function(e,t){var n,r=u.map(function(e){return e.components&&e.components[t.id]}).reduce(function(e,t,n){return t&&0!==t.length&&t.filter(function(e){return e}).forEach(function(t){return e.set(t,(e.get(t)||0)+p[n])}),e},new Map),i=(n=Math).max.apply(n,ih(Array.from(r.values())));return e[t.id]=Array.from(r.entries()).filter(function(e){var t=im(e,2);return t[0],t[1]===i}).map(function(e){var t=im(e,2),n=t[0];return t[1],n}),e},{})};return u.push(f),d()(".row.decision-support",[d()(nQ,(i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){var r;r=n[t],t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r})}return e}({},a),o=o={narratives:u,components:e},Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):(function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n.push.apply(n,r)}return n})(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))}),i))])}}},ib=new(function(){var e;function t(){var e,n;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");n=void 0,(e="dashboards")in this?Object.defineProperty(this,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[e]=n}return e=[{key:"init",value:function(){var e=[{id:u.HOME,icon:"home",title:s("HOME","TITLE"),route:s("HOME","ROUTE"),visible:!0,default:!0,component:n0},{id:u.DEFINE_BOX,icon:"grid_view",title:s("DEFINE_BOX","TITLE"),route:s("DEFINE_BOX","ROUTE"),visible:!0,component:rx},{id:u.CREATE_SCENARIO,icon:"edit",title:s("CREATE_SCENARIO","TITLE"),route:s("CREATE_SCENARIO","ROUTE"),visible:!0,component:ia},{id:u.DECISION_SUPPORT,icon:"assistant_direction",title:s("DECISION_SUPPORT","TITLE"),route:s("DECISION_SUPPORT","ROUTE"),visible:function(e){return!!e&&e.includeDecisionSupport},component:iv},{id:u.SHOW_SCENARIO,icon:"visibility",title:s("SHOW_SCENARIO","TITLE"),route:s("SHOW_SCENARIO","ROUTE"),visible:!0,component:iu},{id:u.ABOUT,icon:"info",title:s("ABOUT","TITLE"),route:s("ABOUT","ROUTE"),visible:!0,component:nM},{id:u.SETTINGS,icon:"settings",iconClass:"secondary",title:s("SETTINGS","TITLE"),route:s("SETTINGS","ROUTE"),visible:!0,component:rm}];this.setList(e)}},{key:"getList",value:function(){return this.dashboards}},{key:"setList",value:function(e){this.dashboards=Object.freeze(e)}},{key:"defaultRoute",get:function(){var e=this.dashboards.filter(function(e){return e.default}).shift();return e?e.route:this.dashboards[0].route}},{key:"route",value:function(e,t){var n=this.dashboards.filter(function(t){return t.id===e}).shift();return n?"#!"+n.route+(t?"?"+d().buildQueryString(t):""):this.defaultRoute}},{key:"href",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.dashboards.filter(function(t){return t.id===e}).shift();return n?"#!".concat(n.route.replace(/:\w*/,"")).concat(t):this.defaultRoute}},{key:"switchTo",value:function(e,t,n){var r=this.dashboards.filter(function(t){return t.id===e}).shift();if(r){var i=r.route+(n?"?"+d().buildQueryString(n):"");d().route.set(i,t)}}},{key:"routingTable",value:function(){return this.dashboards.reduce(function(e,t){return e[t.route]=!1===t.hasNavBar?{render:function(){return d()(t.component,na())}}:{render:function(){return d()(nk,na(),d()(t.component,na()))}},e},{})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}());window.onbeforeunload=function(e){"true"!==localStorage.getItem(tL)&&(localStorage.setItem(tL,"true"),e.preventDefault())},nv.addOnChangeListener(function(e){console.log("Language loaded"),ib.init(),d().route(document.body,ib.defaultRoute,ib.routingTable())}),nv.init({en:{name:"English",fqn:"en-UK"},nl:{name:"Nederlands",fqn:"nl-NL",default:!0}},window.localStorage.getItem(tI)||"nl")})()})();
//# sourceMappingURL=main.js.map